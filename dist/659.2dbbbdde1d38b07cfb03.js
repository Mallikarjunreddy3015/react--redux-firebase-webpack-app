/*! For license information please see 659.2dbbbdde1d38b07cfb03.js.LICENSE.txt */
(self.webpackChunkplug_app=self.webpackChunkplug_app||[]).push([[659],{4444:function(e,t,n){"use strict";n.d(t,{BH:function(){return d},DV:function(){return M},Dv:function(){return G},G6:function(){return E},GJ:function(){return D},LL:function(){return x},Mn:function(){return T},Pz:function(){return A},Sg:function(){return f},UG:function(){return g},UI:function(){return U},US:function(){return o},Wj:function(){return Y},Yr:function(){return I},ZB:function(){return h},ZR:function(){return C},b$:function(){return _},cI:function(){return P},d:function(){return w},dS:function(){return X},eu:function(){return S},g5:function(){return i},gK:function(){return Q},gQ:function(){return $},h$:function(){return a},hl:function(){return k},hu:function(){return r},jU:function(){return y},lb:function(){return J},m9:function(){return ee},ne:function(){return W},p$:function(){return u},pd:function(){return z},r3:function(){return L},ru:function(){return v},tV:function(){return c},uI:function(){return m},ug:function(){return Z},vZ:function(){return V},w1:function(){return b},w9:function(){return O},xO:function(){return j},xb:function(){return F},z$:function(){return p},zd:function(){return B}});const r=function(e,t){if(!e)throw i(t)},i=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=i>>2,u=(3&i)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw Error();const l=i<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},a=function(e){const t=s(e);return o.encodeByteArray(t,!0)},l=function(e){return a(e).replace(/\./g,"")},c=function(e){try{return o.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function u(e){return h(void 0,e)}function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=h(e[n],t[n]));return e}class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function f(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function g(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return p().indexOf("Electron/")>=0}function b(){const e=p();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return p().indexOf("MSAppHost/")>=0}function I(){return!1}function E(){return!g()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){return"object"==typeof indexedDB}function S(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class C extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,C.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,x.prototype.create)}}class x{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(N,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new C(r,o,n)}}const N=/\{\$([^}]+)}/g;function P(e){return JSON.parse(e)}function A(e){return JSON.stringify(e)}const R=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=P(c(s[0])||""),n=P(c(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},O=function(e){const t=R(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},D=function(e){const t=R(e).claims;return"object"==typeof t&&!0===t.admin};function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function F(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function U(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function V(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(q(n)&&q(s)){if(!V(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function q(e){return null!==e&&"object"==typeof e}function j(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function B(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function z(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ${constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):e<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const t=(s<<5|s>>>27)+r+c+i+n[e]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}}function W(e,t){const n=new K(e,t);return n.subscribe.bind(n)}class K{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function H(){}const G=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Q(e,t){return`${e} failed: ${t} argument `}function Y(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Q(e,t)+"must be a valid function.")}function J(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Q(e,t)+"must be a valid context object.")}const X=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);if(s>=55296&&s<=56319){const t=s-55296;i++,r(i<e.length,"Surrogate pair missing trail surrogate."),s=65536+(t<<10)+(e.charCodeAt(i)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Z=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ee(e){return e&&e._delegate?e._delegate:e}},5982:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,":root {\n  --toastify-color-light: #fff;\n  --toastify-color-dark: #121212;\n  --toastify-color-info: #3498db;\n  --toastify-color-success: #07bc0c;\n  --toastify-color-warning: #f1c40f;\n  --toastify-color-error: #e74c3c;\n  --toastify-color-transparent: rgba(255, 255, 255, 0.7);\n  --toastify-icon-color-info: var(--toastify-color-info);\n  --toastify-icon-color-success: var(--toastify-color-success);\n  --toastify-icon-color-warning: var(--toastify-color-warning);\n  --toastify-icon-color-error: var(--toastify-color-error);\n  --toastify-toast-width: 320px;\n  --toastify-toast-background: #fff;\n  --toastify-toast-min-height: 64px;\n  --toastify-toast-max-height: 800px;\n  --toastify-font-family: sans-serif;\n  --toastify-z-index: 9999;\n  --toastify-text-color-light: #757575;\n  --toastify-text-color-dark: #fff;\n  --toastify-text-color-info: #fff;\n  --toastify-text-color-success: #fff;\n  --toastify-text-color-warning: #fff;\n  --toastify-text-color-error: #fff;\n  --toastify-spinner-color: #616161;\n  --toastify-spinner-color-empty-area: #e0e0e0;\n  --toastify-color-progress-light: linear-gradient(\n    to right,\n    #4cd964,\n    #5ac8fa,\n    #007aff,\n    #34aadc,\n    #5856d6,\n    #ff2d55\n  );\n  --toastify-color-progress-dark: #bb86fc;\n  --toastify-color-progress-info: var(--toastify-color-info);\n  --toastify-color-progress-success: var(--toastify-color-success);\n  --toastify-color-progress-warning: var(--toastify-color-warning);\n  --toastify-color-progress-error: var(--toastify-color-error);\n}\n\n.Toastify__toast-container {\n  z-index: var(--toastify-z-index);\n  -webkit-transform: translate3d(0, 0, var(--toastify-z-index) px);\n  position: fixed;\n  padding: 4px;\n  width: var(--toastify-toast-width);\n  box-sizing: border-box;\n  color: #fff;\n}\n.Toastify__toast-container--top-left {\n  top: 1em;\n  left: 1em;\n}\n.Toastify__toast-container--top-center {\n  top: 1em;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.Toastify__toast-container--top-right {\n  top: 1em;\n  right: 1em;\n}\n.Toastify__toast-container--bottom-left {\n  bottom: 1em;\n  left: 1em;\n}\n.Toastify__toast-container--bottom-center {\n  bottom: 1em;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.Toastify__toast-container--bottom-right {\n  bottom: 1em;\n  right: 1em;\n}\n\n@media only screen and (max-width : 480px) {\n  .Toastify__toast-container {\n    width: 100vw;\n    padding: 0;\n    left: 0;\n    margin: 0;\n  }\n  .Toastify__toast-container--top-left, .Toastify__toast-container--top-center, .Toastify__toast-container--top-right {\n    top: 0;\n    transform: translateX(0);\n  }\n  .Toastify__toast-container--bottom-left, .Toastify__toast-container--bottom-center, .Toastify__toast-container--bottom-right {\n    bottom: 0;\n    transform: translateX(0);\n  }\n  .Toastify__toast-container--rtl {\n    right: 0;\n    left: initial;\n  }\n}\n.Toastify__toast {\n  position: relative;\n  min-height: var(--toastify-toast-min-height);\n  box-sizing: border-box;\n  margin-bottom: 1rem;\n  padding: 8px;\n  border-radius: 4px;\n  box-shadow: 0 1px 10px 0 rgba(0, 0, 0, 0.1), 0 2px 15px 0 rgba(0, 0, 0, 0.05);\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  max-height: var(--toastify-toast-max-height);\n  overflow: hidden;\n  font-family: var(--toastify-font-family);\n  cursor: pointer;\n  direction: ltr;\n}\n.Toastify__toast--rtl {\n  direction: rtl;\n}\n.Toastify__toast-body {\n  margin: auto 0;\n  -ms-flex: 1 1 auto;\n      flex: 1 1 auto;\n  padding: 6px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n}\n.Toastify__toast-body > div:last-child {\n  -ms-flex: 1;\n      flex: 1;\n}\n.Toastify__toast-icon {\n  -webkit-margin-end: 10px;\n          margin-inline-end: 10px;\n  width: 20px;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  display: -ms-flexbox;\n  display: flex;\n}\n\n.Toastify--animate {\n  animation-fill-mode: both;\n  animation-duration: 0.7s;\n}\n\n.Toastify--animate-icon {\n  animation-fill-mode: both;\n  animation-duration: 0.3s;\n}\n\n@media only screen and (max-width : 480px) {\n  .Toastify__toast {\n    margin-bottom: 0;\n    border-radius: 0;\n  }\n}\n.Toastify__toast-theme--dark {\n  background: var(--toastify-color-dark);\n  color: var(--toastify-text-color-dark);\n}\n.Toastify__toast-theme--light {\n  background: var(--toastify-color-light);\n  color: var(--toastify-text-color-light);\n}\n.Toastify__toast-theme--colored.Toastify__toast--default {\n  background: var(--toastify-color-light);\n  color: var(--toastify-text-color-light);\n}\n.Toastify__toast-theme--colored.Toastify__toast--info {\n  color: var(--toastify-text-color-info);\n  background: var(--toastify-color-info);\n}\n.Toastify__toast-theme--colored.Toastify__toast--success {\n  color: var(--toastify-text-color-success);\n  background: var(--toastify-color-success);\n}\n.Toastify__toast-theme--colored.Toastify__toast--warning {\n  color: var(--toastify-text-color-warning);\n  background: var(--toastify-color-warning);\n}\n.Toastify__toast-theme--colored.Toastify__toast--error {\n  color: var(--toastify-text-color-error);\n  background: var(--toastify-color-error);\n}\n\n.Toastify__progress-bar-theme--light {\n  background: var(--toastify-color-progress-light);\n}\n.Toastify__progress-bar-theme--dark {\n  background: var(--toastify-color-progress-dark);\n}\n.Toastify__progress-bar--info {\n  background: var(--toastify-color-progress-info);\n}\n.Toastify__progress-bar--success {\n  background: var(--toastify-color-progress-success);\n}\n.Toastify__progress-bar--warning {\n  background: var(--toastify-color-progress-warning);\n}\n.Toastify__progress-bar--error {\n  background: var(--toastify-color-progress-error);\n}\n.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info, .Toastify__progress-bar-theme--colored.Toastify__progress-bar--success, .Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning, .Toastify__progress-bar-theme--colored.Toastify__progress-bar--error {\n  background: var(--toastify-color-transparent);\n}\n\n.Toastify__close-button {\n  color: #fff;\n  background: transparent;\n  outline: none;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n  opacity: 0.7;\n  transition: 0.3s ease;\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n}\n.Toastify__close-button--light {\n  color: #000;\n  opacity: 0.3;\n}\n.Toastify__close-button > svg {\n  fill: currentColor;\n  height: 16px;\n  width: 14px;\n}\n.Toastify__close-button:hover, .Toastify__close-button:focus {\n  opacity: 1;\n}\n\n@keyframes Toastify__trackProgress {\n  0% {\n    transform: scaleX(1);\n  }\n  100% {\n    transform: scaleX(0);\n  }\n}\n.Toastify__progress-bar {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 5px;\n  z-index: var(--toastify-z-index);\n  opacity: 0.7;\n  transform-origin: left;\n}\n.Toastify__progress-bar--animated {\n  animation: Toastify__trackProgress linear 1 forwards;\n}\n.Toastify__progress-bar--controlled {\n  transition: transform 0.2s;\n}\n.Toastify__progress-bar--rtl {\n  right: 0;\n  left: initial;\n  transform-origin: right;\n}\n\n.Toastify__spinner {\n  width: 20px;\n  height: 20px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: var(--toastify-spinner-color-empty-area);\n  border-right-color: var(--toastify-spinner-color);\n  animation: Toastify__spin 0.65s linear infinite;\n}\n\n@keyframes Toastify__bounceInRight {\n  from, 60%, 75%, 90%, to {\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  from {\n    opacity: 0;\n    transform: translate3d(3000px, 0, 0);\n  }\n  60% {\n    opacity: 1;\n    transform: translate3d(-25px, 0, 0);\n  }\n  75% {\n    transform: translate3d(10px, 0, 0);\n  }\n  90% {\n    transform: translate3d(-5px, 0, 0);\n  }\n  to {\n    transform: none;\n  }\n}\n@keyframes Toastify__bounceOutRight {\n  20% {\n    opacity: 1;\n    transform: translate3d(-20px, 0, 0);\n  }\n  to {\n    opacity: 0;\n    transform: translate3d(2000px, 0, 0);\n  }\n}\n@keyframes Toastify__bounceInLeft {\n  from, 60%, 75%, 90%, to {\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  0% {\n    opacity: 0;\n    transform: translate3d(-3000px, 0, 0);\n  }\n  60% {\n    opacity: 1;\n    transform: translate3d(25px, 0, 0);\n  }\n  75% {\n    transform: translate3d(-10px, 0, 0);\n  }\n  90% {\n    transform: translate3d(5px, 0, 0);\n  }\n  to {\n    transform: none;\n  }\n}\n@keyframes Toastify__bounceOutLeft {\n  20% {\n    opacity: 1;\n    transform: translate3d(20px, 0, 0);\n  }\n  to {\n    opacity: 0;\n    transform: translate3d(-2000px, 0, 0);\n  }\n}\n@keyframes Toastify__bounceInUp {\n  from, 60%, 75%, 90%, to {\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  from {\n    opacity: 0;\n    transform: translate3d(0, 3000px, 0);\n  }\n  60% {\n    opacity: 1;\n    transform: translate3d(0, -20px, 0);\n  }\n  75% {\n    transform: translate3d(0, 10px, 0);\n  }\n  90% {\n    transform: translate3d(0, -5px, 0);\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes Toastify__bounceOutUp {\n  20% {\n    transform: translate3d(0, -10px, 0);\n  }\n  40%, 45% {\n    opacity: 1;\n    transform: translate3d(0, 20px, 0);\n  }\n  to {\n    opacity: 0;\n    transform: translate3d(0, -2000px, 0);\n  }\n}\n@keyframes Toastify__bounceInDown {\n  from, 60%, 75%, 90%, to {\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  0% {\n    opacity: 0;\n    transform: translate3d(0, -3000px, 0);\n  }\n  60% {\n    opacity: 1;\n    transform: translate3d(0, 25px, 0);\n  }\n  75% {\n    transform: translate3d(0, -10px, 0);\n  }\n  90% {\n    transform: translate3d(0, 5px, 0);\n  }\n  to {\n    transform: none;\n  }\n}\n@keyframes Toastify__bounceOutDown {\n  20% {\n    transform: translate3d(0, 10px, 0);\n  }\n  40%, 45% {\n    opacity: 1;\n    transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 0;\n    transform: translate3d(0, 2000px, 0);\n  }\n}\n.Toastify__bounce-enter--top-left, .Toastify__bounce-enter--bottom-left {\n  animation-name: Toastify__bounceInLeft;\n}\n.Toastify__bounce-enter--top-right, .Toastify__bounce-enter--bottom-right {\n  animation-name: Toastify__bounceInRight;\n}\n.Toastify__bounce-enter--top-center {\n  animation-name: Toastify__bounceInDown;\n}\n.Toastify__bounce-enter--bottom-center {\n  animation-name: Toastify__bounceInUp;\n}\n\n.Toastify__bounce-exit--top-left, .Toastify__bounce-exit--bottom-left {\n  animation-name: Toastify__bounceOutLeft;\n}\n.Toastify__bounce-exit--top-right, .Toastify__bounce-exit--bottom-right {\n  animation-name: Toastify__bounceOutRight;\n}\n.Toastify__bounce-exit--top-center {\n  animation-name: Toastify__bounceOutUp;\n}\n.Toastify__bounce-exit--bottom-center {\n  animation-name: Toastify__bounceOutDown;\n}\n\n@keyframes Toastify__zoomIn {\n  from {\n    opacity: 0;\n    transform: scale3d(0.3, 0.3, 0.3);\n  }\n  50% {\n    opacity: 1;\n  }\n}\n@keyframes Toastify__zoomOut {\n  from {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n    transform: scale3d(0.3, 0.3, 0.3);\n  }\n  to {\n    opacity: 0;\n  }\n}\n.Toastify__zoom-enter {\n  animation-name: Toastify__zoomIn;\n}\n\n.Toastify__zoom-exit {\n  animation-name: Toastify__zoomOut;\n}\n\n@keyframes Toastify__flipIn {\n  from {\n    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);\n    animation-timing-function: ease-in;\n    opacity: 0;\n  }\n  40% {\n    transform: perspective(400px) rotate3d(1, 0, 0, -20deg);\n    animation-timing-function: ease-in;\n  }\n  60% {\n    transform: perspective(400px) rotate3d(1, 0, 0, 10deg);\n    opacity: 1;\n  }\n  80% {\n    transform: perspective(400px) rotate3d(1, 0, 0, -5deg);\n  }\n  to {\n    transform: perspective(400px);\n  }\n}\n@keyframes Toastify__flipOut {\n  from {\n    transform: perspective(400px);\n  }\n  30% {\n    transform: perspective(400px) rotate3d(1, 0, 0, -20deg);\n    opacity: 1;\n  }\n  to {\n    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);\n    opacity: 0;\n  }\n}\n.Toastify__flip-enter {\n  animation-name: Toastify__flipIn;\n}\n\n.Toastify__flip-exit {\n  animation-name: Toastify__flipOut;\n}\n\n@keyframes Toastify__slideInRight {\n  from {\n    transform: translate3d(110%, 0, 0);\n    visibility: visible;\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes Toastify__slideInLeft {\n  from {\n    transform: translate3d(-110%, 0, 0);\n    visibility: visible;\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes Toastify__slideInUp {\n  from {\n    transform: translate3d(0, 110%, 0);\n    visibility: visible;\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes Toastify__slideInDown {\n  from {\n    transform: translate3d(0, -110%, 0);\n    visibility: visible;\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes Toastify__slideOutRight {\n  from {\n    transform: translate3d(0, 0, 0);\n  }\n  to {\n    visibility: hidden;\n    transform: translate3d(110%, 0, 0);\n  }\n}\n@keyframes Toastify__slideOutLeft {\n  from {\n    transform: translate3d(0, 0, 0);\n  }\n  to {\n    visibility: hidden;\n    transform: translate3d(-110%, 0, 0);\n  }\n}\n@keyframes Toastify__slideOutDown {\n  from {\n    transform: translate3d(0, 0, 0);\n  }\n  to {\n    visibility: hidden;\n    transform: translate3d(0, 500px, 0);\n  }\n}\n@keyframes Toastify__slideOutUp {\n  from {\n    transform: translate3d(0, 0, 0);\n  }\n  to {\n    visibility: hidden;\n    transform: translate3d(0, -500px, 0);\n  }\n}\n.Toastify__slide-enter--top-left, .Toastify__slide-enter--bottom-left {\n  animation-name: Toastify__slideInLeft;\n}\n.Toastify__slide-enter--top-right, .Toastify__slide-enter--bottom-right {\n  animation-name: Toastify__slideInRight;\n}\n.Toastify__slide-enter--top-center {\n  animation-name: Toastify__slideInDown;\n}\n.Toastify__slide-enter--bottom-center {\n  animation-name: Toastify__slideInUp;\n}\n\n.Toastify__slide-exit--top-left, .Toastify__slide-exit--bottom-left {\n  animation-name: Toastify__slideOutLeft;\n}\n.Toastify__slide-exit--top-right, .Toastify__slide-exit--bottom-right {\n  animation-name: Toastify__slideOutRight;\n}\n.Toastify__slide-exit--top-center {\n  animation-name: Toastify__slideOutUp;\n}\n.Toastify__slide-exit--bottom-center {\n  animation-name: Toastify__slideOutDown;\n}\n\n@keyframes Toastify__spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}",""]),t.Z=o},3645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},8081:function(e){"use strict";e.exports=function(e){return e[1]}},1902:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(8180);r.Z.registerVersion("firebase","9.6.8","app-compat")},7073:function(e,t,n){"use strict";var r=n(8180),i=n(4444),s=n(2238);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create,Object.create;var a=n(3333),l=n(8463);const c=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},u=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},h=new i.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new a.Yd("@firebase/auth");function f(e,...t){d.logLevel<=a.in.ERROR&&d.error(`Auth (${s.SDK_VERSION}): ${e}`,...t)}function p(e,...t){throw v(e,...t)}function m(e,...t){return v(e,...t)}function g(e,t,n){const r=Object.assign(Object.assign({},u()),{[t]:n});return new i.LL("auth","Firebase",r).create(t,{appName:e.name})}function y(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&p(e,"argument-error"),g(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function v(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h.create(e,...t)}function _(e,t,...n){if(!e)throw v(t,...n)}function w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw f(t),new Error(t)}function b(e,t){e||w(t)}const T=new Map;function I(e){b(e instanceof Function,"Expected a class definition");let t=T.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,T.set(e,t),t)}function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function k(){return"http:"===S()||"https:"===S()}function S(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class C{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(k()||(0,i.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function x(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class N{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const P={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},A=new C(3e4,6e4);function R(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function O(e,t,n,r,s={}){return D(e,s,(async()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const a=(0,i.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),N.fetch()(M(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},s))}))}async function D(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},P),t);try{const t=new F(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw U(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw U(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw U(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw g(e,a,o);p(e,a)}}catch(t){if(t instanceof i.ZR)throw t;p(e,"network-request-failed")}}async function L(e,t,n,r,i={}){const s=await O(e,t,n,r,i);return"mfaPendingCredential"in s&&p(e,"multi-factor-auth-required",{_serverResponse:s}),s}function M(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?x(e.config,i):`${e.config.apiScheme}://${i}`}class F{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(m(this.auth,"network-request-failed"))),A.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function U(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=m(e,t,r);return i.customData._tokenResponse=n,i}function V(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function q(e){return 1e3*Number(e)}function j(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return f("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.tV)(n);return e?JSON.parse(e):(f("Failed to decode base64 JWT payload"),null)}catch(e){return f("Caught error parsing JWT payload as JSON",e),null}}async function B(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof i.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class z{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class ${constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=V(this.lastLoginAt),this.creationTime=V(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function W(e){var t;const n=e.auth,r=await e.getIdToken(),i=await B(e,async function(e,t){return O(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));_(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],l=(c=e.providerData,u=a,[...c.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var c,u;const h=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==l?void 0:l.length)),f=!!h&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new $(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(e,p)}class K{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_(e.idToken,"internal-error"),_(void 0!==e.idToken,"internal-error"),_(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=j(e);return _(t,"internal-error"),_(void 0!==t.exp,"internal-error"),_(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return _(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await D(e,{},(async()=>{const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=M(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",N.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new K;return n&&(_("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(_("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(_("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new K,this.toJSON())}_performRefresh(){return w("not implemented")}}function H(e,t){_("string"==typeof e||void 0===e,"internal-error",{appName:t})}class G{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await B(this,this.stsTokenManager.getToken(this.auth,e));return _(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=(0,i.m9)(e),r=await n.getIdToken(t),s=j(r);_(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:V(q(s.auth_time)),issuedAtTime:V(q(s.iat)),expirationTime:V(q(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,i.m9)(e);await W(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(_(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new G(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await W(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await B(this,async function(e,t){return O(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:T,stsTokenManager:I}=t;_(v&&I,e,"internal-error");const E=K.fromJSON(this.name,I);_("string"==typeof v,e,"internal-error"),H(u,e.name),H(h,e.name),_("boolean"==typeof w,e,"internal-error"),_("boolean"==typeof b,e,"internal-error"),H(d,e.name),H(f,e.name),H(p,e.name),H(m,e.name),H(g,e.name),H(y,e.name);const k=new G({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return T&&Array.isArray(T)&&(k.providerData=T.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t,n=!1){const r=new K;r.updateFromServerResponse(t);const i=new G({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await W(i),i}}class Q{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Q.type="NONE";const Y=Q;function J(e,t,n){return`firebase:${e}:${t}:${n}`}class X{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=J(this.userKey,r.apiKey,i),this.fullPersistenceKey=J("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?G._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new X(I(Y),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||I(Y);const s=J(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=G._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new X(i,e,n)):new X(i,e,n)}}function Z(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(re(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ee(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(se(t))return"Blackberry";if(oe(t))return"Webos";if(te(t))return"Safari";if((t.includes("chrome/")||ne(t))&&!t.includes("edge/"))return"Chrome";if(ie(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ee(e=(0,i.z$)()){return/firefox\//i.test(e)}function te(e=(0,i.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ne(e=(0,i.z$)()){return/crios\//i.test(e)}function re(e=(0,i.z$)()){return/iemobile/i.test(e)}function ie(e=(0,i.z$)()){return/android/i.test(e)}function se(e=(0,i.z$)()){return/blackberry/i.test(e)}function oe(e=(0,i.z$)()){return/webos/i.test(e)}function ae(e=(0,i.z$)()){return/iphone|ipad|ipod/i.test(e)}function le(e=(0,i.z$)()){return ae(e)||ie(e)||oe(e)||se(e)||/windows phone/i.test(e)||re(e)}function ce(e,t=[]){let n;switch(e){case"Browser":n=Z((0,i.z$)());break;case"Worker":n=`${Z((0,i.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${s.SDK_VERSION}/${r}`}class ue{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new de(this),this.idTokenSubscription=new de(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=I(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await X.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);r&&r!==i||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(_(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await W(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,i.m9)(e):null;return t&&_(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&_(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(I(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&I(e)||this._popupRedirectResolver;_(t,this,"argument-error"),this.redirectPersistenceManager=await X.create(this,[I(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return _(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ce(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function he(e){return(0,i.m9)(e)}class de{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.ne)((e=>this.observer=e))}get next(){return _(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function fe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class me{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,t){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}async function ge(e,t){return O(e,"POST","/v1/accounts:resetPassword",R(e,t))}async function ye(e,t){return O(e,"POST","/v1/accounts:update",t)}async function ve(e,t){return O(e,"POST","/v1/accounts:sendOobCode",R(e,t))}class _e extends me{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new _e(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new _e(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return L(e,"POST","/v1/accounts:signInWithPassword",R(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return L(e,"POST","/v1/accounts:signInWithEmailLink",R(e,t))}(e,{email:this._email,oobCode:this._password});default:p(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ye(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return L(e,"POST","/v1/accounts:signInWithEmailLink",R(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:p(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function we(e,t){return L(e,"POST","/v1/accounts:signInWithIdp",R(e,t))}class be extends me{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new be(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new be(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return we(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,we(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,we(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.xO)(t)}return e}}const Te={USER_NOT_FOUND:"user-not-found"};class Ie extends me{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ie({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ie({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return L(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await L(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,t));if(n.temporaryProof)throw U(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return L(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Te)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ie({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ee{constructor(e){var t,n,r,s,o,a;const l=(0,i.zd)((0,i.pd)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);_(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,i.zd)((0,i.pd)(e)).link,n=t?(0,i.zd)((0,i.pd)(t)).deep_link_id:null,r=(0,i.zd)((0,i.pd)(e)).deep_link_id;return(r?(0,i.zd)((0,i.pd)(r)).link:null)||r||n||t||e}(e);try{return new Ee(t)}catch(e){return null}}}class ke{constructor(){this.providerId=ke.PROVIDER_ID}static credential(e,t){return _e._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ee.parseLink(t);return _(n,"argument-error"),_e._fromEmailAndCode(e,n.code,n.tenantId)}}ke.PROVIDER_ID="password",ke.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ke.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Se{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ce extends Se{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xe extends Ce{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return _("providerId"in t&&"signInMethod"in t,"argument-error"),be._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return _(e.idToken||e.accessToken,"argument-error"),be._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return xe.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return xe.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new xe(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(e){return null}}}class Ne extends Ce{constructor(){super("facebook.com")}static credential(e){return be._fromParams({providerId:Ne.PROVIDER_ID,signInMethod:Ne.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ne.credentialFromTaggedObject(e)}static credentialFromError(e){return Ne.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ne.credential(e.oauthAccessToken)}catch(e){return null}}}Ne.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ne.PROVIDER_ID="facebook.com";class Pe extends Ce{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return be._fromParams({providerId:Pe.PROVIDER_ID,signInMethod:Pe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pe.credentialFromTaggedObject(e)}static credentialFromError(e){return Pe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Pe.credential(t,n)}catch(e){return null}}}Pe.GOOGLE_SIGN_IN_METHOD="google.com",Pe.PROVIDER_ID="google.com";class Ae extends Ce{constructor(){super("github.com")}static credential(e){return be._fromParams({providerId:Ae.PROVIDER_ID,signInMethod:Ae.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ae.credentialFromTaggedObject(e)}static credentialFromError(e){return Ae.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ae.credential(e.oauthAccessToken)}catch(e){return null}}}Ae.GITHUB_SIGN_IN_METHOD="github.com",Ae.PROVIDER_ID="github.com";class Re extends me{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return we(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,we(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,we(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Re(n,i):null}static _create(e,t){return new Re(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Oe extends Se{constructor(e){_(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Oe.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Oe.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Re.fromJSON(e);return _(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Re._create(n,t)}catch(e){return null}}}class De extends Ce{constructor(){super("twitter.com")}static credential(e,t){return be._fromParams({providerId:De.PROVIDER_ID,signInMethod:De.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return De.credentialFromTaggedObject(e)}static credentialFromError(e){return De.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return De.credential(t,n)}catch(e){return null}}}async function Le(e,t){return L(e,"POST","/v1/accounts:signUp",R(e,t))}De.TWITTER_SIGN_IN_METHOD="twitter.com",De.PROVIDER_ID="twitter.com";class Me{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await G._fromIdTokenResponse(e,n,r),s=Fe(n);return new Me({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Fe(n);return new Me({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Fe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ue extends i.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ue.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ue(e,t,n,r)}}function Ve(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ue._fromErrorAndOperation(e,n,t,r);throw n}))}function qe(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}async function je(e,t,n=!1){const r=await B(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Me._forOperation(e,"link",r)}async function Be(e,t,n){await W(t);const r=!1===e?"provider-already-linked":"no-such-provider";_(qe(t.providerData).has(n)===e,t.auth,r)}async function ze(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await B(e,Ve(r,i,t,e),n);_(s.idToken,r,"internal-error");const o=j(s.idToken);_(o,r,"internal-error");const{sub:a}=o;return _(e.uid===a,r,"user-mismatch"),Me._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&p(r,"user-mismatch"),e}}async function $e(e,t,n=!1){const r="signIn",i=await Ve(e,r,t),s=await Me._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function We(e,t){return $e(he(e),t)}async function Ke(e,t){const n=(0,i.m9)(e);return await Be(!1,n,t.providerId),je(n,t)}async function He(e,t){return ze((0,i.m9)(e),t)}class Ge{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Qe._fromServerResponse(e,t):p(e,"internal-error")}}class Qe extends Ge{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Qe(t)}}function Ye(e,t,n){var r;_((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),_(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(_(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Je(e,t){const n=(0,i.m9)(e),r=await ge(n,{oobCode:t}),s=r.requestType;switch(_(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_(r.mfaInfo,n,"internal-error");default:_(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Ge._fromServerResponse(he(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function Xe(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await B(e,ye(r,i));await e._updateTokensIfNecessary(s,!0)}class Ze{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class et extends Ze{constructor(e,t,n,r){super(e,t,n),this.username=r}}class tt extends Ze{constructor(e,t){super(e,"facebook.com",t)}}class nt extends et{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class rt extends Ze{constructor(e,t){super(e,"google.com",t)}}class it extends et{constructor(e,t,n){super(e,"twitter.com",t,n)}}function st(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=j(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Ze(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new tt(s,i);case"github.com":return new nt(s,i);case"google.com":return new rt(s,i);case"twitter.com":return new it(s,i,e.screenName||null);case"custom":case"anonymous":return new Ze(s,null);default:return new Ze(s,r,i)}}(n)}class ot{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new ot("enroll",e)}static _fromMfaPendingCredential(e){return new ot("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return ot._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return ot._fromIdtoken(e.multiFactorSession.idToken)}return null}}class at{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=he(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Ge._fromServerResponse(n,e)));_(r.mfaPendingCredential,n,"internal-error");const s=ot._fromMfaPendingCredential(r.mfaPendingCredential);return new at(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Me._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return _(t.user,n,"internal-error"),Me._forOperation(t.user,t.operationType,o);default:p(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class lt{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Ge._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new lt(e)}async getSession(){return ot._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const n=e,r=await this.getSession(),i=await B(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken(),r=await B(this.user,(i=this.user.auth,s={idToken:n,mfaEnrollmentId:t},O(i,"POST","/v2/accounts/mfaEnrollment:withdraw",R(i,s))));var i,s;this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(e){if("auth/user-token-expired"!==e.code)throw e}}}const ct=new WeakMap,ut="__sak";class ht{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ut,"1"),this.storage.removeItem(ut),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class dt extends ht{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,i.z$)();return te(e)||ae(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=le(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dt.type="LOCAL";const ft=dt;class pt extends ht{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pt.type="SESSION";const mt=pt;class gt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new gt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function yt(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}gt.receivers=[];class vt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=yt("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function _t(){return window}function wt(){return void 0!==_t().WorkerGlobalScope&&"function"==typeof _t().importScripts}const bt="firebaseLocalStorageDb",Tt="firebaseLocalStorage",It="fbase_key";class Et{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function kt(e,t){return e.transaction([Tt],t?"readwrite":"readonly").objectStore(Tt)}function St(){const e=indexedDB.open(bt,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Tt,{keyPath:It})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Tt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(bt);return new Et(e).toPromise()}(),t(await St()))}))}))}async function Ct(e,t,n){const r=kt(e,!0).put({[It]:t,value:n});return new Et(r).toPromise()}function xt(e,t){const n=kt(e,!0).delete(t);return new Et(n).toPromise()}class Nt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await St()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gt._getInstance(wt()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new vt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await St();return await Ct(e,ut,"1"),await xt(e,ut),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ct(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=kt(e,!1).get(t),r=await new Et(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>xt(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=kt(e,!1).getAll();return new Et(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Nt.type="LOCAL";const Pt=Nt;function At(e){return new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)}))}function Rt(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Ot=1e12;class Dt{constructor(e){this.auth=e,this.counter=Ot,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Lt(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Ot;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Ot;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Ot;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Lt{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;_(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Mt=Rt("rcb"),Ft=new C(3e4,6e4);class Ut{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!_t().grecaptcha}load(e,t=""){return _(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(_t().grecaptcha):new Promise(((n,r)=>{const s=_t().setTimeout((()=>{r(m(e,"network-request-failed"))}),Ft.get());_t()[Mt]=()=>{_t().clearTimeout(s),delete _t()[Mt];const i=_t().grecaptcha;if(!i)return void r(m(e,"internal-error"));const o=i.render;i.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(i)},At(`https://www.google.com/recaptcha/api.js??${(0,i.xO)({onload:Mt,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(s),r(m(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!_t().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vt{async load(e){return new Dt(e)}clearedOneInstance(){}}const qt="recaptcha",jt={theme:"light",type:"image"};class Bt{constructor(e,t=Object.assign({},jt),n){this.parameters=t,this.type=qt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=he(n),this.isInvisible="invisible"===this.parameters.size,_("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;_(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vt:new Ut,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha();return t.getResponse(e)||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){_(!this.parameters.sitekey,this.auth,"argument-error"),_(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=_t()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){_(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){_(k()&&!wt(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await O(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);_(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return _(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class zt{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ie._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function $t(e,t,n){var r;const i=await n.verify();try{let s;if(_("string"==typeof i,e,"argument-error"),_(n.type===qt,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){_("enroll"===t.type,e,"internal-error");const n=await function(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:start",R(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{_("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;_(n,e,"missing-multi-factor-info");const o=await function(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:start",R(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return O(e,"POST","/v1/accounts:sendVerificationCode",R(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Wt{constructor(e){this.providerId=Wt.PROVIDER_ID,this.auth=he(e)}verifyPhoneNumber(e,t){return $t(this.auth,e,(0,i.m9)(t))}static credential(e,t){return Ie._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Wt.credentialFromTaggedObject(t)}static credentialFromError(e){return Wt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ie._fromTokenResponse(t,n):null}}function Kt(e,t){return t?I(t):(_(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Wt.PROVIDER_ID="phone",Wt.PHONE_SIGN_IN_METHOD="phone";class Ht extends me{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return we(e,this._buildIdpRequest())}_linkToIdToken(e,t){return we(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return we(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Gt(e){return $e(e.auth,new Ht(e),e.bypassAuthState)}function Qt(e){const{auth:t,user:n}=e;return _(n,t,"internal-error"),ze(n,new Ht(e),e.bypassAuthState)}async function Yt(e){const{auth:t,user:n}=e;return _(n,t,"internal-error"),je(n,new Ht(e),e.bypassAuthState)}class Jt{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gt;case"linkViaPopup":case"linkViaRedirect":return Yt;case"reauthViaPopup":case"reauthViaRedirect":return Qt;default:p(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xt=new C(2e3,1e4);class Zt extends Jt{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Zt.currentPopupAction&&Zt.currentPopupAction.cancel(),Zt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=yt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(m(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,Xt.get())};e()}}Zt.currentPopupAction=null;const en=new Map;class tn extends Jt{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=en.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=sn(t),r=rn(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}en.set(this.auth._key(),e)}return this.bypassAuthState||en.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function nn(e,t){return rn(e)._set(sn(t),"true")}function rn(e){return I(e._redirectPersistence)}function sn(e){return J("pendingRedirect",e.config.apiKey,e.name)}async function on(e,t,n=!1){const r=he(e),i=Kt(r,t),s=new tn(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function an(e){const t=yt(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class ln{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return un(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!un(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cn(e))}saveEventToCache(e){this.cachedEventUids.add(cn(e)),this.lastProcessedEventTime=Date.now()}}function cn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function un({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function hn(e,t={}){return O(e,"GET","/v1/projects",t)}const dn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fn=/^https?/;function pn(e){const t=E(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!fn.test(n))return!1;if(dn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const mn=new C(3e4,6e4);function gn(){const e=_t().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let yn=null;function vn(e){return yn=yn||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){gn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{gn(),n(m(e,"network-request-failed"))},timeout:mn.get()})}if(null===(i=null===(r=_t().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=_t().gapi)||void 0===s?void 0:s.load)){const t=Rt("iframefcb");return _t()[t]=()=>{gapi.load?o():n(m(e,"network-request-failed"))},At(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw yn=null,e}))}(e),yn}const _n=new C(5e3,15e3),wn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tn(e){const t=e.config;_(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?x(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:s.SDK_VERSION},o=bn.get(e.config.apiHost);o&&(r.eid=o);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,i.xO)(r).slice(1)}`}const In={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class En{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function kn(e,t,n,r,o,a){_(e.config.authDomain,e,"auth-domain-config-required"),_(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:s.SDK_VERSION,eventId:o};if(t instanceof Se){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.xb)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof Ce){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const e of Object.keys(c))void 0===c[e]&&delete c[e];return`${function({config:e}){return e.emulator?x(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.xO)(c).slice(1)}`}const Sn="webStorageSupport";class Cn extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return w("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Cn(e)}_finalizeEnroll(e,t,n){return function(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:finalize",R(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:finalize",R(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class xn{constructor(){}static assertion(e){return Cn._fromCredential(e)}}xn.FACTOR_ID="phone";var Nn,Pn="@firebase/auth",An="0.19.9";class Rn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function On(){return window}Nn="Browser",(0,s._registerComponent)(new l.wA("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{_(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),_(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:Nn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ce(Nn)},s=new ue(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(I);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,s._registerComponent)(new l.wA("auth-internal",(e=>{return t=he(e.getProvider("auth").getImmediate()),new Rn(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.registerVersion)(Pn,An,void 0),(0,s.registerVersion)(Pn,An,"esm2017");class Dn extends ln{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Ln(e){const t=await Fn()._get(Un(e));return t&&await Fn()._remove(Un(e)),t}function Mn(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Fn(){return I(ft)}function Un(e){return J("authEvent",e.config.apiKey,e.name)}function Vn(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,i.zd)(n.join("?"))}function qn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:m("no-auth-event")}}function jn(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Bn(e=(0,i.z$)()){return!("file:"!==jn()&&"ionic:"!==jn()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function zn(){try{const e=self.localStorage,t=yt();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,i.z$)()){return(0,i.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,i.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,i.hl)()}catch(e){return $n()&&(0,i.hl)()}return!1}function $n(){return void 0!==n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Wn(){return("http:"===jn()||"https:"===jn()||(0,i.ru)()||Bn())&&!((0,i.b$)()||(0,i.UG)())&&zn()&&!$n()}function Kn(){return Bn()&&"undefined"!=typeof document}const Hn={LOCAL:"local",NONE:"none",SESSION:"session"},Gn=_,Qn="persistence";async function Yn(e){await e._initializationPromise;const t=Jn(),n=J(Qn,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Jn(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}const Xn=_;class Zn{constructor(){this.browserResolver=I(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mt,this._completeRedirectFn=on}async _openPopup(e,t,n,r){var s;return b(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},In),{width:r.toString(),height:s.toString(),top:o,left:a}),u=(0,i.z$)().toLowerCase();n&&(l=ne(u)?"_blank":n),ee(u)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=(0,i.z$)()){var t;return ae(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new En(null);const d=window.open(t||"",l,h);_(d,e,"popup-blocked");try{d.focus()}catch(e){}return new En(d)}(e,kn(e,t,n,E(),r),yt())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=kn(e,t,n,E(),r),_t().location.href=i,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await vn(e),n=_t().gapi;return _(n,e,"internal-error"),t.open({where:document.body,url:Tn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wn,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=m(e,"network-request-failed"),s=_t().setTimeout((()=>{r(i)}),_n.get());function o(){_t().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new ln(e);return t.register("authEvent",(t=>(_(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sn,{type:Sn},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),p(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await hn(e);for(const e of t)try{if(pn(e))return}catch(e){}p(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return le()||te()||ae()}}),this.cordovaResolver=I(class{constructor(){this._redirectPersistence=mt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=on}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Dn(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){p(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=On();_("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_("function"==typeof(null===(l=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_("function"==typeof(null===(u=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),en.clear(),await this._originValidation(e);const o=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Mn(),postBody:null,tenantId:e.tenantId,error:m(e,"no-auth-event")}}(e,n,r);await function(e,t){return Fn()._set(Un(e),t)}(e,o);const a=await async function(e,t,n){var r;const{BuildInfo:i}=On();b(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(b(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return ae()?o.ibi=i.packageName:ie()?o.apn=i.packageName:p(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,kn(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}(e,o,t);return async function(e,t,n){const{cordova:r}=On();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(m(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),ie()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,s,await function(e){const{cordova:t}=On();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let s=null;r?t.plugins.browsertab.openUrl(e):s=t.InAppBrowser.open(e,function(e=(0,i.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(s)}))}))}(a))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=On(),n={};ae()?n.iosBundleId=t.packageName:ie()?n.androidPackageName=t.packageName:p(e,"operation-not-supported-in-this-environment"),await hn(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=On(),s=setTimeout((async()=>{await Ln(e),t.onEvent(qn())}),500),o=async n=>{clearTimeout(s);const r=await Ln(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=Vn(e),n=t.link?decodeURIComponent(t.link):void 0,r=Vn(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Vn(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Vn(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?m(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||qn())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);const a=r,l=`${i.packageName.toLowerCase()}://`;On().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"==typeof a)try{a(e)}catch(e){console.error(e)}}}}),this.underlyingResolver=null,this._redirectPersistence=mt,this._completeRedirectFn=on}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Kn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xn(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Kn()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function er(e){return e.unwrap()}function tr(e){const{_tokenResponse:t}=e instanceof i.ZR?e.customData:e;if(!t)return null;if(!(e instanceof i.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return Wt.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=Pe;break;case"facebook.com":r=Ne;break;case"github.com":r=Ae;break;case"twitter.com":r=De;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Re._create(n,o):be._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new xe(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof i.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function nr(e,t){return t.catch((t=>{throw t instanceof i.ZR&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new ir(e,function(e,t){var n;const r=(0,i.m9)(e),s=t;return _(t.customData.operationType,r,"argument-error"),_(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),at._fromError(r,s)}(e,t));else if(r){const e=tr(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,tr(r)),additionalUserInfo:st(e),user:sr.getOrCreate(n)};var r}))}async function rr(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>nr(e,n.confirm(t))}}class ir{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return nr(er(this.auth),this.resolver.resolveSignIn(e))}}class sr{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=(0,i.m9)(e);return ct.has(t)||ct.set(t,lt._fromUser(t)),ct.get(t)}(e)}static getOrCreate(e){return sr.USER_MAP.has(e)||sr.USER_MAP.set(e,new sr(e)),sr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return nr(this.auth,Ke(this._delegate,e))}async linkWithPhoneNumber(e,t){return rr(this.auth,async function(e,t,n){const r=(0,i.m9)(e);await Be(!1,r,"phone");const s=await $t(r.auth,t,(0,i.m9)(n));return new zt(s,(e=>Ke(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return nr(this.auth,async function(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,Se);const s=Kt(r.auth,n);return new Zt(r.auth,"linkViaPopup",t,s,r).executeNotNull()}(this._delegate,e,Zn))}async linkWithRedirect(e){return await Yn(he(this.auth)),function(e,t,n){return async function(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,Se);const s=Kt(r.auth,n);await Be(!1,r,t.providerId),await nn(s,r.auth);const o=await an(r);return s._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}(this._delegate,e,Zn)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return nr(this.auth,He(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return rr(this.auth,async function(e,t,n){const r=(0,i.m9)(e),s=await $t(r.auth,t,(0,i.m9)(n));return new zt(s,(e=>He(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return nr(this.auth,async function(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,Se);const s=Kt(r.auth,n);return new Zt(r.auth,"reauthViaPopup",t,s,r).executeNotNull()}(this._delegate,e,Zn))}async reauthenticateWithRedirect(e){return await Yn(he(this.auth)),function(e,t,n){return async function(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,Se);const s=Kt(r.auth,n);await nn(s,r.auth);const o=await an(r);return s._openRedirect(r.auth,t,"reauthViaRedirect",o)}(e,t,n)}(this._delegate,e,Zn)}sendEmailVerification(e){return async function(e,t){const n=(0,i.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Ye(n.auth,r,t);const{email:s}=await async function(e,t){return ve(e,t)}(n.auth,r);s!==e.email&&await e.reload()}(this._delegate,e)}async unlink(e){return await async function(e,t){const n=(0,i.m9)(e);await Be(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return O(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),s=qe(r||[]);return n.providerData=n.providerData.filter((e=>s.has(e.providerId))),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}(this._delegate,e),this}updateEmail(e){return function(e,t){return Xe((0,i.m9)(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Xe((0,i.m9)(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await je((0,i.m9)(e),t)}(this._delegate,e)}updateProfile(e){return async function(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,i.m9)(e),s={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await B(r,async function(e,t){return O(e,"POST","/v1/accounts:update",t)}(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find((({providerId:e})=>"password"===e));a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return async function(e,t,n){const r=(0,i.m9)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Ye(r.auth,s,n);const{email:o}=await async function(e,t){return ve(e,t)}(r.auth,s);o!==e.email&&await e.reload()}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}sr.USER_MAP=new WeakMap;const or=_;class ar{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;or(n,"invalid-api-key",{appName:e.name}),or(n,"invalid-api-key",{appName:e.name});const r="undefined"!=typeof window?Zn:void 0;this._delegate=t.initialize({options:{persistence:cr(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(c),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?sr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=he(e);_(r._canInitEmulator,r,"emulator-config-failed"),_(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=fe(t),{host:o,port:a}=function(e){const t=fe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:pe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:pe(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}applyActionCode(e){return async function(e,t){await async function(e,t){return O(e,"POST","/v1/accounts:update",R(e,t))}((0,i.m9)(e),{oobCode:t})}(this._delegate,e)}checkActionCode(e){return Je(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await ge((0,i.m9)(e),{oobCode:t,newPassword:n})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return nr(this._delegate,async function(e,t,n){const r=he(e),i=await Le(r,{returnSecureToken:!0,email:t,password:n}),s=await Me._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return async function(e,t){const n={identifier:t,continueUri:k()?E():"http://localhost"},{signinMethods:r}=await async function(e,t){return O(e,"POST","/v1/accounts:createAuthUri",R(e,t))}((0,i.m9)(e),n);return r||[]}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Ee.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){or(Wn(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await he(e)._initializationPromise,on(e,t,!1)}(this._delegate,Zn);return e?nr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){he(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=lr(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=lr(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=(0,i.m9)(e),s={requestType:"EMAIL_SIGNIN",email:t};_(n.handleCodeInApp,r,"argument-error"),n&&Ye(r,s,n),await async function(e,t){return ve(e,t)}(r,s)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=(0,i.m9)(e),s={requestType:"PASSWORD_RESET",email:t};n&&Ye(r,s,n),await async function(e,t){return ve(e,t)}(r,s)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Gn(Object.values(Hn).includes(t),e,"invalid-persistence-type"),(0,i.b$)()?Gn(t!==Hn.SESSION,e,"unsupported-persistence-type"):(0,i.UG)()?Gn(t===Hn.NONE,e,"unsupported-persistence-type"):$n()?Gn(t===Hn.NONE||t===Hn.LOCAL&&(0,i.hl)(),e,"unsupported-persistence-type"):Gn(t===Hn.NONE||zn(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Hn.SESSION:t=mt;break;case Hn.LOCAL:t=await I(Pt)._isAvailable()?Pt:ft;break;case Hn.NONE:t=Y;break;default:return p("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return nr(this._delegate,async function(e){var t;const n=he(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Me({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Le(n,{returnSecureToken:!0}),i=await Me._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return nr(this._delegate,We(this._delegate,e))}signInWithCustomToken(e){return nr(this._delegate,async function(e,t){const n=he(e),r=await async function(e,t){return L(e,"POST","/v1/accounts:signInWithCustomToken",R(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Me._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}(this._delegate,e))}signInWithEmailAndPassword(e,t){return nr(this._delegate,function(e,t,n){return We((0,i.m9)(e),ke.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return nr(this._delegate,async function(e,t,n){const r=(0,i.m9)(e),s=ke.credentialWithLink(t,n||E());return _(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),We(r,s)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return rr(this._delegate,async function(e,t,n){const r=he(e),s=await $t(r,t,(0,i.m9)(n));return new zt(s,(e=>We(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return or(Wn(),this._delegate,"operation-not-supported-in-this-environment"),nr(this._delegate,async function(e,t,n){const r=he(e);y(e,t,Se);const i=Kt(r,n);return new Zt(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Zn))}async signInWithRedirect(e){return or(Wn(),this._delegate,"operation-not-supported-in-this-environment"),await Yn(this._delegate),function(e,t,n){return async function(e,t,n){const r=he(e);y(e,t,Se);const i=Kt(r,n);return await nn(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}(this._delegate,e,Zn)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Je((0,i.m9)(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function lr(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&sr.getOrCreate(e)),error:t,complete:n}}function cr(e,t){const n=function(e,t){const n=Jn();if(!n)return[];const r=J(Qn,e,t);switch(n.getItem(r)){case Hn.NONE:return[Y];case Hn.LOCAL:return[Pt,mt];case Hn.SESSION:return[mt];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(Pt)||n.push(Pt),"undefined"!=typeof window)for(const e of[ft,mt])n.includes(e)||n.push(e);return n.includes(Y)||n.push(Y),n}ar.Persistence=Hn;class ur{constructor(){this.providerId="phone",this._delegate=new Wt(er(r.Z.auth()))}static credential(e,t){return Wt.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}ur.PHONE_SIGN_IN_METHOD=Wt.PHONE_SIGN_IN_METHOD,ur.PROVIDER_ID=Wt.PROVIDER_ID;const hr=_;var dr;(dr=r.Z).INTERNAL.registerComponent(new l.wA("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ar(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ke,FacebookAuthProvider:Ne,GithubAuthProvider:Ae,GoogleAuthProvider:Pe,OAuthProvider:xe,SAMLAuthProvider:Oe,PhoneAuthProvider:ur,PhoneMultiFactorGenerator:xn,RecaptchaVerifier:class{constructor(e,t,n=r.Z.app()){var i;hr(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Bt(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:De,Auth:ar,AuthCredential:me,Error:i.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),dr.registerVersion("@firebase/auth-compat","0.2.9")},2738:function(e,t,n){"use strict";var r=n(8180),i=n(8463),s=n(2238),o=n(4444),a=n(3333);const l="@firebase/database",c="0.12.5";let u="";function h(e){u=e}class d{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,o.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,o.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class f{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,o.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const p=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new d(t)}}catch(e){}return new f},m=p("localStorage"),g=p("sessionStorage"),y=new a.Yd("@firebase/database"),v=function(){let e=1;return function(){return e++}}(),_=function(e){const t=(0,o.dS)(e),n=new o.gQ;n.update(t);const r=n.digest();return o.US.encodeByteArray(r)},w=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=w.apply(null,r):t+="object"==typeof r?(0,o.Pz)(r):r,t+=" "}return t};let b=null,T=!0;const I=function(e,t){(0,o.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(y.logLevel=a.in.VERBOSE,b=y.log.bind(y),t&&g.set("logging_enabled",!0)):"function"==typeof e?b=e:(b=null,g.remove("logging_enabled"))},E=function(...e){if(!0===T&&(T=!1,null===b&&!0===g.get("logging_enabled")&&I(!0)),b){const t=w.apply(null,e);b(t)}},k=function(e){return function(...t){E(e,...t)}},S=function(...e){const t="FIREBASE INTERNAL ERROR: "+w(...e);y.error(t)},C=function(...e){const t=`FIREBASE FATAL ERROR: ${w(...e)}`;throw y.error(t),new Error(t)},x=function(...e){const t="FIREBASE WARNING: "+w(...e);y.warn(t)},N=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},P="[MIN_NAME]",A="[MAX_NAME]",R=function(e,t){if(e===t)return 0;if(e===P||t===A)return-1;if(t===P||e===A)return 1;{const n=q(e),r=q(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},O=function(e,t){return e===t?0:e<t?-1:1},D=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,o.Pz)(t))},L=function(e){if("object"!=typeof e||null===e)return(0,o.Pz)(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=(0,o.Pz)(t[r]),n+=":",n+=L(e[t[r]]);return n+="}",n},M=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function F(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const U=function(e){(0,o.hu)(!N(e),"Invalid JSON number");let t,n,r,i,s;0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=i+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse();const l=a.join("");let c="";for(s=0;s<64;s+=8){let e=parseInt(l.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()},V=new RegExp("^-?(0*)\\d{1,10}$"),q=function(e){if(V.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},j=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw x("Exception was thrown by user callback.",t),e}),Math.floor(0))}},B=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class z{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){x(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ${constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',x(e)}}class W{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}W.OWNER="owner";const K=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,H="websocket",G="long_polling";class Q{constructor(e,t,n,r,i=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=m.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&m.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Y(e,t,n){let r;if((0,o.hu)("string"==typeof t,"typeof type must == string"),(0,o.hu)("object"==typeof n,"typeof params must == object"),t===H)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==G)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return F(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class J{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,o.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,o.p$)(this.counters_)}}const X={},Z={};function ee(e){const t=e.toString();return X[t]||(X[t]=new J),X[t]}class te{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&j((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ne{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k(e),this.stats_=ee(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),Y(t,G,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new te(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if((0,o.Yr)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new re(((...e)=>{const[t,n,r,i,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ne.forceAllow_=!0}static forceDisallow(){ne.forceDisallow_=!0}static isAvailable(){return!((0,o.Yr)()||!ne.forceAllow_&&(ne.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,o.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,o.h$)(t),r=M(n,1840);for(let e=0;e<r.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,o.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,o.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class re{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=v(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=re.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(e){E("frame writing exception"),e.stack&&E(e.stack),E(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||E("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){(0,o.Yr)()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{E("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let ie=null;"undefined"!=typeof MozWebSocket?ie=MozWebSocket:"undefined"!=typeof WebSocket&&(ie=WebSocket);class se{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k(this.connId),this.stats_=ee(t),this.connURL=se.connectionURL_(t,s,o,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r){const i={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),Y(e,H,i)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,m.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){const e=this.nodeAdmin?"AdminNode":"Node",t={headers:{"User-Agent":`Firebase/5/${u}/${process.platform}/${e}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(t.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(t.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n=process.env,r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(t.proxy={origin:r}),this.mySock=new ie(this.connURL,[],t)}else{const e={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new ie(this.connURL,[],e)}}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){se.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ie&&!se.forceDisallow_}static previouslyFailed(){return m.isInMemoryStorage||!0===m.get("previous_websocket_failure")}markConnectionHealthy(){m.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,o.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,o.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=M(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}se.responsesRequiredToBeHealthy=2,se.healthyTimeout=3e4;class oe{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ne,se]}initTransports_(e){const t=se&&se.isAvailable();let n=t&&!se.previouslyFailed();if(e.webSocketOnly&&(t||x("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[se];else{const e=this.transports_=[];for(const t of oe.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class ae{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k("c:"+this.id+":"),this.transportManager_=new oe(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=B((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=D("t",e),n=D("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=D("t",e),n=D("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=D("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?S("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&x("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),B((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):B((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(m.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class le{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class ce{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,o.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let e=0;e<r.length;e++)if(r[e].callback===t&&(!n||n===r[e].context))return void r.splice(e,1)}validateEventType_(e){(0,o.hu)(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class ue extends ce{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ue}getInitialEvent(e){return(0,o.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class he{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function de(){return new he("")}function fe(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function pe(e){return e.pieces_.length-e.pieceNum_}function me(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new he(e.pieces_,t)}function ge(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ye(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function ve(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new he(t,0)}function _e(e,t){const n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof he)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new he(n,0)}function we(e){return e.pieceNum_>=e.pieces_.length}function be(e,t){const n=fe(e),r=fe(t);if(null===n)return t;if(n===r)return be(me(e),me(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Te(e,t){const n=ye(e,0),r=ye(t,0);for(let e=0;e<n.length&&e<r.length;e++){const t=R(n[e],r[e]);if(0!==t)return t}return n.length===r.length?0:n.length<r.length?-1:1}function Ie(e,t){if(pe(e)!==pe(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ee(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(pe(e)>pe(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class ke{constructor(e,t){this.errorPrefix_=t,this.parts_=ye(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=(0,o.ug)(this.parts_[e]);Se(this)}}function Se(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ce(e))}function Ce(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class xe extends ce{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new xe}getInitialEvent(e){return(0,o.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ne=1e3;class Pe extends le{constructor(e,t,n,r,i,s,a,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Pe.nextPersistentConnectionId_++,this.log_=k("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ne,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xe.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ue.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new o.BH,n={p:e._path.toString(),q:e._queryObject},r={action:"g",request:n,onComplete:e=>{const r=e.d;"ok"===e.s?(this.onDataUpdate_(n.p,r,!1,null),t.resolve(r)):t.reject(r)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_||setTimeout((()=>{const e=this.outstandingGets_[i];void 0!==e&&r===e&&(delete this.outstandingGets_[i],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+i+" timed out on connection"),t.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;Pe.warnOnListenWarnings_(s,t),(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,o.r3)(e,"w")){const n=(0,o.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();x(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,o.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,o.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,o.Pz)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):S("Unrecognized action received from server: "+(0,o.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ne,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ne,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ne),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Pe.nextConnectionId_++,i=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},c=function(e){(0,o.hu)(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new ae(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{x(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&x(e),l())}}}interrupt(e){E("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){E("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ne,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>L(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new he(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){E("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){E("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,o.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+u.replace(/\./g,"-")]=1,(0,o.uI)()?e["framework.cordova"]=1:(0,o.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ue.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&e}}Pe.nextPersistentConnectionId_=0,Pe.nextConnectionId_=0;class Ae{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ae(e,t)}}class Re{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Ae(P,e),r=new Ae(P,t);return 0!==this.compare(n,r)}minPost(){return Ae.MIN}}let Oe;class De extends Re{static get __EMPTY_NODE(){return Oe}static set __EMPTY_NODE(e){Oe=e}compare(e,t){return R(e.name,t.name)}isDefinedOn(e){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ae.MIN}maxPost(){return new Ae(A,Oe)}makePost(e,t){return(0,o.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ae(e,Oe)}toString(){return".key"}}const Le=new De;class Me{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Fe{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Fe.RED,this.left=null!=r?r:Ue.EMPTY_NODE,this.right=null!=i?i:Ue.EMPTY_NODE}copy(e,t,n,r,i){return new Fe(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ue.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ue.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Fe.RED=!0,Fe.BLACK=!1;class Ue{constructor(e,t=Ue.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ue(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fe.BLACK,null,null))}remove(e){return new Ue(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fe.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Me(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Me(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Me(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Me(this.root_,null,this.comparator_,!0,e)}}function Ve(e,t){return R(e.name,t.name)}function qe(e,t){return R(e,t)}let je;Ue.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Fe(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Be=function(e){return"number"==typeof e?"number:"+U(e):"string:"+e},ze=function(e){if(e.isLeafNode()){const t=e.val();(0,o.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,o.r3)(t,".sv"),"Priority must be a string or number.")}else(0,o.hu)(e===je||e.isEmpty(),"priority of unexpected type.");(0,o.hu)(e===je||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let $e,We,Ke;class He{constructor(e,t=He.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,o.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ze(this.priorityNode_)}static set __childrenNodeConstructor(e){$e=e}static get __childrenNodeConstructor(){return $e}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new He(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:He.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return we(e)?this:".priority"===fe(e)?this.priorityNode_:He.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:He.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=fe(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:((0,o.hu)(".priority"!==n||1===pe(e),".priority must be the last token in a path"),this.updateImmediateChild(n,He.__childrenNodeConstructor.EMPTY_NODE.updateChild(me(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Be(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?U(this.value_):this.value_,this.lazyHash_=_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===He.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof He.__childrenNodeConstructor?-1:((0,o.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=He.VALUE_TYPE_ORDER.indexOf(t),i=He.VALUE_TYPE_ORDER.indexOf(n);return(0,o.hu)(r>=0,"Unknown leaf type: "+t),(0,o.hu)(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}He.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Ge=new class extends Re{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?R(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ae.MIN}maxPost(){return new Ae(A,new He("[PRIORITY-POST]",Ke))}makePost(e,t){const n=We(e);return new Ae(t,new He("[PRIORITY-POST]",n))}toString(){return".priority"}},Qe=Math.log(2);class Ye{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Qe,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Je=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Fe(a,o.node,Fe.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Fe(a,o.node,Fe.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Fe(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Fe.BLACK):(a(r,Fe.BLACK),a(r,Fe.RED))}return s}(new Ye(e.length));return new Ue(r||t,s)};let Xe;const Ze={};class et{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,o.hu)(Ze&&Ge,"ChildrenNode.ts has not been loaded"),Xe=Xe||new et({".priority":Ze},{".priority":Ge}),Xe}get(e){const t=(0,o.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ue?t:null}hasIndex(e){return(0,o.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,o.hu)(e!==Le,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Ae.Wrap);let s,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();s=r?Je(n,e.getCompare()):Ze;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=s,new et(u,c)}addToIndexes(e,t){const n=(0,o.UI)(this.indexes_,((n,r)=>{const i=(0,o.DV)(this.indexSet_,r);if((0,o.hu)(i,"Missing index implementation for "+r),n===Ze){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Ae.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Je(n,i.getCompare())}return Ze}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Ae(e.name,r))),i.insert(e,e.node)}}));return new et(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,o.UI)(this.indexes_,(n=>{if(n===Ze)return n;{const r=t.get(e.name);return r?n.remove(new Ae(e.name,r)):n}}));return new et(n,this.indexSet_)}}let tt;class nt{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ze(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return tt||(tt=new nt(new Ue(qe),null,et.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tt}updatePriority(e){return this.children_.isEmpty()?this:new nt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?tt:t}}getChild(e){const t=fe(e);return null===t?this:this.getImmediateChild(t).getChild(me(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,o.hu)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Ae(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?tt:this.priorityNode_;return new nt(r,s,i)}}updateChild(e,t){const n=fe(e);if(null===n)return t;{(0,o.hu)(".priority"!==fe(e)||1===pe(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(me(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Ge,((s,o)=>{t[s]=o.val(e),n++,i&&nt.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Be(this.getPriority().val())+":"),this.forEachChild(Ge,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":_(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Ae(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ae(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ae(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Ae.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Ae.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rt?-1:0}withIndex(e){if(e===Le||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new nt(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Le||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Ge),n=t.getIterator(Ge);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Le?null:this.indexMap_.get(e.toString())}}nt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const rt=new class extends nt{constructor(){super(new Ue(qe),nt.EMPTY_NODE,et.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return nt.EMPTY_NODE}isEmpty(){return!1}};function it(e,t=null){if(null===e)return nt.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,o.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new He(e,it(t));if(e instanceof Array){let n=nt.EMPTY_NODE;return F(e,((t,r)=>{if((0,o.r3)(e,t)&&"."!==t.substring(0,1)){const e=it(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(it(t))}{const n=[];let r=!1;if(F(e,((e,t)=>{if("."!==e.substring(0,1)){const i=it(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Ae(e,i)))}})),0===n.length)return nt.EMPTY_NODE;const i=Je(n,Ve,(e=>e.name),qe);if(r){const e=Je(n,Ge.getCompare());return new nt(i,it(t),new et({".priority":e},{".priority":Ge}))}return new nt(i,it(t),et.Default)}}Object.defineProperties(Ae,{MIN:{value:new Ae(P,nt.EMPTY_NODE)},MAX:{value:new Ae(A,rt)}}),De.__EMPTY_NODE=nt.EMPTY_NODE,He.__childrenNodeConstructor=nt,je=rt,Ke=rt,function(e){We=e}(it);class st extends Re{constructor(e){super(),this.indexPath_=e,(0,o.hu)(!we(e)&&".priority"!==fe(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?R(e.name,t.name):i}makePost(e,t){const n=it(e),r=nt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ae(t,r)}maxPost(){const e=nt.EMPTY_NODE.updateChild(this.indexPath_,rt);return new Ae(A,e)}toString(){return ye(this.indexPath_,0).join("/")}}const ot=new class extends Re{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?R(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ae.MIN}maxPost(){return Ae.MAX}makePost(e,t){const n=it(e);return new Ae(t,n)}toString(){return".value"}},at="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",lt=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=at.charAt(n%64),n=Math.floor(n/64);(0,o.hu)(0===n,"Cannot push at time == 0");let a=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)a+=at.charAt(t[i]);return(0,o.hu)(20===a.length,"nextPushId: Length should be 20."),a}}(),ct=function(e){if("2147483647"===e)return"-";const t=q(e);if(null!=t)return""+(t+1);const n=new Array(e.length);for(let t=0;t<n.length;t++)n[t]=e.charAt(t);if(n.length<786)return n.push("-"),n.join("");let r=n.length-1;for(;r>=0&&"z"===n[r];)r--;if(-1===r)return A;const i=n[r],s=at.charAt(at.indexOf(i)+1);return n[r]=s,n.slice(0,r+1).join("")},ut=function(e){if("-2147483648"===e)return P;const t=q(e);if(null!=t)return""+(t-1);const n=new Array(e.length);for(let t=0;t<n.length;t++)n[t]=e.charAt(t);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=at.charAt(at.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ht(e){return{type:"value",snapshotNode:e}}function dt(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ft(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function pt(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class mt{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){(0,o.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(ft(t,a)):(0,o.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(dt(t,n)):s.trackChildChange(pt(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ge,((e,r)=>{t.hasChild(e)||n.trackChildChange(ft(e,r))})),t.isLeafNode()||t.forEachChild(Ge,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(pt(t,r,i))}else n.trackChildChange(dt(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?nt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class gt{constructor(e){this.indexedFilter_=new mt(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gt.getStartPost_(e),this.endPost_=gt.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,n,r,i,s){return this.matches(new Ae(t,n))||(n=nt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=nt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(nt.EMPTY_NODE);const i=this;return t.forEachChild(Ge,((e,t)=>{i.matches(new Ae(e,t))||(r=r.updateImmediateChild(e,nt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class yt{constructor(e){this.rangedFilter_=new gt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new Ae(t,n))||(n=nt.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=nt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=nt.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();let i;if(i=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),t)<=0:this.index_.compare(t,this.rangedFilter_.getEndPost())<=0,!i)break;r=r.updateImmediateChild(t.name,t.node),n++}}else{let e,n,i,s;if(r=t.withIndex(this.index_),r=r.updatePriority(nt.EMPTY_NODE),this.reverse_){s=r.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const t=this.index_.getCompare();i=(e,n)=>t(n,e)}else s=r.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),i=this.index_.getCompare();let o=0,a=!1;for(;s.hasNext();){const t=s.getNext();!a&&i(e,t)<=0&&(a=!0),a&&o<this.limit_&&i(t,n)<=0?o++:r=r.updateImmediateChild(t.name,nt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const a=e;(0,o.hu)(a.numChildren()===this.limit_,"");const l=new Ae(t,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const e=a.getImmediateChild(t);let o=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=o&&(o.name===t||a.hasChild(o.name));)o=r.getChildAfterChild(this.index_,o,this.reverse_);const h=null==o?1:s(o,l);if(u&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(pt(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(ft(t,e));const n=a.updateImmediateChild(t,nt.EMPTY_NODE);return null!=o&&this.rangedFilter_.matches(o)?(null!=i&&i.trackChildChange(dt(o.name,o.node)),n.updateImmediateChild(o.name,o.node)):n}}return n.isEmpty()?e:u&&s(c,l)>=0?(null!=i&&(i.trackChildChange(ft(c.name,c.node)),i.trackChildChange(dt(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(c.name,nt.EMPTY_NODE)):e}}class vt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ge}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:P}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:A}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ge}copy(){const e=new vt;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _t(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function wt(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function bt(e,t){const n=e.copy();return n.index_=t,n}function Tt(e){const t={};if(e.isDefault())return t;let n;return e.index_===Ge?n="$priority":e.index_===ot?n="$value":e.index_===Le?n="$key":((0,o.hu)(e.index_ instanceof st,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,o.Pz)(n),e.startSet_&&(t.startAt=(0,o.Pz)(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+(0,o.Pz)(e.indexStartName_))),e.endSet_&&(t.endAt=(0,o.Pz)(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+(0,o.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function It(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ge&&(t.i=e.index_.toString()),t}class Et extends le{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=k("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,o.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=Et.getListenId_(e,n),a={};this.listens_[s]=a;const l=Tt(e._queryParams);this.restRequest_(i+".json",l,((e,t)=>{let l=t;if(404===e&&(l=null,e=null),null===e&&this.onDataUpdate_(i,l,!1,n),(0,o.DV)(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Et.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Tt(e._queryParams),n=e._path.toString(),r=new o.BH;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,o.xO)(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=(0,o.cI)(a.responseText)}catch(e){x("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&x("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))}}class kt{constructor(){this.rootNode_=nt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function St(){return{value:null,children:new Map}}function Ct(e,t,n){if(we(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=fe(t);e.children.has(r)||e.children.set(r,St()),Ct(e.children.get(r),t=me(t),n)}}function xt(e,t){if(we(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(Ge,((t,n)=>{Ct(e,new he(t),n)})),xt(e,t)}}if(e.children.size>0){const n=fe(t);return t=me(t),e.children.has(n)&&xt(e.children.get(n),t)&&e.children.delete(n),0===e.children.size}return!0}function Nt(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Nt(r,new he(t.toString()+"/"+e),n)}))}class Pt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&F(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class At{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Pt(e);const n=1e4+2e4*Math.random();B(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;F(e,((e,r)=>{r>0&&(0,o.r3)(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),B(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Rt;function Ot(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Rt||(Rt={}));class Dt{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Rt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(we(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new he(e));return new Dt(de(),t,this.revert)}}return(0,o.hu)(fe(this.path)===e,"operationForChild called for unrelated child."),new Dt(me(this.path),this.affectedTree,this.revert)}}class Lt{constructor(e,t){this.source=e,this.path=t,this.type=Rt.LISTEN_COMPLETE}operationForChild(e){return we(this.path)?new Lt(this.source,de()):new Lt(this.source,me(this.path))}}class Mt{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Rt.OVERWRITE}operationForChild(e){return we(this.path)?new Mt(this.source,de(),this.snap.getImmediateChild(e)):new Mt(this.source,me(this.path),this.snap)}}class Ft{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Rt.MERGE}operationForChild(e){if(we(this.path)){const t=this.children.subtree(new he(e));return t.isEmpty()?null:t.value?new Mt(this.source,de(),t.value):new Ft(this.source,de(),t)}return(0,o.hu)(fe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ft(this.source,me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ut{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(we(e))return this.isFullyInitialized()&&!this.filtered_;const t=fe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Vt{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function qt(e,t,n,r,i,s){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,o.g5)("Should only compare child_ events.");const r=new Ae(t.childName,t.snapshotNode),i=new Ae(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function jt(e,t){return{eventCache:e,serverCache:t}}function Bt(e,t,n,r){return jt(new Ut(t,n,r),e.serverCache)}function zt(e,t,n,r){return jt(e.eventCache,new Ut(t,n,r))}function $t(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Wt(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Kt;class Ht{constructor(e,t=(()=>(Kt||(Kt=new Ue(O)),Kt))()){this.value=e,this.children=t}static fromObject(e){let t=new Ht(null);return F(e,((e,n)=>{t=t.set(new he(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:de(),value:this.value};if(we(e))return null;{const n=fe(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(me(e),t);return null!=i?{path:_e(new he(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(we(e))return this;{const t=fe(e),n=this.children.get(t);return null!==n?n.subtree(me(e)):new Ht(null)}}set(e,t){if(we(e))return new Ht(t,this.children);{const n=fe(e),r=(this.children.get(n)||new Ht(null)).set(me(e),t),i=this.children.insert(n,r);return new Ht(this.value,i)}}remove(e){if(we(e))return this.children.isEmpty()?new Ht(null):new Ht(null,this.children);{const t=fe(e),n=this.children.get(t);if(n){const r=n.remove(me(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Ht(null):new Ht(this.value,i)}return this}}get(e){if(we(e))return this.value;{const t=fe(e),n=this.children.get(t);return n?n.get(me(e)):null}}setTree(e,t){if(we(e))return t;{const n=fe(e),r=(this.children.get(n)||new Ht(null)).setTree(me(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Ht(this.value,i)}}fold(e){return this.fold_(de(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(_e(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,de(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(we(e))return null;{const r=fe(e),i=this.children.get(r);return i?i.findOnPath_(me(e),_e(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,de(),t)}foreachOnPath_(e,t,n){if(we(e))return this;{this.value&&n(t,this.value);const r=fe(e),i=this.children.get(r);return i?i.foreachOnPath_(me(e),_e(t,r),n):new Ht(null)}}foreach(e){this.foreach_(de(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(_e(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Gt{constructor(e){this.writeTree_=e}static empty(){return new Gt(new Ht(null))}}function Qt(e,t,n){if(we(t))return new Gt(new Ht(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=be(i,t);return s=s.updateChild(o,n),new Gt(e.writeTree_.set(i,s))}{const r=new Ht(n),i=e.writeTree_.setTree(t,r);return new Gt(i)}}}function Yt(e,t,n){let r=e;return F(n,((e,n)=>{r=Qt(r,_e(t,e),n)})),r}function Jt(e,t){if(we(t))return Gt.empty();{const n=e.writeTree_.setTree(t,new Ht(null));return new Gt(n)}}function Xt(e,t){return null!=Zt(e,t)}function Zt(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(be(n.path,t)):null}function en(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ge,((e,n)=>{t.push(new Ae(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Ae(e,n.value))})),t}function tn(e,t){if(we(t))return e;{const n=Zt(e,t);return new Gt(null!=n?new Ht(n):e.writeTree_.subtree(t))}}function nn(e){return e.writeTree_.isEmpty()}function rn(e,t){return sn(de(),e.writeTree_,t)}function sn(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=sn(_e(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(_e(e,".priority"),r)),n}}function on(e,t){return yn(t,e)}function an(e,t){if(e.snap)return Ee(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ee(_e(e.path,n),t))return!0;return!1}function ln(e){return e.visible}function cn(e,t,n){let r=Gt.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)Ee(n,e)?(t=be(n,e),r=Qt(r,t,s.snap)):Ee(e,n)&&(t=be(e,n),r=Qt(r,de(),s.snap.getChild(t)));else{if(!s.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(Ee(n,e))t=be(n,e),r=Yt(r,t,s.children);else if(Ee(e,n))if(t=be(e,n),we(t))r=Yt(r,de(),s.children);else{const e=(0,o.DV)(s.children,fe(t));if(e){const n=e.getChild(me(t));r=Qt(r,de(),n)}}}}}return r}function un(e,t,n,r,i){if(r||i){const s=tn(e.visibleWrites,t);if(!i&&nn(s))return n;if(i||null!=n||Xt(s,de())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ee(e.path,t)||Ee(t,e.path))};return rn(cn(e.allWrites,s,t),n||nt.EMPTY_NODE)}return null}{const r=Zt(e.visibleWrites,t);if(null!=r)return r;{const r=tn(e.visibleWrites,t);return nn(r)?n:null!=n||Xt(r,de())?rn(r,n||nt.EMPTY_NODE):null}}}function hn(e,t,n,r){return un(e.writeTree,e.treePath,t,n,r)}function dn(e,t){return function(e,t,n){let r=nt.EMPTY_NODE;const i=Zt(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ge,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=tn(e.visibleWrites,t);return n.forEachChild(Ge,((e,t)=>{const n=rn(tn(i,new he(e)),t);r=r.updateImmediateChild(e,n)})),en(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return en(tn(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function fn(e,t,n,r){return function(e,t,n,r,i){(0,o.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=_e(t,n);if(Xt(e.visibleWrites,s))return null;{const t=tn(e.visibleWrites,s);return nn(t)?i.getChild(n):rn(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function pn(e,t){return function(e,t){return Zt(e.visibleWrites,t)}(e.writeTree,_e(e.treePath,t))}function mn(e,t,n){return function(e,t,n,r){const i=_e(t,n),s=Zt(e.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?rn(tn(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function gn(e,t){return yn(_e(e.treePath,t),e.writeTree)}function yn(e,t){return{treePath:e,writeTree:t}}class vn{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,o.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,pt(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ft(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,dt(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,o.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,pt(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const _n=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class wn{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Ut(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mn(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wt(this.viewCache_),i=function(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=tn(e.visibleWrites,t),c=Zt(l,de());if(null!=c)a=c;else{if(null==n)return[];a=rn(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function bn(e,t,n,r,i,s){const a=t.eventCache;if(null!=pn(r,n))return t;{let l,c;if(we(n))if((0,o.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Wt(t),i=dn(r,n instanceof nt?n:nt.EMPTY_NODE);l=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=hn(r,Wt(t));l=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=fe(n);if(".priority"===u){(0,o.hu)(1===pe(n),"Can't have a priority with additional path components");const i=a.getNode();c=t.serverCache.getNode();const s=fn(r,n,i,c);l=null!=s?e.filter.updatePriority(i,s):a.getNode()}else{const o=me(n);let h;if(a.isCompleteForChild(u)){c=t.serverCache.getNode();const e=fn(r,n,a.getNode(),c);h=null!=e?a.getNode().getImmediateChild(u).updateChild(o,e):a.getNode().getImmediateChild(u)}else h=mn(r,u,t.serverCache);l=null!=h?e.filter.updateChild(a.getNode(),u,h,o,i,s):a.getNode()}}return Bt(t,l,a.isFullyInitialized()||we(n),e.filter.filtersNodes())}}function Tn(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(we(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=fe(n);if(!l.isCompleteForPath(n)&&pe(n)>1)return t;const i=me(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,_n,null)}const h=zt(t,c,l.isFullyInitialized()||we(n),u.filtersNodes());return bn(e,h,n,i,new wn(i,h,s),a)}function In(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new wn(i,t,s);if(we(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Bt(t,c,!0,e.filter.filtersNodes());else{const i=fe(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Bt(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=me(n),c=a.getNode().getImmediateChild(i);let h;if(we(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===ge(s)&&e.getChild(ve(s)).isEmpty()?e:e.updateChild(s,r):nt.EMPTY_NODE}l=c.equals(h)?t:Bt(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function En(e,t){return e.eventCache.isCompleteForChild(t)}function kn(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Sn(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=we(n)?r:new Ht(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=kn(0,t.serverCache.getNode().getImmediateChild(n),r);c=Tn(e,c,new he(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!u.hasChild(n)&&!l){const l=kn(0,t.serverCache.getNode().getImmediateChild(n),r);c=Tn(e,c,new he(n),l,i,s,o,a)}})),c}class Cn{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new mt(n.getIndex()),i=(s=n).loadsAllData()?new mt(s.getIndex()):s.hasLimit()?new yt(s):new gt(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(nt.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(nt.EMPTY_NODE,a.getNode(),null),u=new Ut(l,o.isFullyInitialized(),r.filtersNodes()),h=new Ut(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=jt(h,u),this.eventGenerator_=new Vt(this.query_)}get query(){return this.query_}}function xn(e,t){const n=Wt(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!we(t)&&!n.getImmediateChild(fe(t)).isEmpty())?n.getChild(t):null}function Nn(e){return 0===e.eventRegistrations_.length}function Pn(e,t,n){const r=[];if(n){(0,o.hu)(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function An(e,t,n,r){t.type===Rt.MERGE&&null!==t.source.queryId&&((0,o.hu)(Wt(e.viewCache_),"We should always have a full cache before handling merges"),(0,o.hu)($t(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=function(e,t,n,r,i){const s=new vn;let a,l;if(n.type===Rt.OVERWRITE){const c=n;c.source.fromUser?a=In(e,t,c.path,c.snap,r,i,s):((0,o.hu)(c.source.fromServer,"Unknown source."),l=c.source.tagged||t.serverCache.isFiltered()&&!we(c.path),a=Tn(e,t,c.path,c.snap,r,i,l,s))}else if(n.type===Rt.MERGE){const c=n;c.source.fromUser?a=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=_e(n,r);En(t,fe(c))&&(a=In(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=_e(n,r);En(t,fe(c))||(a=In(e,a,c,l,i,s,o))})),a}(e,t,c.path,c.children,r,i,s):((0,o.hu)(c.source.fromServer,"Unknown source."),l=c.source.tagged||t.serverCache.isFiltered(),a=Sn(e,t,c.path,c.children,r,i,l,s))}else if(n.type===Rt.ACK_USER_WRITE){const l=n;a=l.revert?function(e,t,n,r,i,s){let a;if(null!=pn(r,n))return t;{const l=new wn(r,t,i),c=t.eventCache.getNode();let u;if(we(n)||".priority"===fe(n)){let n;if(t.serverCache.isFullyInitialized())n=hn(r,Wt(t));else{const e=t.serverCache.getNode();(0,o.hu)(e instanceof nt,"serverChildren would be complete if leaf node"),n=dn(r,e)}n=n,u=e.filter.updateFullNode(c,n,s)}else{const i=fe(n);let o=mn(r,i,t.serverCache);null==o&&t.serverCache.isCompleteForChild(i)&&(o=c.getImmediateChild(i)),u=null!=o?e.filter.updateChild(c,i,o,me(n),l,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,nt.EMPTY_NODE,me(n),l,s):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=hn(r,Wt(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=pn(r,de()),Bt(t,u,a,e.filter.filtersNodes())}}(e,t,l.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=pn(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(we(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Tn(e,t,n,l.getNode().getChild(n),i,s,a,o);if(we(n)){let r=new Ht(null);return l.getNode().forEachChild(Le,((e,t)=>{r=r.set(new he(e),t)})),Sn(e,t,n,r,i,s,a,o)}return t}{let c=new Ht(null);return r.foreach(((e,t)=>{const r=_e(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),Sn(e,t,n,c,i,s,a,o)}}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Rt.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const s=t.serverCache;return bn(e,zt(t,s.getNode(),s.isFullyInitialized()||we(n),s.isFiltered()),n,r,_n,i)}(e,t,n.path,r,s)}const c=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=$t(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ht($t(t)))}}(t,a,c),{viewCache:a,changes:c}}(e.processor_,i,t,n,r);var a,l;return a=e.processor_,l=s.viewCache,(0,o.hu)(l.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,o.hu)(l.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),(0,o.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Rn(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Rn(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),qt(e,i,"child_removed",t,r,n),qt(e,i,"child_added",t,r,n),qt(e,i,"child_moved",s,r,n),qt(e,i,"child_changed",t,r,n),qt(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let On,Dn;class Ln{constructor(){this.views=new Map}}function Mn(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return(0,o.hu)(null!=s,"SyncTree gave us an op for an invalid query."),An(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(An(s,t,n,r));return i}}function Fn(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=hn(n,i?r:null),s=!1;e?s=!0:r instanceof nt?(e=dn(n,r),s=!1):(e=nt.EMPTY_NODE,s=!1);const o=jt(new Ut(e,s,!1),new Ut(r,i,!1));return new Cn(t,o)}return o}function Un(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Vn(e,t){let n=null;for(const r of e.views.values())n=n||xn(r,t);return n}function qn(e,t){if(t._queryParams.loadsAllData())return zn(e);{const n=t._queryIdentifier;return e.views.get(n)}}function jn(e,t){return null!=qn(e,t)}function Bn(e){return null!=zn(e)}function zn(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let $n=1;class Wn{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ht(null),this.pendingWriteTree_={visibleWrites:Gt.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Kn(e,t,n,r,i){return function(e,t,n,r,i){(0,o.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Qt(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Xn(e,new Mt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Hn(e,t,n=!1){const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&an(t,r.path)?i=!1:Ee(r.path,t.path)&&(s=!0)),a--}return!!i&&(s?(function(e){e.visibleWrites=cn(e.allWrites,ln,de()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(r.snap?e.visibleWrites=Jt(e.visibleWrites,r.path):F(r.children,(t=>{e.visibleWrites=Jt(e.visibleWrites,_e(r.path,t))})),!0))}(e.pendingWriteTree_,t)){let t=new Ht(null);return null!=r.snap?t=t.set(de(),!0):F(r.children,(e=>{t=t.set(new he(e),!0)})),Xn(e,new Dt(r.path,t,n))}return[]}function Gn(e,t,n){return Xn(e,new Mt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Qn(e,t,n,r){const i=t._path,s=e.syncPointTree_.get(i);let a=[];if(s&&("default"===t._queryIdentifier||jn(s,t))){const l=function(e,t,n,r){const i=t._queryIdentifier,s=[];let a=[];const l=Bn(e);if("default"===i)for(const[t,i]of e.views.entries())a=a.concat(Pn(i,n,r)),Nn(i)&&(e.views.delete(t),i.query._queryParams.loadsAllData()||s.push(i.query));else{const t=e.views.get(i);t&&(a=a.concat(Pn(t,n,r)),Nn(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return l&&!Bn(e)&&s.push(new((0,o.hu)(On,"Reference.ts has not been loaded"),On)(t._repo,t._path)),{removed:s,events:a}}(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));const c=l.removed;a=l.events;const u=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),h=e.syncPointTree_.findOnPath(i,((e,t)=>Bn(t)));if(u&&!h){const t=e.syncPointTree_.subtree(i);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Bn(t))return[zn(t)];{let e=[];return t&&(e=Un(t)),F(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=tr(e,r);e.listenProvider_.startListening(ar(i),nr(e,i),s.hashFn,s.onComplete)}}}if(!h&&c.length>0&&!r)if(u){const n=null;e.listenProvider_.stopListening(ar(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(rr(t));e.listenProvider_.stopListening(ar(t),n)}));!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=rr(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function Yn(e,t,n){const r=t._path;let i=null,s=!1;e.syncPointTree_.foreachOnPath(r,((e,t)=>{const n=be(e,r);i=i||Vn(t,n),s=s||Bn(t)}));let a,l=e.syncPointTree_.get(r);l?(s=s||Bn(l),i=i||Vn(l,de())):(l=new Ln,e.syncPointTree_=e.syncPointTree_.set(r,l)),null!=i?a=!0:(a=!1,i=nt.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild(((e,t)=>{const n=Vn(t,de());n&&(i=i.updateImmediateChild(e,n))})));const c=jn(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=rr(t);(0,o.hu)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=$n++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=function(e,t,n,r,i,s){const o=Fn(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ge,((e,t)=>{r.push(dt(e,t))})),n.isFullyInitialized()&&r.push(ht(n.getNode())),Rn(e,r,n.getNode(),t)}(o,n)}(l,t,n,on(e.pendingWriteTree_,r),i,a);if(!c&&!s){const n=qn(l,t);u=u.concat(function(e,t,n){const r=t._path,i=nr(e,t),s=tr(e,n),a=e.listenProvider_.startListening(ar(t),i,s.hashFn,s.onComplete),l=e.syncPointTree_.subtree(r);if(i)(0,o.hu)(!Bn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const t=l.fold(((e,t,n)=>{if(!we(e)&&t&&Bn(t))return[zn(t).query];{let e=[];return t&&(e=e.concat(Un(t).map((e=>e.query)))),F(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(ar(r),nr(e,r))}}return a}(e,t,n))}return u}function Jn(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Vn(n,be(e,t));if(r)return r}));return un(r,t,i,n,!0)}function Xn(e,t){return Zn(t,e.syncPointTree_,null,on(e.pendingWriteTree_,de()))}function Zn(e,t,n,r){if(we(e.path))return er(e,t,n,r);{const i=t.get(de());null==n&&null!=i&&(n=Vn(i,de()));let s=[];const o=fe(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=gn(r,o);s=s.concat(Zn(a,l,e,t))}return i&&(s=s.concat(Mn(i,e,r,n))),s}}function er(e,t,n,r){const i=t.get(de());null==n&&null!=i&&(n=Vn(i,de()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=gn(r,t),l=e.operationForChild(t);l&&(s=s.concat(er(l,i,o,a)))})),i&&(s=s.concat(Mn(i,e,r,n))),s}function tr(e,t){const n=t.query,r=nr(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||nt.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=ir(e,n);if(r){const n=sr(r),i=n.path,s=n.queryId,o=be(i,t);return or(e,i,new Lt(Ot(s),o))}return[]}(e,n._path,r):function(e,t){return Xn(e,new Lt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Qn(e,n,null,r)}}}}function nr(e,t){const n=rr(t);return e.queryToTagMap.get(n)}function rr(e){return e._path.toString()+"$"+e._queryIdentifier}function ir(e,t){return e.tagToQueryMap.get(t)}function sr(e){const t=e.indexOf("$");return(0,o.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new he(e.substr(0,t))}}function or(e,t,n){const r=e.syncPointTree_.get(t);return(0,o.hu)(r,"Missing sync point for query tag that we're tracking"),Mn(r,n,on(e.pendingWriteTree_,t),null)}function ar(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,o.hu)(Dn,"Reference.ts has not been loaded"),Dn)(e._repo,e._path):e}class lr{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new lr(t)}node(){return this.node_}}class cr{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_e(this.path_,e);return new cr(this.syncTree_,t)}node(){return Jn(this.syncTree_,this.path_)}}const ur=function(e,t,n){return e&&"object"==typeof e?((0,o.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?hr(e[".sv"],t,n):"object"==typeof e[".sv"]?dr(e[".sv"],t):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},hr=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,o.hu)(!1,"Unexpected server value: "+e)},dr=function(e,t,n){e.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},fr=function(e,t,n,r){return mr(t,new cr(n,e),r)},pr=function(e,t,n){return mr(e,new lr(t),n)};function mr(e,t,n){const r=e.getPriority().val(),i=ur(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=ur(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new He(s,it(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new He(i))),r.forEachChild(Ge,((e,r)=>{const i=mr(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class gr{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function yr(e,t){let n=t instanceof he?t:new he(t),r=e,i=fe(n);for(;null!==i;){const e=(0,o.DV)(r.node.children,i)||{children:{},childCount:0};r=new gr(i,r,e),n=me(n),i=fe(n)}return r}function vr(e){return e.node.value}function _r(e,t){e.node.value=t,Er(e)}function wr(e){return e.node.childCount>0}function br(e,t){F(e.node.children,((n,r)=>{t(new gr(n,e,r))}))}function Tr(e,t,n,r){n&&!r&&t(e),br(e,(e=>{Tr(e,t,!0,r)})),n&&r&&t(e)}function Ir(e){return new he(null===e.parent?e.name:Ir(e.parent)+"/"+e.name)}function Er(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===vr(e)&&!wr(e)}(n),i=(0,o.r3)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Er(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Er(e))}(e.parent,e.name,e)}const kr=/[\[\].#$\/\u0000-\u001F\u007F]/,Sr=/[\[\].#$\u0000-\u001F\u007F]/,Cr=10485760,xr=function(e){return"string"==typeof e&&0!==e.length&&!kr.test(e)},Nr=function(e){return"string"==typeof e&&0!==e.length&&!Sr.test(e)},Pr=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!N(e)||e&&"object"==typeof e&&(0,o.r3)(e,".sv")},Ar=function(e,t,n,r){r&&void 0===t||Rr((0,o.gK)(e,"value"),t,n)},Rr=function(e,t,n){const r=n instanceof he?new ke(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Ce(r));if("function"==typeof t)throw new Error(e+"contains a function "+Ce(r)+" with contents = "+t.toString());if(N(t))throw new Error(e+"contains "+t.toString()+" "+Ce(r));if("string"==typeof t&&t.length>Cr/3&&(0,o.ug)(t)>Cr)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+Ce(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(F(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!xr(t)))throw new Error(e+" contains an invalid key ("+t+") "+Ce(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,o.ug)(t),Se(e)}(r,t),Rr(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=(0,o.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Ce(r)+" in addition to actual children.")}},Or=function(e,t,n,r){if(r&&void 0===t)return;const i=(0,o.gK)(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];F(t,((e,t)=>{const r=new he(e);if(Rr(i,t,_e(n,r)),".priority"===ge(r)&&!Pr(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=ye(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!xr(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Te);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Ee(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Dr=function(e,t,n){if(!n||void 0!==t){if(N(t))throw new Error((0,o.gK)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pr(t))throw new Error((0,o.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lr=function(e,t,n,r){if(!(r&&void 0===n||xr(n)))throw new Error((0,o.gK)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Mr=function(e,t,n,r){if(!(r&&void 0===n||Nr(n)))throw new Error((0,o.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Fr=function(e,t){if(".info"===fe(t))throw new Error(e+" failed = Can't modify data under /.info/")},Ur=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!xr(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Nr(e)}(n))throw new Error((0,o.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Vr{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qr(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||Ie(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function jr(e,t,n){qr(e,n),zr(e,(e=>Ie(e,t)))}function Br(e,t,n){qr(e,n),zr(e,(e=>Ee(e,t)||Ee(t,e)))}function zr(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?($r(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function $r(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();b&&E("event: "+n.toString()),j(r)}}}const Wr="repo_interrupt";class Kr{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=St(),this.transactionQueueTree_=new gr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Hr(e,t,n){if(e.stats_=ee(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Et(e.repoInfo_,((t,n,r,i)=>{Yr(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Jr(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new Pe(e.repoInfo_,t,((t,n,r,i)=>{Yr(e,t,n,r,i)}),(t=>{Jr(e,t)}),(t=>{!function(e,t){F(t,((t,n)=>{Xr(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t,n){const r=t.toString();return Z[r]||(Z[r]=new At(e.stats_,e.server_)),Z[r]}(e.repoInfo_),e.infoData_=new kt,e.infoSyncTree_=new Wn({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Gn(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),Xr(e,"connected",!1),e.serverSyncTree_=new Wn({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);Br(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Gr(e){const t=e.infoData_.getNode(new he(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Qr(e){return(t=(t={timestamp:Gr(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Yr(e,t,n,r,i){e.dataUpdateCount++;const s=new he(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=(0,o.UI)(n,(e=>it(e)));a=function(e,t,n,r){const i=ir(e,r);if(i){const r=sr(i),s=r.path,o=r.queryId,a=be(s,t),l=Ht.fromObject(n);return or(e,s,new Ft(Ot(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=it(n);a=function(e,t,n,r){const i=ir(e,r);if(null!=i){const r=sr(i),s=r.path,o=r.queryId,a=be(s,t);return or(e,s,new Mt(Ot(o),a,n))}return[]}(e.serverSyncTree_,s,t,i)}else if(r){const t=(0,o.UI)(n,(e=>it(e)));a=function(e,t,n){const r=Ht.fromObject(n);return Xn(e,new Ft({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=it(n);a=Gn(e.serverSyncTree_,s,t)}let l=s;a.length>0&&(l=ci(e,s)),Br(e.eventQueue_,l,a)}function Jr(e,t){Xr(e,"connected",t),!1===t&&function(e){si(e,"onDisconnectEvents");const t=Qr(e),n=St();Nt(e.onDisconnect_,de(),((r,i)=>{const s=fr(r,i,e.serverSyncTree_,t);Ct(n,r,s)}));let r=[];Nt(n,de(),((t,n)=>{r=r.concat(Gn(e.serverSyncTree_,t,n));const i=pi(e,t);ci(e,i)})),e.onDisconnect_=St(),Br(e.eventQueue_,de(),r)}(e)}function Xr(e,t,n){const r=new he("/.info/"+t),i=it(n);e.infoData_.updateSnapshot(r,i);const s=Gn(e.infoSyncTree_,r,i);Br(e.eventQueue_,r,s)}function Zr(e){return e.nextWriteId_++}function ei(e,t,n,r,i){si(e,"set",{path:t.toString(),value:n,priority:r});const s=Qr(e),o=it(n,r),a=Jn(e.serverSyncTree_,t),l=pr(o,a,s),c=Zr(e),u=Kn(e.serverSyncTree_,t,l,c,!0);qr(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||x("set at "+t+" failed: "+n);const o=Hn(e.serverSyncTree_,c,!s);Br(e.eventQueue_,t,o),oi(0,i,n,r)}));const h=pi(e,t);ci(e,h),Br(e.eventQueue_,h,[])}function ti(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&xt(e.onDisconnect_,t),oi(0,n,r,i)}))}function ni(e,t,n,r){const i=it(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&Ct(e.onDisconnect_,t,i),oi(0,r,n,s)}))}function ri(e,t,n){let r;r=".info"===fe(t._path)?Qn(e.infoSyncTree_,t,n):Qn(e.serverSyncTree_,t,n),jr(e.eventQueue_,t._path,r)}function ii(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Wr)}function si(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),E(n,...t)}function oi(e,t,n,r){t&&j((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function ai(e,t,n){return Jn(e.serverSyncTree_,t,n)||nt.EMPTY_NODE}function li(e,t=e.transactionQueueTree_){if(t||fi(e,t),vr(t)){const n=hi(e,t);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=ai(e,t,r);let s=i;const a=i.hash();for(let e=0;e<n.length;e++){const r=n[e];(0,o.hu)(0===r.status,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=1,r.retryCount++;const i=be(t,r.path);s=s.updateChild(i,r.currentOutputSnapshotRaw)}const l=s.val(!0),c=t;e.server_.put(c.toString(),l,(r=>{si(e,"transaction put response",{path:c.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Hn(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();fi(e,yr(e.transactionQueueTree_,t)),li(e,e.transactionQueueTree_),Br(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)j(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{x("transaction at "+c.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}ci(e,t)}}),a)}(e,Ir(t),n)}else wr(t)&&br(t,(t=>{li(e,t)}))}function ci(e,t){const n=ui(e,t),r=Ir(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)).map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const c=t[l],u=be(n,c.path);let h,d=!1;if((0,o.hu)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)d=!0,h=c.abortReason,i=i.concat(Hn(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)d=!0,h="maxretry",i=i.concat(Hn(e.serverSyncTree_,c.currentWriteId,!0));else{const n=ai(e,c.path,s);c.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){Rr("transaction failed: Data returned ",r,c.path);let t=it(r);"object"==typeof r&&null!=r&&(0,o.r3)(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=c.currentWriteId,l=Qr(e),u=pr(t,n,l);c.currentOutputSnapshotRaw=t,c.currentOutputSnapshotResolved=u,c.currentWriteId=Zr(e),s.splice(s.indexOf(a),1),i=i.concat(Kn(e.serverSyncTree_,c.path,u,c.currentWriteId,c.applyLocally)),i=i.concat(Hn(e.serverSyncTree_,a,!0))}else d=!0,h="nodata",i=i.concat(Hn(e.serverSyncTree_,c.currentWriteId,!0))}Br(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===h?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(h),!1,null)))))}var a;fi(e,e.transactionQueueTree_);for(let e=0;e<r.length;e++)j(r[e]);li(e,e.transactionQueueTree_)}(e,hi(e,n),r),r}function ui(e,t){let n,r=e.transactionQueueTree_;for(n=fe(t);null!==n&&void 0===vr(r);)r=yr(r,n),n=fe(t=me(t));return r}function hi(e,t){const n=[];return di(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function di(e,t,n){const r=vr(t);if(r)for(let e=0;e<r.length;e++)n.push(r[e]);br(t,(t=>{di(e,t,n)}))}function fi(e,t){const n=vr(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,_r(t,n.length>0?n:void 0)}br(t,(t=>{fi(e,t)}))}function pi(e,t){const n=Ir(ui(e,t)),r=yr(e.transactionQueueTree_,t);return function(e,t,n){let r=e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{mi(e,t)})),mi(e,r),Tr(r,(t=>{mi(e,t)})),n}function mi(e,t){const n=vr(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,o.hu)(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):((0,o.hu)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Hn(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?_r(t,void 0):n.length=s+1,Br(e.eventQueue_,Ir(t),i);for(let e=0;e<r.length;e++)j(r[e])}}const gi=function(e,t){const n=yi(e),r=n.namespace;"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&x("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Q(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new he(n.pathString)}},yi=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let r=n[e];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(e){}t+="/"+r}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):x(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class vi{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())}}class _i{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class wi{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,o.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class bi{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new o.BH;return ti(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){Fr("OnDisconnect.remove",this._path);const e=new o.BH;return ni(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){Fr("OnDisconnect.set",this._path),Ar("OnDisconnect.set",e,this._path,!1);const t=new o.BH;return ni(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){Fr("OnDisconnect.setWithPriority",this._path),Ar("OnDisconnect.setWithPriority",e,this._path,!1),Dr("OnDisconnect.setWithPriority",t,!1);const n=new o.BH;return function(e,t,n,r,i){const s=it(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&Ct(e.onDisconnect_,t,s),oi(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){Fr("OnDisconnect.update",this._path),Or("OnDisconnect.update",e,this._path,!1);const t=new o.BH;return function(e,t,n,r){if((0,o.xb)(n))return E("onDisconnect().update() called with empty data.  Don't do anything."),void oi(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&F(n,((n,r)=>{const i=it(r);Ct(e.onDisconnect_,_e(t,n),i)})),oi(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class Ti{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return we(this._path)?null:ge(this._path)}get ref(){return new Si(this._repo,this._path)}get _queryIdentifier(){const e=It(this._queryParams),t=L(e);return"{}"===t?"default":t}get _queryObject(){return It(this._queryParams)}isEqual(e){if(!((e=(0,o.m9)(e))instanceof Ti))return!1;const t=this._repo===e._repo,n=Ie(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function Ii(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Ei(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Le){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==P)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==A)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Ge){if(null!=t&&!Pr(t)||null!=n&&!Pr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(e.getIndex()instanceof st||e.getIndex()===ot,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ki(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Si extends Ti{constructor(e,t){super(e,t,new vt,!1)}get parent(){const e=ve(this._path);return null===e?null:new Si(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ci{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new he(e),n=Pi(this.ref,e);return new Ci(this._node.getChild(t),n,Ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((t,n)=>e(new Ci(n,Pi(this.ref,t),Ge))))}hasChild(e){const t=new he(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xi(e,t){return(e=(0,o.m9)(e))._checkNotDeleted("ref"),void 0!==t?Pi(e._root,t):e._root}function Ni(e,t){(e=(0,o.m9)(e))._checkNotDeleted("refFromURL");const n=gi(t,e._repo.repoInfo_.nodeAdmin);Ur("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),xi(e,n.path.toString())}function Pi(e,t){var n;return null===fe((e=(0,o.m9)(e))._path)?("child","path",!1,(n=t)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Mr("child","path",n,false)):Mr("child","path",t,!1),new Si(e._repo,_e(e._path,t))}function Ai(e,t){e=(0,o.m9)(e),Fr("set",e._path),Ar("set",t,e._path,!1);const n=new o.BH;return ei(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Ri(e,t){Or("update",t,e._path,!1);const n=new o.BH;return function(e,t,n,r){si(e,"update",{path:t.toString(),value:n});let i=!0;const s=Qr(e),a={};if(F(n,((n,r)=>{i=!1,a[n]=fr(_e(t,n),it(r),e.serverSyncTree_,s)})),i)E("update() called with empty data.  Don't do anything."),oi(0,r,"ok",void 0);else{const i=Zr(e),s=function(e,t,n,r){!function(e,t,n,r){(0,o.hu)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Yt(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Ht.fromObject(n);return Xn(e,new Ft({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,t,a,i);qr(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||x("update at "+t+" failed: "+n);const a=Hn(e.serverSyncTree_,i,!o),l=a.length>0?ci(e,t):t;Br(e.eventQueue_,l,a),oi(0,r,n,s)})),F(n,(n=>{const r=pi(e,_e(t,n));ci(e,r)})),Br(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function Oi(e){return function(e,t){const n=function(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=be(e,n);r=r||Vn(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||Vn(i,de()):(i=new Ln,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Ut(r,!0,!1):null;return $t(Fn(i,t,on(e.pendingWriteTree_,t._path),s?o.getNode():nt.EMPTY_NODE,s).viewCache_)}(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((n=>{const r=it(n).withIndex(t._queryParams.getIndex()),i=Gn(e.serverSyncTree_,t._path,r);return jr(e.eventQueue_,t._path,i),Promise.resolve(r)}),(n=>(si(e,"get for query "+(0,o.Pz)(t)+" failed: "+n),Promise.reject(new Error(n)))))}((e=(0,o.m9)(e))._repo,e).then((t=>new Ci(t,new Si(e._repo,e._path),e._queryParams.getIndex())))}class Di{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new vi("value",this,new Ci(e.snapshotNode,new Si(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new _i(this,e,t):null}matches(e){return e instanceof Di&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Li{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new _i(this,e,t):null}createEvent(e,t){(0,o.hu)(null!=e.childName,"Child events should have a childName.");const n=Pi(new Si(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new vi(e.type,this,new Ci(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Li&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Mi(e,t,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{ri(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new wi(n,s||void 0),a="value"===t?new Di(o):new Li(t,o);return function(e,t,n){let r;r=".info"===fe(t._path)?Yn(e.infoSyncTree_,t,n):Yn(e.serverSyncTree_,t,n),jr(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>ri(e._repo,e,a)}function Fi(e,t,n,r){return Mi(e,"value",t,n,r)}function Ui(e,t,n,r){return Mi(e,"child_added",t,n,r)}function Vi(e,t,n,r){return Mi(e,"child_changed",t,n,r)}function qi(e,t,n,r){return Mi(e,"child_moved",t,n,r)}function ji(e,t,n,r){return Mi(e,"child_removed",t,n,r)}function Bi(e,t,n){let r=null;const i=n?new wi(n):null;"value"===t?r=new Di(i):t&&(r=new Li(t,i)),ri(e._repo,e,r)}class zi{}class $i extends zi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ar("endAt",this._value,e._path,!0);const t=wt(e._queryParams,this._value,this._key);if(ki(t),Ei(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(e._repo,e._path,t,e._orderByCalled)}}class Wi extends zi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ar("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r,i;return e.index_===Le?("string"==typeof t&&(t=ut(t)),i=wt(e,t,n)):(r=null==n?P:ut(n),i=wt(e,t,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(ki(t),Ei(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(e._repo,e._path,t,e._orderByCalled)}}class Ki extends zi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ar("startAt",this._value,e._path,!0);const t=_t(e._queryParams,this._value,this._key);if(ki(t),Ei(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ti(e._repo,e._path,t,e._orderByCalled)}}class Hi extends zi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ar("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;if(e.index_===Le)"string"==typeof t&&(t=ct(t)),r=_t(e,t,n);else{let i;i=null==n?A:ct(n),r=_t(e,t,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ki(t),Ei(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ti(e._repo,e._path,t,e._orderByCalled)}}class Gi extends zi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class Qi extends zi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class Yi extends zi{constructor(e){super(),this._path=e}_apply(e){Ii(e,"orderByChild");const t=new he(this._path);if(we(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new st(t),r=bt(e._queryParams,n);return Ei(r),new Ti(e._repo,e._path,r,!0)}}class Ji extends zi{_apply(e){Ii(e,"orderByKey");const t=bt(e._queryParams,Le);return Ei(t),new Ti(e._repo,e._path,t,!0)}}class Xi extends zi{_apply(e){Ii(e,"orderByPriority");const t=bt(e._queryParams,Ge);return Ei(t),new Ti(e._repo,e._path,t,!0)}}class Zi extends zi{_apply(e){Ii(e,"orderByValue");const t=bt(e._queryParams,ot);return Ei(t),new Ti(e._repo,e._path,t,!0)}}class es extends zi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ar("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new $i(this._value,this._key)._apply(new Ki(this._value,this._key)._apply(e))}}function ts(e,...t){let n=(0,o.m9)(e);for(const e of t)n=e._apply(n);return n}!function(e){(0,o.hu)(!On,"__referenceConstructor has already been defined"),On=e}(Si),function(e){(0,o.hu)(!Dn,"__referenceConstructor has already been defined"),Dn=e}(Si);const ns={};function rs(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),E("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=gi(s,i),c=l.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=gi(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new W(W.OWNER):new $(e.name,e.options,t);Ur("Invalid Firebase Database URL",l),we(l.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=ns[t.name];i||(i={},ns[t.name]=i);let s=i[e.toURLString()];return s&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Kr(e,false,n,r),i[e.toURLString()]=s,s}(c,e,u,new z(e.name,n));return new is(h,e)}class is{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Hr(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Si(this._repo,de())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=ns[t];n&&n[e.key]===e||C(`Database ${t}(${e.repoInfo_}) has already been deleted.`),ii(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&C("Cannot call "+e+" on a deleted database.")}}class ss{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function os(e,t,n){var r;if(e=(0,o.m9)(e),Fr("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.BH,a=Fi(e,(()=>{}));return function(t,n,r,i,a,l){si(t,"transaction on "+n);const c={path:n,update:r,onComplete:(t,n,r)=>{let i=null;t?s.reject(t):(i=new Ci(r,new Si(e._repo,e._path),Ge),s.resolve(new ss(n,i)))},status:null,order:v(),applyLocally:l,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=ai(t,n,void 0);c.currentInputSnapshot=u;const h=c.update(u.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Rr("transaction failed: Data returned ",h,c.path),c.status=0;const e=yr(t.transactionQueueTree_,n),r=vr(e)||[];let i;r.push(c),_r(e,r),"object"==typeof h&&null!==h&&(0,o.r3)(h,".priority")?(i=(0,o.DV)(h,".priority"),(0,o.hu)(Pr(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(Jn(t.serverSyncTree_,n)||nt.EMPTY_NODE).getPriority().val();const s=Qr(t),a=it(h,i),l=pr(a,u,s);c.currentOutputSnapshotRaw=a,c.currentOutputSnapshotResolved=l,c.currentWriteId=Zr(t);const d=Kn(t.serverSyncTree_,n,l,c.currentWriteId,c.applyLocally);Br(t.eventQueue_,n,d),li(t,t.transactionQueueTree_)}}(e._repo,e._path,t,0,a,i),s.promise}Pe.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Pe.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},h(s.SDK_VERSION),(0,s._registerComponent)(new i.wA("database",((e,{instanceIdentifier:t})=>rs(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),(0,s.registerVersion)(l,c,undefined),(0,s.registerVersion)(l,c,"esm2017");const as=new a.Yd("@firebase/database-compat"),ls=function(e){const t="FIREBASE WARNING: "+e;as.warn(t)};class cs{constructor(e){this._delegate=e}cancel(e){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,o.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),(0,o.Wj)("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,ls("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.Wj)("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class us{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class hs{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Mr("DataSnapshot.child","path",e,!1),new hs(this._database,this._delegate.child(e))}hasChild(e){return(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Mr("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new hs(this._database,t))))}hasChildren(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),new fs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ds{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;(0,o.Dv)("Query.on",2,4,arguments.length),(0,o.Wj)("Query.on","callback",t,!1);const s=ds.getCancelAndContextArgs_("Query.on",n,r),a=(e,n)=>{t.call(s.context,new hs(this.database,e),n)};a.userCallback=t,a.context=s.context;const l=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return Fi(this._delegate,a,l),t;case"child_added":return Ui(this._delegate,a,l),t;case"child_removed":return ji(this._delegate,a,l),t;case"child_changed":return Vi(this._delegate,a,l),t;case"child_moved":return qi(this._delegate,a,l),t;default:throw new Error((0,o.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if((0,o.Dv)("Query.off",0,3,arguments.length),function(e,t,n){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,o.Wj)("Query.off","callback",t,!0),(0,o.lb)("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,Bi(this._delegate,e,r)}else Bi(this._delegate,e)}get(){return Oi(this._delegate).then((e=>new hs(this.database,e)))}once(e,t,n,r){(0,o.Dv)("Query.once",1,4,arguments.length),(0,o.Wj)("Query.once","callback",t,!0);const i=ds.getCancelAndContextArgs_("Query.once",n,r),s=new o.BH,a=(e,n)=>{const r=new hs(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};a.userCallback=t,a.context=i.context;const l=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":Fi(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Ui(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":ji(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Vi(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":qi(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,o.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return(0,o.Dv)("Query.limitToFirst",1,1,arguments.length),new ds(this.database,ts(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Gi(e)}(e)))}limitToLast(e){return(0,o.Dv)("Query.limitToLast",1,1,arguments.length),new ds(this.database,ts(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Qi(e)}(e)))}orderByChild(e){return(0,o.Dv)("Query.orderByChild",1,1,arguments.length),new ds(this.database,ts(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Mr("orderByChild","path",e,!1),new Yi(e)}(e)))}orderByKey(){return(0,o.Dv)("Query.orderByKey",0,0,arguments.length),new ds(this.database,ts(this._delegate,new Ji))}orderByPriority(){return(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),new ds(this.database,ts(this._delegate,new Xi))}orderByValue(){return(0,o.Dv)("Query.orderByValue",0,0,arguments.length),new ds(this.database,ts(this._delegate,new Zi))}startAt(e=null,t){return(0,o.Dv)("Query.startAt",0,2,arguments.length),new ds(this.database,ts(this._delegate,function(e=null,t){return Lr("startAt","key",t,!0),new Ki(e,t)}(e,t)))}startAfter(e=null,t){return(0,o.Dv)("Query.startAfter",0,2,arguments.length),new ds(this.database,ts(this._delegate,function(e,t){return Lr("startAfter","key",t,!0),new Hi(e,t)}(e,t)))}endAt(e=null,t){return(0,o.Dv)("Query.endAt",0,2,arguments.length),new ds(this.database,ts(this._delegate,function(e,t){return Lr("endAt","key",t,!0),new $i(e,t)}(e,t)))}endBefore(e=null,t){return(0,o.Dv)("Query.endBefore",0,2,arguments.length),new ds(this.database,ts(this._delegate,function(e,t){return Lr("endBefore","key",t,!0),new Wi(e,t)}(e,t)))}equalTo(e,t){return(0,o.Dv)("Query.equalTo",1,2,arguments.length),new ds(this.database,ts(this._delegate,function(e,t){return Lr("equalTo","key",t,!0),new es(e,t)}(e,t)))}toString(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ds))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,o.Wj)(e,"cancel",r.cancel,!0),r.context=n,(0,o.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,o.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new fs(this.database,new Si(this._delegate._repo,this._delegate._path))}}class fs extends ds{constructor(e,t){super(e,new Ti(t._repo,t._path,new vt,!1)),this.database=e,this._delegate=t}getKey(){return(0,o.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new fs(this.database,Pi(this._delegate,e))}getParent(){(0,o.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new fs(this.database,e):null}getRoot(){return(0,o.Dv)("Reference.root",0,0,arguments.length),new fs(this.database,this._delegate.root)}set(e,t){(0,o.Dv)("Reference.set",1,2,arguments.length),(0,o.Wj)("Reference.set","onComplete",t,!0);const n=Ai(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if((0,o.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,ls("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fr("Reference.update",this._delegate._path),(0,o.Wj)("Reference.update","onComplete",t,!0);const n=Ri(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){(0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,o.Wj)("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(Fr("setWithPriority",e._path),Ar("setWithPriority",t,e._path,!1),Dr("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new o.BH;return ei(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){(0,o.Dv)("Reference.remove",0,1,arguments.length),(0,o.Wj)("Reference.remove","onComplete",e,!0);const t=function(e){return Fr("remove",e._path),Ai(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){(0,o.Dv)("Reference.transaction",1,3,arguments.length),(0,o.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,o.Wj)("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,o.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n);const r=os(this._delegate,e,{applyLocally:n}).then((e=>new us(e.committed,new hs(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),(0,o.Wj)("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=(0,o.m9)(e),Fr("setPriority",e._path),Dr("setPriority",t,!1);const n=new o.BH;return ei(e._repo,_e(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){(0,o.Dv)("Reference.push",0,2,arguments.length),(0,o.Wj)("Reference.push","onComplete",t,!0);const n=function(e,t){e=(0,o.m9)(e),Fr("push",e._path),Ar("push",t,e._path,!0);const n=Gr(e._repo),r=lt(n),i=Pi(e,r),s=Pi(e,r);let a;return a=null!=t?Ai(s,t).then((()=>s)):Promise.resolve(s),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}(this._delegate,e),r=n.then((e=>new fs(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new fs(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return Fr("Reference.onDisconnect",this._delegate._path),new cs(new bi(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ps{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,n={}){!function(e,t,n,r={}){(e=(0,o.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&C('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new W(W.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:(0,o.Sg)(r.mockUserToken,e.app.options.projectId);s=new W(t)}!function(e,t,n,r){e.repoInfo_=new Q(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(this._delegate,e,t,n)}ref(e){if((0,o.Dv)("database.ref",0,1,arguments.length),e instanceof fs){const t=Ni(this._delegate,e.toString());return new fs(this,t)}{const t=xi(this._delegate,e);return new fs(this,t)}}refFromURL(e){(0,o.Dv)("database.refFromURL",1,1,arguments.length);const t=Ni(this._delegate,e);return new fs(this,t)}goOffline(){return(0,o.Dv)("database.goOffline",0,0,arguments.length),e=this._delegate,(e=(0,o.m9)(e))._checkNotDeleted("goOffline"),void ii(e._repo);var e}goOnline(){return(0,o.Dv)("database.goOnline",0,0,arguments.length),e=this._delegate,(e=(0,o.m9)(e))._checkNotDeleted("goOnline"),void((t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Wr));var e,t}}ps.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:e=>function(e){return{".sv":{increment:e}}}(e)};var ms=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:r,namespace:s,nodeAdmin:o=!1}){h(n);const a=new i.zt("auth-internal",new i.H0("database-standalone"));return a.setComponent(new i.wA("auth-internal",(()=>r),"PRIVATE")),{instance:new ps(rs(e,a,void 0,t,o),e),namespace:s}}});const gs=ps.ServerValue;var ys;(ys=r.Z).INTERNAL.registerComponent(new i.wA("database-compat",((e,{instanceIdentifier:t})=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new ps(r,n)}),"PUBLIC").setServiceProps({Reference:fs,Query:ds,Database:ps,DataSnapshot:hs,enableLogging:function(e,t){I(e,t)},INTERNAL:ms,ServerValue:gs}).setMultipleInstances(!0)),ys.registerVersion("@firebase/database-compat","0.1.5")},4507:function(e,t,n){"use strict";var r,i=n(8180),s=n(2238),o=n(8463),a=n(3333),l=n(4444),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},u={},h=h||{},d=c||self;function f(){}function p(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var g="closure_uid_"+(1e9*Math.random()>>>0),y=0;function v(e,t,n){return e.call.apply(e.bind,arguments)}function _(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function w(e,t,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:_).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function T(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function I(){this.s=this.s,this.o=this.o}var E={};I.prototype.s=!1,I.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,g)&&e[g]||(e[g]=++y)}(this);delete E[e]}},I.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const k=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},S=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function C(e){return Array.prototype.concat.apply([],arguments)}function x(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function N(e){return/^[\s\xa0]*$/.test(e)}var P,A=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function R(e,t){return-1!=e.indexOf(t)}function O(e,t){return e<t?-1:e>t?1:0}e:{var D=d.navigator;if(D){var L=D.userAgent;if(L){P=L;break e}}P=""}function M(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function F(e){const t={};for(const n in e)t[n]=e[n];return t}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<U.length;t++)n=U[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function q(e){return q[" "](e),e}q[" "]=f;var j,B,z=R(P,"Opera"),$=R(P,"Trident")||R(P,"MSIE"),W=R(P,"Edge"),K=W||$,H=R(P,"Gecko")&&!(R(P.toLowerCase(),"webkit")&&!R(P,"Edge"))&&!(R(P,"Trident")||R(P,"MSIE"))&&!R(P,"Edge"),G=R(P.toLowerCase(),"webkit")&&!R(P,"Edge");function Q(){var e=d.document;return e?e.documentMode:void 0}e:{var Y="",J=(B=P,H?/rv:([^\);]+)(\)|;)/.exec(B):W?/Edge\/([\d\.]+)/.exec(B):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(B):G?/WebKit\/(\S+)/.exec(B):z?/(?:Version)[ \/]?(\S+)/.exec(B):void 0);if(J&&(Y=J?J[1]:""),$){var X=Q();if(null!=X&&X>parseFloat(Y)){j=String(X);break e}}j=Y}var Z,ee={};function te(){return e=ee,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=A(String(j)).split("."),n=A("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=O(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||O(0==i[2].length,0==s[2].length)||O(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}();var e}d.document&&$?Z=Q()||parseInt(j,10)||void 0:Z=void 0;var ne=Z,re=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{d.addEventListener("test",f,t),d.removeEventListener("test",f,t)}catch(e){}return e}();function ie(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function se(e,t){if(ie.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(H){e:{try{q(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:oe[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&se.Z.h.call(this)}}ie.prototype.h=function(){this.defaultPrevented=!0},T(se,ie);var oe={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),le=0;function ce(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++le,this.ca=this.fa=!1}function ue(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function he(e){this.src=e,this.g={},this.h=0}function de(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=k(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ue(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function fe(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}he.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=fe(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ce(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var pe="closure_lm_"+(1e6*Math.random()|0),me={};function ge(e,t,n,r,i){if(r&&r.once)return ve(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ge(e,t[s],n,r,i);return null}return n=ke(n),e&&e[ae]?e.N(t,n,m(r)?!!r.capture:!!r,i):ye(e,t,n,!1,r,i)}function ye(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=m(i)?!!i.capture:!!i,a=Ie(e);if(a||(e[pe]=a=new he(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=Te;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)re||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(be(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ve(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ve(e,t[s],n,r,i);return null}return n=ke(n),e&&e[ae]?e.O(t,n,m(r)?!!r.capture:!!r,i):ye(e,t,n,!0,r,i)}function _e(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)_e(e,t[s],n,r,i);else r=m(r)?!!r.capture:!!r,n=ke(n),e&&e[ae]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=fe(s=e.g[t],n,r,i))&&(ue(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Ie(e))&&(t=e.g[t.toString()],e=-1,t&&(e=fe(t,n,r,i)),(n=-1<e?t[e]:null)&&we(n))}function we(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ae])de(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(be(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ie(t))?(de(n,e),0==n.h&&(n.src=null,t[pe]=null)):ue(e)}}}function be(e){return e in me?me[e]:me[e]="on"+e}function Te(e,t){if(e.ca)e=!0;else{t=new se(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&we(e),e=n.call(r,t)}return e}function Ie(e){return(e=e[pe])instanceof he?e:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(e){return"function"==typeof e?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function Se(){I.call(this),this.i=new he(this),this.P=this,this.I=null}function Ce(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new ie(t,e);else if(t instanceof ie)t.target=t.target||e;else{var i=t;V(t=new ie(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=xe(o,r,!0,t)&&i}if(i=xe(o=t.g=e,r,!0,t)&&i,i=xe(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=xe(o=t.g=n[s],r,!1,t)&&i}function xe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&de(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}T(Se,I),Se.prototype[ae]=!0,Se.prototype.removeEventListener=function(e,t,n,r){_e(this,e,t,n,r)},Se.prototype.M=function(){if(Se.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ue(n[r]);delete t.g[e],t.h--}}this.I=null},Se.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Se.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ne=d.JSON.stringify;function Pe(){var e=Fe;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ae,Re=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Oe),(e=>e.reset()));class Oe{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function De(e){d.setTimeout((()=>{throw e}),0)}function Le(e,t){Ae||function(){var e=d.Promise.resolve(void 0);Ae=function(){e.then(Ue)}}(),Me||(Ae(),Me=!0),Fe.add(e,t)}var Me=!1,Fe=new class{constructor(){this.h=this.g=null}add(e,t){const n=Re.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Ue(){for(var e;e=Pe();){try{e.h.call(e.g)}catch(e){De(e)}var t=Re;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Me=!1}function Ve(e,t){Se.call(this),this.h=e||1,this.g=t||d,this.j=w(this.kb,this),this.l=Date.now()}function qe(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function je(e,t,n){if("function"==typeof e)n&&(e=w(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=w(e.handleEvent,e)}return 2147483647<Number(t)?-1:d.setTimeout(e,t||0)}function Be(e){e.g=je((()=>{e.g=null,e.i&&(e.i=!1,Be(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}T(Ve,Se),(r=Ve.prototype).da=!1,r.S=null,r.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ce(this,"tick"),this.da&&(qe(this),this.start()))}},r.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Ve.Z.M.call(this),qe(this),delete this.g};class ze extends I{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Be(this)}M(){super.M(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $e(e){I.call(this),this.h=e,this.g={}}T($e,I);var We=[];function Ke(e,t,n,r){Array.isArray(n)||(n&&(We[0]=n.toString()),n=We);for(var i=0;i<n.length;i++){var s=ge(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function He(e){M(e.g,(function(e,t){this.g.hasOwnProperty(t)&&we(e)}),e),e.g={}}function Ge(){this.g=!0}function Qe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ne(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}$e.prototype.M=function(){$e.Z.M.call(this),He(this)},$e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ge.prototype.Aa=function(){this.g=!1},Ge.prototype.info=function(){};var Ye={},Je=null;function Xe(){return Je=Je||new Se}function Ze(e){ie.call(this,Ye.Ma,e)}function et(e){const t=Xe();Ce(t,new Ze(t,e))}function tt(e,t){ie.call(this,Ye.STAT_EVENT,e),this.stat=t}function nt(e){const t=Xe();Ce(t,new tt(t,e))}function rt(e,t){ie.call(this,Ye.Na,e),this.size=t}function it(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return d.setTimeout((function(){e()}),t)}Ye.Ma="serverreachability",T(Ze,ie),Ye.STAT_EVENT="statevent",T(tt,ie),Ye.Na="timingevent",T(rt,ie);var st={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ot={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function at(){}function lt(e){return e.h||(e.h=e.i())}function ct(){}at.prototype.h=null;var ut,ht={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function dt(){ie.call(this,"d")}function ft(){ie.call(this,"c")}function pt(){}function mt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new $e(this),this.P=yt,e=K?125:void 0,this.W=new Ve(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gt}function gt(){this.i=null,this.g="",this.h=!1}T(dt,ie),T(ft,ie),T(pt,at),pt.prototype.g=function(){return new XMLHttpRequest},pt.prototype.i=function(){return{}},ut=new pt;var yt=45e3,vt={},_t={};function wt(e,t,n){e.K=1,e.v=zt(Ft(t)),e.s=n,e.U=!0,bt(e,null)}function bt(e,t){e.F=Date.now(),kt(e),e.A=Ft(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),nn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new gt,e.g=rr(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ze(w(e.Ia,e,e.g),e.O)),Ke(e.V,e.g,"readystatechange",e.gb),t=e.H?F(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),et(1),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Tt(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function It(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=Et(e,n),r==_t){4==t&&(e.o=4,nt(14),i=!1),Qe(e.j,e.m,null,"[Incomplete Response]");break}if(r==vt){e.o=4,nt(15),Qe(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Qe(e.j,e.m,r,null),Pt(e,r)}Tt(e)&&r!=_t&&r!=vt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,nt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qn(t),t.L=!0,nt(11))):(Qe(e.j,e.m,n,"[Invalid Chunked Response]"),Nt(e),xt(e))}function Et(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?_t:(n=Number(t.substring(n,r)),isNaN(n)?vt:(r+=1)+n>t.length?_t:(t=t.substr(r,n),e.C=r+n,t))}function kt(e){e.Y=Date.now()+e.P,St(e,e.P)}function St(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=it(w(e.eb,e),t)}function Ct(e){e.B&&(d.clearTimeout(e.B),e.B=null)}function xt(e){0==e.l.G||e.I||Xn(e.l,e)}function Nt(e){Ct(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,qe(e.W),He(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Pt(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||cn(n.i,e)))if(n.I=e.N,!e.J&&cn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Jn(n),qn(n)}Gn(n),nt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=it(w(n.ab,n),6e3));if(1>=ln(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else er(n,11)}else if((e.J||n.g==e)&&Jn(n),!N(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const t=c[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=c[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(R(e,"spdy")||R(e,"quic")||R(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(un(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,Bt(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=nr(r,r.H?r.la:null,r.W),o.J){hn(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(Ct(a),kt(a)),r.g=o}else Hn(r);0<n.l.length&&zn(n)}else"stop"!=c[0]&&"close"!=c[0]||er(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?er(n,7):Vn(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}et(4)}catch(e){}}function At(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"==typeof e)S(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(p(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Rt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Rt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ot(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Dt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Dt(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=mt.prototype).setTimeout=function(e){this.P=e},r.gb=function(e){e=e.target;const t=this.L;t&&3==Dn(e)?t.l():this.Ia(e)},r.Ia=function(e){try{if(e==this.g)e:{const u=Dn(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>u)&&(3!=u||K||this.g&&(this.h.h||this.g.ga()||Ln(this.g)))){this.I||4!=u||7==t||et(8==t||0>=h?3:2),Ct(this);var n=this.g.ba();this.N=n;t:if(Tt(this)){var r=Ln(this.g);e="";var i=r.length,s=4==Dn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Nt(this),xt(this);var o="";break t}this.h.i=new d.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,nt(12),Nt(this),xt(this);break e}Qe(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pt(this,n)}this.U?(It(this,u,o),K&&this.i&&3==u&&(Ke(this.V,this.W,"tick",this.fb),this.W.start())):(Qe(this.j,this.m,o,null),Pt(this,o)),4==u&&Nt(this),this.i&&!this.I&&(4==u?Xn(this.l,this):(this.i=!1,kt(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,nt(12)):(this.o=0,nt(13)),Nt(this),xt(this)}}}catch(e){}},r.fb=function(){if(this.g){var e=Dn(this.g),t=this.g.ga();this.C<t.length&&(Ct(this),It(this,e,t),this.i&&4!=e&&kt(this))}},r.cancel=function(){this.I=!0,Nt(this)},r.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(et(3),nt(17)),Nt(this),this.o=2,xt(this)):St(this,this.Y-e)},(r=Rt.prototype).R=function(){Ot(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},r.T=function(){return Ot(this),this.g.concat()},r.get=function(e,t){return Dt(this.h,e)?this.h[e]:t},r.set=function(e,t){Dt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},r.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Lt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Mt){this.g=void 0!==t?t:e.g,Ut(this,e.j),this.s=e.s,Vt(this,e.i),qt(this,e.m),this.l=e.l,t=e.h;var n=new Xt;n.i=t.i,t.g&&(n.g=new Rt(t.g),n.h=t.h),jt(this,n),this.o=e.o}else e&&(n=String(e).match(Lt))?(this.g=!!t,Ut(this,n[1]||"",!0),this.s=$t(n[2]||""),Vt(this,n[3]||"",!0),qt(this,n[4]),this.l=$t(n[5]||"",!0),jt(this,n[6]||"",!0),this.o=$t(n[7]||"")):(this.g=!!t,this.h=new Xt(null,this.g))}function Ft(e){return new Mt(e)}function Ut(e,t,n){e.j=n?$t(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Vt(e,t,n){e.i=n?$t(t,!0):t}function qt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function jt(e,t,n){t instanceof Xt?(e.h=t,function(e,t){t&&!e.j&&(Zt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(en(this,t),nn(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Wt(t,Yt)),e.h=new Xt(t,e.g))}function Bt(e,t,n){e.h.set(t,n)}function zt(e){return Bt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function $t(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Wt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Mt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Wt(t,Ht,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Wt(t,Ht,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Wt(n,"/"==n.charAt(0)?Qt:Gt,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Wt(n,Jt)),e.join("")};var Ht=/[#\/\?@]/g,Gt=/[#\?:]/g,Qt=/[#\?]/g,Yt=/[#\?@]/g,Jt=/#/g;function Xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zt(e){e.g||(e.g=new Rt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function en(e,t){Zt(e),t=rn(e,t),Dt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Dt((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ot(e)))}function tn(e,t){return Zt(e),t=rn(e,t),Dt(e.g.h,t)}function nn(e,t,n){en(e,t),0<n.length&&(e.i=null,e.g.set(rn(e,t),x(n)),e.h+=n.length)}function rn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function sn(e){this.l=e||on,e=d.PerformanceNavigationTiming?0<(e=d.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(d.g&&d.g.Ea&&d.g.Ea()&&d.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(r=Xt.prototype).add=function(e,t){Zt(this),this.i=null,e=rn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Zt(this),this.g.forEach((function(n,r){S(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.T=function(){Zt(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},r.R=function(e){Zt(this);var t=[];if("string"==typeof e)tn(this,e)&&(t=C(t,this.g.get(rn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=C(t,e[n])}return t},r.set=function(e,t){return Zt(this),this.i=null,tn(this,e=rn(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var on=10;function an(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ln(e){return e.h?1:e.g?e.g.size:0}function cn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function un(e,t){e.g?e.g.add(t):e.h=t}function hn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function dn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return x(e.i)}function fn(){}function pn(){this.g=new fn}function mn(e,t,n){const r=n||"";try{At(e,(function(e,n){let i=e;m(e)&&(i=Ne(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function gn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function yn(e){this.l=e.$b||null,this.j=e.ib||!1}function vn(e,t){Se.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=_n,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sn.prototype.cancel=function(){if(this.i=dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},fn.prototype.stringify=function(e){return d.JSON.stringify(e,void 0)},fn.prototype.parse=function(e){return d.JSON.parse(e,void 0)},T(yn,at),yn.prototype.g=function(){return new vn(this.l,this.j)},yn.prototype.i=function(e){return function(){return e}}({}),T(vn,Se);var _n=0;function wn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function bn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Tn(e)}function Tn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=vn.prototype).open=function(e,t){if(this.readyState!=_n)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Tn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||d).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bn(this)),this.readyState=_n},r.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Tn(this)),this.g&&(this.readyState=3,Tn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==d.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},r.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?bn(this):Tn(this),3==this.readyState&&wn(this)}},r.Ua=function(e){this.g&&(this.response=this.responseText=e,bn(this))},r.Ta=function(e){this.g&&(this.response=e,bn(this))},r.ha=function(){this.g&&bn(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(vn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var In=d.JSON.parse;function En(e){Se.call(this),this.headers=new Rt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kn,this.K=this.L=!1}T(En,Se);var kn="",Sn=/^https?$/i,Cn=["POST","PUT"];function xn(e){return"content-type"==e.toLowerCase()}function Nn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Pn(e),Rn(e)}function Pn(e){e.D||(e.D=!0,Ce(e,"complete"),Ce(e,"error"))}function An(e){if(e.h&&void 0!==h&&(!e.C[1]||4!=Dn(e)||2!=e.ba()))if(e.v&&4==Dn(e))je(e.Fa,0,e);else if(Ce(e,"readystatechange"),4==Dn(e)){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.H).match(Lt)[1]||null;if(!i&&d.self&&d.self.location){var s=d.self.location.protocol;i=s.substr(0,s.length-1)}r=!Sn.test(i?i.toLowerCase():"")}n=r}if(n)Ce(e,"complete"),Ce(e,"success");else{e.m=6;try{var o=2<Dn(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.ba()+"]",Pn(e)}}finally{Rn(e)}}}function Rn(e,t){if(e.g){On(e);const n=e.g,r=e.C[0]?f:null;e.g=null,e.C=null,t||Ce(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function On(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(d.clearTimeout(e.A),e.A=null)}function Dn(e){return e.g?e.g.readyState:0}function Ln(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case kn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Mn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return M(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Bt(e,t,n))}function Fn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Un(e){this.za=0,this.l=[],this.h=new Ge,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fn("baseRetryDelayMs",5e3,e),this.$a=Fn("retryDelaySeedMs",1e4,e),this.Ya=Fn("forwardChannelMaxRetries",2,e),this.ra=Fn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new sn(e&&e.concurrentRequestLimit),this.Ca=new pn,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Vn(e){if(jn(e),3==e.G){var t=e.V++,n=Ft(e.F);Bt(n,"SID",e.J),Bt(n,"RID",t),Bt(n,"TYPE","terminate"),Wn(e,n),(t=new mt(e,e.h,t,void 0)).K=2,t.v=zt(Ft(n)),n=!1,d.navigator&&d.navigator.sendBeacon&&(n=d.navigator.sendBeacon(t.v.toString(),"")),!n&&d.Image&&((new Image).src=t.v,n=!0),n||(t.g=rr(t.l,null),t.g.ea(t.v)),t.F=Date.now(),kt(t)}tr(e)}function qn(e){e.g&&(Qn(e),e.g.cancel(),e.g=null)}function jn(e){qn(e),e.u&&(d.clearTimeout(e.u),e.u=null),Jn(e),e.i.cancel(),e.m&&("number"==typeof e.m&&d.clearTimeout(e.m),e.m=null)}function Bn(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&zn(e)}function zn(e){an(e.i)||e.m||(e.m=!0,Le(e.Ha,e),e.C=0)}function $n(e,t){var n;n=t?t.m:e.V++;const r=Ft(e.F);Bt(r,"SID",e.J),Bt(r,"RID",n),Bt(r,"AID",e.U),Wn(e,r),e.o&&e.s&&Mn(r,e.o,e.s),n=new mt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Kn(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),un(e.i,n),wt(n,r,t)}function Wn(e,t){e.j&&At({},(function(e,n){Bt(t,n,e)}))}function Kn(e,t,n){n=Math.min(e.l.length,n);var r=e.j?w(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{mn(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function Hn(e){e.g||e.u||(e.Y=1,Le(e.Ga,e),e.A=0)}function Gn(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=it(w(e.Ga,e),Zn(e,e.A)),e.A++,0))}function Qn(e){null!=e.B&&(d.clearTimeout(e.B),e.B=null)}function Yn(e){e.g=new mt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ft(e.oa);Bt(t,"RID","rpc"),Bt(t,"SID",e.J),Bt(t,"CI",e.N?"0":"1"),Bt(t,"AID",e.U),Wn(e,t),Bt(t,"TYPE","xmlhttp"),e.o&&e.s&&Mn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=zt(Ft(t)),n.s=null,n.U=!0,bt(n,e)}function Jn(e){null!=e.v&&(d.clearTimeout(e.v),e.v=null)}function Xn(e,t){var n=null;if(e.g==t){Jn(e),Qn(e),e.g=null;var r=2}else{if(!cn(e.i,t))return;n=t.D,hn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ce(r=Xe(),new rt(r,n,t,i)),zn(e)}else Hn(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ln(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=it(w(e.Ha,e,t),Zn(e,e.C)),e.C++,0)))}(e,t)||2==r&&Gn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:er(e,5);break;case 4:er(e,10);break;case 3:er(e,6);break;default:er(e,2)}}function Zn(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function er(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=w(e.jb,e);n||(n=new Mt("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||Ut(n,"https"),zt(n)),function(e,t){const n=new Ge;if(d.Image){const r=new Image;r.onload=b(gn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(gn,n,r,"TestLoadImage: error",!1,t),r.onabort=b(gn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(gn,n,r,"TestLoadImage: timeout",!1,t),d.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else nt(2);e.G=0,e.j&&e.j.va(t),tr(e),jn(e)}function tr(e){e.G=0,e.I=-1,e.j&&(0==dn(e.i).length&&0==e.l.length||(e.i.i.length=0,x(e.l),e.l.length=0),e.j.ua())}function nr(e,t,n){let r=function(e){return e instanceof Mt?Ft(e):new Mt(e,void 0)}(n);if(""!=r.i)t&&Vt(r,t+"."+r.i),qt(r,r.m);else{const e=d.location;r=function(e,t,n,r){var i=new Mt(null,void 0);return e&&Ut(i,e),t&&Vt(i,t),n&&qt(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&M(e.aa,(function(e,t){Bt(r,t,e)})),t=e.D,n=e.sa,t&&n&&Bt(r,t,n),Bt(r,"VER",e.ma),Wn(e,r),r}function rr(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new En(new yn({ib:!0})):new En(e.qa)).L=e.H,t}function ir(){}function sr(){if($&&!(10<=Number(ne)))throw Error("Environmental error: no available transport.")}function or(e,t){Se.call(this),this.g=new Un(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!N(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new cr(this)}function ar(e){dt.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function lr(){ft.call(this),this.status=1}function cr(e){this.g=e}(r=En.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ut.g(),this.C=this.u?lt(this.u):lt(ut),this.g.onreadystatechange=w(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void Nn(this,e)}e=n||"";const i=new Rt(this.headers);r&&At(r,(function(e,t){i.set(t,e)})),r=function(e){e:{var t=xn;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=d.FormData&&e instanceof d.FormData,!(0<=k(Cn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{On(this),0<this.B&&((this.K=function(e){return $&&te()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=w(this.pa,this)):this.A=je(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Nn(this,e)}},r.pa=function(){void 0!==h&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ce(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ce(this,"complete"),Ce(this,"abort"),Rn(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rn(this,!0)),En.Z.M.call(this)},r.Fa=function(){this.s||(this.F||this.v||this.l?An(this):this.cb())},r.cb=function(){An(this)},r.ba=function(){try{return 2<Dn(this)?this.g.status:-1}catch(e){return-1}},r.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),In(t)}},r.Da=function(){return this.m},r.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=Un.prototype).ma=8,r.G=1,r.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},r.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new mt(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=F(s),V(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Kn(this,i,t),Bt(n=Ft(this.F),"RID",e),Bt(n,"CVER",22),this.D&&Bt(n,"X-HTTP-Session-Id",this.D),Wn(this,n),this.o&&s&&Mn(n,this.o,s),un(this.i,i),this.Ra&&Bt(n,"TYPE","init"),this.ja?(Bt(n,"$req",t),Bt(n,"SID","null"),i.$=!0,wt(i,n,null)):wt(i,n,t),this.G=2}}else 3==this.G&&(e?$n(this,e):0==this.l.length||an(this.i)||$n(this))},r.Ga=function(){if(this.u=null,Yn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=it(w(this.bb,this),e)}},r.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,nt(10),qn(this),Yn(this))},r.ab=function(){null!=this.v&&(this.v=null,qn(this),Gn(this),nt(19))},r.jb=function(e){e?(this.h.info("Successfully pinged google.com"),nt(2)):(this.h.info("Failed to ping google.com"),nt(1))},(r=ir.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Oa=function(){},sr.prototype.g=function(e,t){return new or(e,t)},T(or,Se),or.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Le(w(e.hb,e,t))),nt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=nr(e,null,e.W),zn(e)},or.prototype.close=function(){Vn(this.g)},or.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Bn(this.g,t)}else this.v?((t={}).__data__=Ne(e),Bn(this.g,t)):Bn(this.g,e)},or.prototype.M=function(){this.g.j=null,delete this.j,Vn(this.g),delete this.g,or.Z.M.call(this)},T(ar,dt),T(lr,ft),T(cr,ir),cr.prototype.xa=function(){Ce(this.g,"a")},cr.prototype.wa=function(e){Ce(this.g,new ar(e))},cr.prototype.va=function(e){Ce(this.g,new lr(e))},cr.prototype.ua=function(){Ce(this.g,"b")},sr.prototype.createWebChannel=sr.prototype.g,or.prototype.send=or.prototype.u,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,ot.COMPLETE="complete",ct.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",Se.prototype.listen=Se.prototype.N,En.prototype.listenOnce=En.prototype.O,En.prototype.getLastError=En.prototype.La,En.prototype.getLastErrorCode=En.prototype.Da,En.prototype.getStatus=En.prototype.ba,En.prototype.getResponseJson=En.prototype.Qa,En.prototype.getResponseText=En.prototype.ga,En.prototype.send=En.prototype.ea;var ur=u.createWebChannelTransport=function(){return new sr},hr=u.getStatEventTarget=function(){return Xe()},dr=u.ErrorCode=st,fr=u.EventType=ot,pr=u.Event=Ye,mr=u.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gr=u.FetchXmlHttpFactory=yn,yr=u.WebChannel=ct,vr=u.XhrIo=En;const _r="@firebase/firestore";class wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");let br="9.6.7";const Tr=new a.Yd("@firebase/firestore");function Ir(){return Tr.logLevel}function Er(e,...t){if(Tr.logLevel<=a.in.DEBUG){const n=t.map(Cr);Tr.debug(`Firestore (${br}): ${e}`,...n)}}function kr(e,...t){if(Tr.logLevel<=a.in.ERROR){const n=t.map(Cr);Tr.error(`Firestore (${br}): ${e}`,...n)}}function Sr(e,...t){if(Tr.logLevel<=a.in.WARN){const n=t.map(Cr);Tr.warn(`Firestore (${br}): ${e}`,...n)}}function Cr(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function xr(e="Unexpected state"){const t=`FIRESTORE (${br}) INTERNAL ASSERTION FAILED: `+e;throw kr(t),new Error(t)}function Nr(e,t){e||xr()}function Pr(e,t){return e}const Ar={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rr extends l.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Dr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(wr.UNAUTHENTICATED)))}shutdown(){}}class Mr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Fr{constructor(e){this.t=e,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Or,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Er("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Er("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Or)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Er("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Nr("string"==typeof t.accessToken),new Dr(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Nr(null===e||"string"==typeof e),new wr(e)}}class Ur{constructor(e,t,n){this.type="FirstParty",this.user=wr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class Vr{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Ur(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(wr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jr{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&Er("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,Er("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Er("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?r(e):Er("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Nr("string"==typeof e.token),this.p=e.token,new qr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Br{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.I(e),this.T=e=>t.writeSequenceNumber(e))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function zr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}Br.A=-1;class $r{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=zr(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Wr(e,t){return e<t?-1:e>t?1:0}function Kr(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Hr(e){return e+"\0"}class Gr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Rr(Ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Rr(Ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Rr(Ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Rr(Ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gr.fromMillis(Date.now())}static fromDate(e){return Gr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Gr(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wr(this.nanoseconds,e.nanoseconds):Wr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Qr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Qr(e)}static min(){return new Qr(new Gr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Yr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Zr{constructor(e,t,n){void 0===t?t=0:t>e.length&&xr(),void 0===n?n=e.length-t:n>e.length-t&&xr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Zr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ei extends Zr{construct(e,t,n){return new ei(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Rr(Ar.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new ei(t)}static emptyPath(){return new ei([])}}const ti=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ni extends Zr{construct(e,t,n){return new ni(e,t,n)}static isValidIdentifier(e){return ti.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ni.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ni(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Rr(Ar.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Rr(Ar.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Rr(Ar.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Rr(Ar.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ni(t)}static emptyPath(){return new ni([])}}class ri{constructor(e){this.fields=e,e.sort(ni.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kr(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ii{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ii(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ii(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ii.EMPTY_BYTE_STRING=new ii("");const si=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(e){if(Nr(!!e),"string"==typeof e){let t=0;const n=si.exec(e);if(Nr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ai(e.seconds),nanos:ai(e.nanos)}}function ai(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function li(e){return"string"==typeof e?ii.fromBase64String(e):ii.fromUint8Array(e)}function ci(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ui(e){const t=e.mapValue.fields.__previous_value__;return ci(t)?ui(t):t}function hi(e){const t=oi(e.mapValue.fields.__local_write_time__.timestampValue);return new Gr(t.seconds,t.nanos)}class di{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class fi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fi&&e.projectId===this.projectId&&e.database===this.database}}function pi(e){return null==e}function mi(e){return 0===e&&1/e==-1/0}function gi(e){return"number"==typeof e&&Number.isInteger(e)&&!mi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class yi{constructor(e){this.path=e}static fromPath(e){return new yi(ei.fromString(e))}static fromName(e){return new yi(ei.fromString(e).popFirst(5))}static empty(){return new yi(ei.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ei.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ei.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yi(new ei(e.slice()))}}const vi={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function _i(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ci(e)?4:10:xr()}function wi(e,t){if(e===t)return!0;const n=_i(e);if(n!==_i(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hi(e).isEqual(hi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=oi(e.timestampValue),r=oi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return li(e.bytesValue).isEqual(li(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ai(e.geoPointValue.latitude)===ai(t.geoPointValue.latitude)&&ai(e.geoPointValue.longitude)===ai(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ai(e.integerValue)===ai(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ai(e.doubleValue),r=ai(t.doubleValue);return n===r?mi(n)===mi(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Kr(e.arrayValue.values||[],t.arrayValue.values||[],wi);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Yr(n)!==Yr(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!wi(n[e],r[e])))return!1;return!0}(e,t);default:return xr()}}function bi(e,t){return void 0!==(e.values||[]).find((e=>wi(e,t)))}function Ti(e,t){if(e===t)return 0;const n=_i(e),r=_i(t);if(n!==r)return Wr(n,r);switch(n){case 0:return 0;case 1:return Wr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ai(e.integerValue||e.doubleValue),r=ai(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ii(e.timestampValue,t.timestampValue);case 4:return Ii(hi(e),hi(t));case 5:return Wr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=li(e),r=li(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=Wr(n[e],r[e]);if(0!==t)return t}return Wr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Wr(ai(e.latitude),ai(t.latitude));return 0!==n?n:Wr(ai(e.longitude),ai(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Ti(n[e],r[e]);if(t)return t}return Wr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=Wr(r[e],s[e]);if(0!==t)return t;const o=Ti(n[r[e]],i[s[e]]);if(0!==o)return o}return Wr(r.length,s.length)}(e.mapValue,t.mapValue);default:throw xr()}}function Ii(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wr(e,t);const n=oi(e),r=oi(t),i=Wr(n.seconds,r.seconds);return 0!==i?i:Wr(n.nanos,r.nanos)}function Ei(e){return ki(e)}function ki(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=oi(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?li(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,yi.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ki(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${ki(e.fields[i])}`;return n+"}"}(e.mapValue):xr();var t,n}function Si(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ci(e){return!!e&&"integerValue"in e}function xi(e){return!!e&&"arrayValue"in e}function Ni(e){return!!e&&"nullValue"in e}function Pi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ai(e){return!!e&&"mapValue"in e}function Ri(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Jr(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ri(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ri(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ai(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ri(t)}setAll(e){let t=ni.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ri(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ai(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ai(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Jr(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Oi(Ri(this.value))}}function Di(e){const t=[];return Jr(e.fields,((e,n)=>{const r=new ni([e]);if(Ai(n)){const e=Di(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ri(t)}class Li{constructor(e,t,n,r,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new Li(e,0,Qr.min(),Qr.min(),Oi.empty(),0)}static newFoundDocument(e,t,n){return new Li(e,1,t,Qr.min(),n,0)}static newNoDocument(e,t){return new Li(e,2,t,Qr.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new Li(e,3,t,Qr.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Li&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Li(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mi{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Mi.UNKNOWN_ID=-1;class Fi{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ui{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ui(0,Vi.min())}}class Vi{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Vi(Qr.min(),yi.empty(),-1)}}class qi{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.P=null}}function ji(e,t=null,n=[],r=[],i=null,s=null,o=null){return new qi(e,t,n,r,i,s,o)}function Bi(e){const t=Pr(e);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>{return(t=e).field.canonicalString()+t.op.toString()+Ei(t.value);var t})).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),pi(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ei(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ei(e))).join(",")),t.P=e}return t.P}function zi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ns(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!wi(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!is(e.startAt,t.startAt)&&is(e.endAt,t.endAt)}function $i(e){return yi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Wi extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,n):new Ki(e,t,n):"array-contains"===t?new Yi(e,n):"in"===t?new Ji(e,n):"not-in"===t?new Xi(e,n):"array-contains-any"===t?new Zi(e,n):new Wi(e,t,n)}static v(e,t,n){return"in"===t?new Hi(e,n):new Gi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(Ti(t,this.value)):null!==t&&_i(this.value)===_i(t)&&this.V(Ti(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xr()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ki extends Wi{constructor(e,t,n){super(e,t,n),this.key=yi.fromName(n.referenceValue)}matches(e){const t=yi.comparator(e.key,this.key);return this.V(t)}}class Hi extends Wi{constructor(e,t){super(e,"in",t),this.keys=Qi(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Gi extends Wi{constructor(e,t){super(e,"not-in",t),this.keys=Qi(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Qi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>yi.fromName(e.referenceValue)))}class Yi extends Wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xi(t)&&bi(t.arrayValue,this.value)}}class Ji extends Wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&bi(this.value.arrayValue,t)}}class Xi extends Wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(bi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!bi(this.value.arrayValue,t)}}class Zi extends Wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xi(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>bi(this.value.arrayValue,e)))}}class es{constructor(e,t){this.position=e,this.inclusive=t}}class ts{constructor(e,t="asc"){this.field=e,this.dir=t}}function ns(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function rs(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?yi.comparator(yi.fromName(o.referenceValue),n.key):Ti(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function is(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!wi(e.position[n],t.position[n]))return!1;return!0}class ss{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.D=null,this.C=null,this.startAt,this.endAt}}function os(e,t,n,r,i,s,o,a){return new ss(e,t,n,r,i,s,o,a)}function as(e){return new ss(e)}function ls(e){return!pi(e.limit)&&"F"===e.limitType}function cs(e){return!pi(e.limit)&&"L"===e.limitType}function us(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function hs(e){for(const t of e.filters)if(t.S())return t.field;return null}function ds(e){return null!==e.collectionGroup}function fs(e){const t=Pr(e);if(null===t.D){t.D=[];const e=hs(t),n=us(t);if(null!==e&&null===n)e.isKeyField()||t.D.push(new ts(e)),t.D.push(new ts(ni.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.D.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new ts(ni.keyField(),e))}}}return t.D}function ps(e){const t=Pr(e);if(!t.C)if("F"===t.limitType)t.C=ji(t.path,t.collectionGroup,fs(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of fs(t)){const t="desc"===n.dir?"asc":"desc";e.push(new ts(n.field,t))}const n=t.endAt?new es(t.endAt.position,!t.endAt.inclusive):null,r=t.startAt?new es(t.startAt.position,!t.startAt.inclusive):null;t.C=ji(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.C}function ms(e,t,n){return new ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gs(e,t){return zi(ps(e),ps(t))&&e.limitType===t.limitType}function ys(e){return`${Bi(ps(e))}|lt:${e.limitType}`}function vs(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Ei(t.value)}`;var t})).join(", ")}]`),pi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ei(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ei(e))).join(",")),`Target(${t})`}(ps(e))}; limitType=${e.limitType})`}function _s(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):yi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=rs(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,fs(e),t)||e.endAt&&!function(e,t,n){const r=rs(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,fs(e),t))}(e,t)}function ws(e){return(t,n)=>{let r=!1;for(const i of fs(e)){const e=bs(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function bs(e,t,n){const r=e.field.isKeyField()?yi.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ti(r,i):xr()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xr()}}function Ts(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mi(t)?"-0":t}}function Is(e){return{integerValue:""+e}}function Es(e,t){return gi(t)?Is(t):Ts(e,t)}class ks{constructor(){this._=void 0}}function Ss(e,t,n){return e instanceof Ns?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ps?As(e,t):e instanceof Rs?Os(e,t):function(e,t){const n=xs(e,t),r=Ls(n)+Ls(e.k);return Ci(n)&&Ci(e.k)?Is(r):Ts(e.O,r)}(e,t)}function Cs(e,t,n){return e instanceof Ps?As(e,t):e instanceof Rs?Os(e,t):n}function xs(e,t){return e instanceof Ds?Ci(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Ns extends ks{}class Ps extends ks{constructor(e){super(),this.elements=e}}function As(e,t){const n=Ms(t);for(const t of e.elements)n.some((e=>wi(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Rs extends ks{constructor(e){super(),this.elements=e}}function Os(e,t){let n=Ms(t);for(const t of e.elements)n=n.filter((e=>!wi(e,t)));return{arrayValue:{values:n}}}class Ds extends ks{constructor(e,t){super(),this.O=e,this.k=t}}function Ls(e){return ai(e.integerValue||e.doubleValue)}function Ms(e){return xi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Fs{constructor(e,t){this.field=e,this.transform=t}}class Us{constructor(e,t){this.version=e,this.transformResults=t}}class Vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vs}static exists(e){return new Vs(void 0,e)}static updateTime(e){return new Vs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qs(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class js{}function Bs(e,t,n){e instanceof Hs?function(e,t,n){const r=e.value.clone(),i=Ys(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Gs?function(e,t,n){if(!qs(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ys(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Qs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function zs(e,t,n){e instanceof Hs?function(e,t,n){if(!qs(e.precondition,t))return;const r=e.value.clone(),i=Js(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Ks(t),r).setHasLocalMutations()}(e,t,n):e instanceof Gs?function(e,t,n){if(!qs(e.precondition,t))return;const r=Js(e.fieldTransforms,n,t),i=t.data;i.setAll(Qs(e)),i.setAll(r),t.convertToFoundDocument(Ks(t),i).setHasLocalMutations()}(e,t,n):function(e,t){qs(e.precondition,t)&&t.convertToNoDocument(Qr.min())}(e,t)}function $s(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=xs(r.transform,e||null);null!=i&&(null==n&&(n=Oi.empty()),n.set(r.field,i))}return n||null}function Ws(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Kr(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ps&&t instanceof Ps||e instanceof Rs&&t instanceof Rs?Kr(e.elements,t.elements,wi):e instanceof Ds&&t instanceof Ds?wi(e.k,t.k):e instanceof Ns&&t instanceof Ns}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Ks(e){return e.isFoundDocument()?e.version:Qr.min()}class Hs extends js{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Gs extends js{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Qs(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ys(e,t,n){const r=new Map;Nr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Cs(o,a,n[i]))}return r}function Js(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ss(e,s,t))}return r}class Xs extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Zs extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class eo{constructor(e){this.count=e}}var to,no;function ro(e){switch(e){default:return xr();case Ar.CANCELLED:case Ar.UNKNOWN:case Ar.DEADLINE_EXCEEDED:case Ar.RESOURCE_EXHAUSTED:case Ar.INTERNAL:case Ar.UNAVAILABLE:case Ar.UNAUTHENTICATED:return!1;case Ar.INVALID_ARGUMENT:case Ar.NOT_FOUND:case Ar.ALREADY_EXISTS:case Ar.PERMISSION_DENIED:case Ar.FAILED_PRECONDITION:case Ar.ABORTED:case Ar.OUT_OF_RANGE:case Ar.UNIMPLEMENTED:case Ar.DATA_LOSS:return!0}}function io(e){if(void 0===e)return kr("GRPC error has no .code"),Ar.UNKNOWN;switch(e){case to.OK:return Ar.OK;case to.CANCELLED:return Ar.CANCELLED;case to.UNKNOWN:return Ar.UNKNOWN;case to.DEADLINE_EXCEEDED:return Ar.DEADLINE_EXCEEDED;case to.RESOURCE_EXHAUSTED:return Ar.RESOURCE_EXHAUSTED;case to.INTERNAL:return Ar.INTERNAL;case to.UNAVAILABLE:return Ar.UNAVAILABLE;case to.UNAUTHENTICATED:return Ar.UNAUTHENTICATED;case to.INVALID_ARGUMENT:return Ar.INVALID_ARGUMENT;case to.NOT_FOUND:return Ar.NOT_FOUND;case to.ALREADY_EXISTS:return Ar.ALREADY_EXISTS;case to.PERMISSION_DENIED:return Ar.PERMISSION_DENIED;case to.FAILED_PRECONDITION:return Ar.FAILED_PRECONDITION;case to.ABORTED:return Ar.ABORTED;case to.OUT_OF_RANGE:return Ar.OUT_OF_RANGE;case to.UNIMPLEMENTED:return Ar.UNIMPLEMENTED;case to.DATA_LOSS:return Ar.DATA_LOSS;default:return xr()}}(no=to||(to={}))[no.OK=0]="OK",no[no.CANCELLED=1]="CANCELLED",no[no.UNKNOWN=2]="UNKNOWN",no[no.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",no[no.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",no[no.NOT_FOUND=5]="NOT_FOUND",no[no.ALREADY_EXISTS=6]="ALREADY_EXISTS",no[no.PERMISSION_DENIED=7]="PERMISSION_DENIED",no[no.UNAUTHENTICATED=16]="UNAUTHENTICATED",no[no.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",no[no.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",no[no.ABORTED=10]="ABORTED",no[no.OUT_OF_RANGE=11]="OUT_OF_RANGE",no[no.UNIMPLEMENTED=12]="UNIMPLEMENTED",no[no.INTERNAL=13]="INTERNAL",no[no.UNAVAILABLE=14]="UNAVAILABLE",no[no.DATA_LOSS=15]="DATA_LOSS";class so{constructor(e,t){this.comparator=e,this.root=t||ao.EMPTY}insert(e,t){return new so(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ao.BLACK,null,null))}remove(e){return new so(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ao.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oo(this.root,e,this.comparator,!1)}getReverseIterator(){return new oo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oo(this.root,e,this.comparator,!0)}}class oo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ao{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ao.RED,this.left=null!=r?r:ao.EMPTY,this.right=null!=i?i:ao.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ao(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ao.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ao.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ao.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ao.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xr();if(this.right.isRed())throw xr();const e=this.left.check();if(e!==this.right.check())throw xr();return e+(this.isRed()?0:1)}}ao.EMPTY=null,ao.RED=!0,ao.BLACK=!1,ao.EMPTY=new class{constructor(){this.size=0}get key(){throw xr()}get value(){throw xr()}get color(){throw xr()}get left(){throw xr()}get right(){throw xr()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ao(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class lo{constructor(e){this.comparator=e,this.data=new so(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new co(this.data.getIterator())}getIteratorFrom(e){return new co(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof lo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new lo(this.comparator);return t.data=e,t}}class co{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uo(e){return e.hasNext()?e.getNext():void 0}const ho=new so(yi.comparator);function fo(){return ho}const po=new so(yi.comparator);function mo(){return po}const go=new so(yi.comparator),yo=new lo(yi.comparator);function vo(...e){let t=yo;for(const n of e)t=t.add(n);return t}const _o=new lo(Wr);function wo(){return _o}class bo{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,To.createSynthesizedTargetChangeForCurrentChange(e,t)),new bo(Qr.min(),n,wo(),fo(),vo())}}class To{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new To(ii.EMPTY_BYTE_STRING,t,vo(),vo(),vo())}}class Io{constructor(e,t,n,r){this.M=e,this.removedTargetIds=t,this.key=n,this.$=r}}class Eo{constructor(e,t){this.targetId=e,this.F=t}}class ko{constructor(e,t,n=ii.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class So{constructor(){this.B=0,this.L=No(),this.U=ii.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=vo(),t=vo(),n=vo();return this.L.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xr()}})),new To(this.U,this.q,e,t,n)}J(){this.K=!1,this.L=No()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Co{constructor(e){this.nt=e,this.st=new Map,this.it=fo(),this.rt=xo(),this.ot=new lo(Wr)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,(t=>{const n=this.lt(t);switch(e.state){case 0:this.ft(t)&&n.W(e.resumeToken);break;case 1:n.tt(),n.G||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.G||this.removeTarget(t);break;case 3:this.ft(t)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),n.W(e.resumeToken));break;default:xr()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach(((e,n)=>{this.ft(n)&&t(n)}))}_t(e){const t=e.targetId,n=e.F.count,r=this.wt(t);if(r){const e=r.target;if($i(e))if(0===n){const n=new yi(e.path);this.at(t,n,Li.newNoDocument(n,Qr.min()))}else Nr(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach(((n,r)=>{const i=this.wt(r);if(i){if(n.current&&$i(i.target)){const t=new yi(i.target.path);null!==this.it.get(t)||this.It(r,t)||this.at(r,t,Li.newNoDocument(t,e))}n.j&&(t.set(r,n.H()),n.J())}}));let n=vo();this.rt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.wt(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.it.forEach(((t,n)=>n.setReadTime(e)));const r=new bo(e,t,this.ot,this.it,n);return this.it=fo(),this.rt=xo(),this.ot=new lo(Wr),r}ut(e,t){if(!this.ft(e))return;const n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,n){if(!this.ft(e))return;const r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),n&&(this.it=this.it.insert(t,n))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new So,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new lo(Wr),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Er("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new So),this.nt.getRemoteKeysForTarget(e).forEach((t=>{this.at(e,t,null)}))}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function xo(){return new so(yi.comparator)}function No(){return new so(yi.comparator)}const Po={asc:"ASCENDING",desc:"DESCENDING"},Ao={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ro{constructor(e,t){this.databaseId=e,this.N=t}}function Oo(e,t){return e.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Do(e,t){return e.N?t.toBase64():t.toUint8Array()}function Lo(e,t){return Oo(e,t.toTimestamp())}function Mo(e){return Nr(!!e),Qr.fromTimestamp(function(e){const t=oi(e);return new Gr(t.seconds,t.nanos)}(e))}function Fo(e,t){return function(e){return new ei(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Uo(e){const t=ei.fromString(e);return Nr(oa(t)),t}function Vo(e,t){return Fo(e.databaseId,t.path)}function qo(e,t){const n=Uo(t);if(n.get(1)!==e.databaseId.projectId)throw new Rr(Ar.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Rr(Ar.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new yi($o(n))}function jo(e,t){return Fo(e.databaseId,t)}function Bo(e){const t=Uo(e);return 4===t.length?ei.emptyPath():$o(t)}function zo(e){return new ei(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $o(e){return Nr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wo(e,t,n){return{name:Vo(e,t),fields:n.value.mapValue.fields}}function Ko(e,t,n){const r=qo(e,t.name),i=Mo(t.updateTime),s=new Oi({mapValue:{fields:t.fields}}),o=Li.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ho(e,t){let n;if(t instanceof Hs)n={update:Wo(e,t.key,t.value)};else if(t instanceof Xs)n={delete:Vo(e,t.key)};else if(t instanceof Gs)n={update:Wo(e,t.key,t.data),updateMask:sa(t.fieldMask)};else{if(!(t instanceof Zs))return xr();n={verify:Vo(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ns)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ps)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ds)return{fieldPath:t.field.canonicalString(),increment:n.k};throw xr()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Lo(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xr()}(e,t.precondition)),n}function Go(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Vs.updateTime(Mo(e.updateTime)):void 0!==e.exists?Vs.exists(e.exists):Vs.none()}(t.currentDocument):Vs.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Nr("REQUEST_TIME"===t.setToServerValue),n=new Ns;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Ps(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Rs(e)}else"increment"in t?n=new Ds(e,t.increment):xr();const r=ni.fromServerFormat(t.fieldPath);return new Fs(r,n)}(e,t))):[];if(t.update){t.update.name;const i=qo(e,t.update.name),s=new Oi({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ri(t.map((e=>ni.fromServerFormat(e))))}(t.updateMask);return new Gs(i,s,e,n,r)}return new Hs(i,s,n,r)}if(t.delete){const r=qo(e,t.delete);return new Xs(r,n)}if(t.verify){const r=qo(e,t.verify);return new Zs(r,n)}return xr()}function Qo(e,t){return{documents:[jo(e,t.path)]}}function Yo(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=jo(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=jo(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(Pi(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NAN"}};if(Ni(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Pi(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NOT_NAN"}};if(Ni(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(e.field),op:ea(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:ta(e.field),direction:Zo(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.N||pi(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Jo(e){let t=Bo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Nr(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Xo(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new ts(na(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,pi(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new es(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new es(n,t)}(n.endAt)),os(t,i,o,s,a,"F",l,c)}function Xo(e){return e?void 0!==e.unaryFilter?[ia(e)]:void 0!==e.fieldFilter?[ra(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>Xo(e))).reduce(((e,t)=>e.concat(t))):xr():[]}function Zo(e){return Po[e]}function ea(e){return Ao[e]}function ta(e){return{fieldPath:e.canonicalString()}}function na(e){return ni.fromServerFormat(e.fieldPath)}function ra(e){return Wi.create(na(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xr()}}(e.fieldFilter.op),e.fieldFilter.value)}function ia(e){switch(e.unaryFilter.op){case"IS_NAN":const t=na(e.unaryFilter.field);return Wi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=na(e.unaryFilter.field);return Wi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=na(e.unaryFilter.field);return Wi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=na(e.unaryFilter.field);return Wi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return xr()}}function sa(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function oa(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function aa(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ca(t)),t=la(e.get(n),t);return ca(t)}function la(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function ca(e){return e+""}function ua(e){const t=e.length;if(Nr(t>=2),2===t)return Nr(""===e.charAt(0)&&""===e.charAt(1)),ei.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&xr(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:xr()}s=t+2}return new ei(r)}class ha{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class da{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}da.store="owner",da.key="owner";class fa{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}fa.store="mutationQueues",fa.keyPath="userId";class pa{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}pa.store="mutations",pa.keyPath="batchId",pa.userMutationsIndex="userMutationsIndex",pa.userMutationsKeyPath=["userId","batchId"];class ma{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,aa(t)]}static key(e,t,n){return[e,aa(t),n]}}ma.store="documentMutations",ma.PLACEHOLDER=new ma;class ga{constructor(e,t){this.path=e,this.readTime=t}}class ya{constructor(e,t){this.path=e,this.version=t}}class va{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}va.store="remoteDocuments",va.readTimeIndex="readTimeIndex",va.readTimeIndexPath="readTime",va.collectionReadTimeIndex="collectionReadTimeIndex",va.collectionReadTimeIndexPath=["parentPath","readTime"];class _a{constructor(e){this.byteSize=e}}_a.store="remoteDocumentGlobal",_a.key="remoteDocumentGlobalKey";class wa{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}wa.store="targets",wa.keyPath="targetId",wa.queryTargetsIndexName="queryTargetsIndex",wa.queryTargetsKeyPath=["canonicalId","targetId"];class ba{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}ba.store="targetDocuments",ba.keyPath=["targetId","path"],ba.documentTargetsIndex="documentTargetsIndex",ba.documentTargetsKeyPath=["path","targetId"];class Ta{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}Ta.key="targetGlobalKey",Ta.store="targetGlobal";class Ia{constructor(e,t){this.collectionId=e,this.parent=t}}Ia.store="collectionParents",Ia.keyPath=["collectionId","parent"];class Ea{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}Ea.store="clientMetadata",Ea.keyPath="clientId";class ka{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}ka.store="bundles",ka.keyPath="bundleId";class Sa{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}Sa.store="namedQueries",Sa.keyPath="name";class Ca{constructor(e,t,n){this.indexId=e,this.collectionGroup=t,this.fields=n}}Ca.store="indexConfiguration",Ca.keyPath="indexId",Ca.collectionGroupIndex="collectionGroupIndex",Ca.collectionGroupIndexPath="collectionGroup";class xa{constructor(e,t,n,r,i,s){this.indexId=e,this.uid=t,this.sequenceNumber=n,this.readTime=r,this.documentKey=i,this.largestBatchId=s}}xa.store="indexState",xa.keyPath=["indexId","uid"],xa.sequenceNumberIndex="sequenceNumberIndex",xa.sequenceNumberIndexPath=["uid","sequenceNumber"];class Na{constructor(e,t,n,r,i){this.indexId=e,this.uid=t,this.arrayValue=n,this.directionalValue=r,this.documentKey=i}}Na.store="indexEntries",Na.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Na.documentKeyIndex="documentKeyIndex",Na.documentKeyIndexPath=["indexId","uid","documentKey"];class Pa{constructor(e,t,n,r,i,s){this.userId=e,this.collectionPath=t,this.documentId=n,this.collectionGroup=r,this.largestBatchId=i,this.overlayMutation=s}}Pa.store="documentOverlays",Pa.keyPath=["userId","collectionPath","documentId"],Pa.collectionPathOverlayIndex="collectionPathOverlayIndex",Pa.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Pa.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Pa.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const Aa=[fa.store,pa.store,ma.store,va.store,wa.store,da.store,Ta.store,ba.store,Ea.store,_a.store,Ia.store,ka.store,Sa.store],Ra=[...Aa,Pa.store],Oa=[...Ra,Ca.store,xa.store,Na.store],Da="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class La{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class Ma{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ma(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ma?t:Ma.resolve(t)}catch(e){return Ma.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ma.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ma.reject(t)}static resolve(e){return new Ma(((t,n)=>{t(e)}))}static reject(e){return new Ma(((t,n)=>{n(e)}))}static waitFor(e){return new Ma(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Ma.resolve(!1);for(const n of e)t=t.next((e=>e?Ma.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}}class Fa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Or,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new qa(e,t.error)):this.At.resolve()},this.transaction.onerror=t=>{const n=Wa(t.target.error);this.At.reject(new qa(e,n))}}static open(e,t,n,r){try{return new Fa(t,e.transaction(r,n))}catch(e){throw new qa(t,e)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Er("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ba(t)}}class Ua{constructor(e,t,n){this.name=e,this.version=t,this.bt=n,12.2===Ua.vt((0,l.z$)())&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Er("SimpleDb","Removing database:",e),za(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,l.hl)())return!1;if(Ua.St())return!0;const e=(0,l.z$)(),t=Ua.vt(e),n=0<t&&t<10,r=Ua.Dt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async xt(e){return this.db||(Er("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new qa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Rr(Ar.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Rr(Ar.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new qa(e,r))},r.onupgradeneeded=e=>{Er("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.bt.kt(t,r.transaction,e.oldVersion,this.version).next((()=>{Er("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.Ot&&(this.db.onversionchange=e=>this.Ot(e)),this.db}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.xt(e);const t=Fa.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.Pt(),e))).catch((e=>(t.abort(e),Ma.reject(e)))).toPromise();return s.catch((()=>{})),await t.Rt,s}catch(e){const t="FirebaseError"!==e.name&&s<3;if(Er("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Va{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return za(this.$t.delete())}}class qa extends Rr{constructor(e,t){super(Ar.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ja(e){return"IndexedDbTransactionError"===e.name}class Ba{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Er("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Er("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),za(n)}add(e){return Er("SimpleDb","ADD",this.store.name,e,e),za(this.store.add(e))}get(e){return za(this.store.get(e)).next((t=>(void 0===t&&(t=null),Er("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Er("SimpleDb","DELETE",this.store.name,e),za(this.store.delete(e))}count(){return Er("SimpleDb","COUNT",this.store.name),za(this.store.count())}qt(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.Kt(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new Ma(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}Gt(e,t){Er("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.jt=!1;const r=this.cursor(n);return this.Kt(r,((e,t,n)=>n.delete()))}Qt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Kt(r,t)}Wt(e){const t=this.cursor({});return new Ma(((n,r)=>{t.onerror=e=>{const t=Wa(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}Kt(e,t){const n=[];return new Ma(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Va(i),o=t(i.primaryKey,i.value,s);if(o instanceof Ma){const e=o.catch((e=>(s.done(),Ma.reject(e))));n.push(e)}s.isDone?r():null===s.Lt?i.continue():i.continue(s.Lt)}})).next((()=>Ma.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function za(e){return new Ma(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Wa(e.target.error);n(t)}}))}let $a=!1;function Wa(e){const t=Ua.vt((0,l.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Rr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $a||($a=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ka extends La{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function Ha(e,t){const n=Pr(e);return Ua.Nt(n.zt,t)}class Ga{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&Bs(r,e,n[t])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&zs(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&zs(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Qr.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),vo())}isEqual(e){return this.batchId===e.batchId&&Kr(this.mutations,e.mutations,((e,t)=>Ws(e,t)))&&Kr(this.baseMutations,e.baseMutations,((e,t)=>Ws(e,t)))}}class Qa{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Nr(e.mutations.length===n.length);let r=go;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Qa(e,t,n,r)}}class Ya{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ja{constructor(e,t,n,r,i=Qr.min(),s=Qr.min(),o=ii.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Xa{constructor(e){this.Ht=e}}function Za(e,t){let n;if(t.document)n=Ko(e.Ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=yi.fromSegments(t.noDocument.path),r=il(t.noDocument.readTime);n=Li.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return xr();{const e=yi.fromSegments(t.unknownDocument.path),r=il(t.unknownDocument.version);n=Li.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(nl(t.readTime)),n}function el(e,t){const n=tl(t.readTime),r=t.key.path.popLast().toArray();if(t.isFoundDocument()){const i=function(e,t){return{name:Vo(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Oo(e,t.version.toTimestamp())}}(e.Ht,t),s=t.hasCommittedMutations;return new va(null,null,i,s,n,r)}if(t.isNoDocument()){const e=t.key.path.toArray(),i=rl(t.version),s=t.hasCommittedMutations;return new va(null,new ga(e,i),null,s,n,r)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),i=rl(t.version);return new va(new ya(e,i),null,null,!0,n,r)}return xr()}function tl(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function nl(e){const t=new Gr(e[0],e[1]);return Qr.fromTimestamp(t)}function rl(e){const t=e.toTimestamp();return new ha(t.seconds,t.nanoseconds)}function il(e){const t=new Gr(e.seconds,e.nanoseconds);return Qr.fromTimestamp(t)}function sl(e,t){const n=(t.baseMutations||[]).map((t=>Go(e.Ht,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>Go(e.Ht,t))),i=Gr.fromMillis(t.localWriteTimeMs);return new Ga(t.batchId,i,n,r)}function ol(e){const t=il(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?il(e.lastLimboFreeSnapshotVersion):Qr.min();let r;var i;return void 0!==e.query.documents?(Nr(1===(i=e.query).documents.length),r=ps(as(Bo(i.documents[0])))):r=function(e){return ps(Jo(e))}(e.query),new Ja(r,e.targetId,0,e.lastListenSequenceNumber,t,n,ii.fromBase64String(e.resumeToken))}function al(e,t){const n=rl(t.snapshotVersion),r=rl(t.lastLimboFreeSnapshotVersion);let i;i=$i(t.target)?Qo(e.Ht,t.target):Yo(e.Ht,t.target);const s=t.resumeToken.toBase64();return new wa(t.targetId,Bi(t.target),n,s,t.sequenceNumber,r,i)}function ll(e){const t=Jo({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ms(t,t.limit,"L"):t}function cl(e,t){return new Ya(t.largestBatchId,Go(e.Ht,t.overlayMutation))}function ul(e,t){const n=t.path.lastSegment();return[e,aa(t.path.popLast()),n]}class hl{getBundleMetadata(e,t){return dl(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:il(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return dl(e).put({bundleId:(n=t).id,createTime:rl(Mo(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return fl(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:ll(t.bundledQuery),readTime:il(t.readTime)};var t}))}saveNamedQuery(e,t){return fl(e).put(function(e){return{name:e.name,readTime:rl(Mo(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function dl(e){return Ha(e,ka.store)}function fl(e){return Ha(e,Sa.store)}class pl{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){const n=t.uid||"";return new pl(e,n)}getOverlay(e,t){return ml(e).get(ul(this.userId,t)).next((e=>e?cl(this.O,e):null))}saveOverlays(e,t,n){const r=[];return n.forEach((n=>{const i=new Ya(t,n);r.push(this.Yt(e,i))})),Ma.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(aa(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(ml(e).Gt(Pa.collectionPathOverlayIndex,r))})),Ma.waitFor(i)}getOverlaysForCollection(e,t,n){const r=new Map,i=aa(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ml(e).qt(Pa.collectionPathOverlayIndex,s).next((e=>{for(const t of e){const e=cl(this.O,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=new Map;let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ml(e).Qt({index:Pa.collectionGroupOverlayIndex,range:o},((e,t,n)=>{const o=cl(this.O,t);i.size<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}Yt(e,t){return ml(e).put(function(e,t,n){const[r,i,s]=ul(t,n.mutation.key);return new Pa(t,i,s,n.mutation.key.getCollectionGroup(),n.largestBatchId,Ho(e.Ht,n.mutation))}(this.O,this.userId,t))}}function ml(e){return Ha(e,Pa.store)}class gl{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(ai(e.integerValue));else if("doubleValue"in e){const n=ai(e.doubleValue);isNaN(n)?this.ee(t,13):(this.ee(t,15),mi(n)?t.ne(0):t.ne(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ee(t,20),"string"==typeof n?t.se(n):(t.se(`${n.seconds||""}`),t.ne(n.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(li(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ee(t,45),t.ne(n.latitude||0),t.ne(n.longitude||0)}else"mapValue"in e?wi(e,vi)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):xr()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const n=e.fields||{};this.ee(t,55);for(const e of Object.keys(n))this.ie(e,t),this.Zt(n[e],t)}ae(e,t){const n=e.values||[];this.ee(t,50);for(const e of n)this.Zt(e,t)}ce(e,t){this.ee(t,37),yi.fromName(e).path.forEach((e=>{this.ee(t,60),this.he(e,t)}))}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function yl(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function vl(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=yl(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}gl.le=new gl;class _l{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.de(n.value),n=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.me(n.value),n=t.next();this.ge()}ye(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.de(e);else if(e<2048)this.de(960|e>>>6),this.de(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.de(480|e>>>12),this.de(128|63&e>>>6),this.de(128|63&e);else{const e=t.codePointAt(0);this.de(240|e>>>18),this.de(128|63&e>>>12),this.de(128|63&e>>>6),this.de(128|63&e)}}this._e()}pe(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.me(e);else if(e<2048)this.me(960|e>>>6),this.me(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.me(480|e>>>12),this.me(128|63&e>>>6),this.me(128|63&e);else{const e=t.codePointAt(0);this.me(240|e>>>18),this.me(128|63&e>>>12),this.me(128|63&e>>>6),this.me(128|63&e)}}this.ge()}Ie(e){const t=this.Ee(e),n=vl(t);this.Te(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}Ae(e){const t=this.Ee(e),n=vl(t);this.Te(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class wl{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class bl{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class Tl{constructor(){this.Se=new _l,this.De=new wl(this.Se),this.Ce=new bl(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class Il{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}}function El(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=yi.comparator(e.documentKey,t.documentKey),0!==n?n:(n=kl(e.arrayValue,t.arrayValue),0!==n?n:kl(e.directionalValue,t.directionalValue)))}function kl(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Sl{constructor(){this.xe=new Cl}addToCollectionParentIndex(e,t){return this.xe.add(t),Ma.resolve()}getCollectionParents(e,t){return Ma.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return Ma.resolve()}deleteFieldIndex(e,t){return Ma.resolve()}getDocumentsMatchingTarget(e,t,n){return Ma.resolve(vo())}getFieldIndex(e,t){return Ma.resolve(null)}getFieldIndexes(e,t){return Ma.resolve([])}getNextCollectionGroupToUpdate(e){return Ma.resolve(null)}updateCollectionGroup(e,t,n){return Ma.resolve()}updateIndexEntries(e,t){return Ma.resolve()}}class Cl{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new lo(ei.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new lo(ei.comparator)).toArray()}}class xl{constructor(e){this.user=e,this.ke=new Cl,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.ke.add(t)}));const i={collectionId:n,parent:aa(r)};return Nl(e).put(i)}return Ma.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Hr(t),""],!1,!0);return Nl(e).qt(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(ua(r.parent))}return n}))}addFieldIndex(e,t){const n=Al(e),r=function(e){return new Ca(e.indexId,e.collectionGroup,e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind])))}(t);return delete r.indexId,n.add(r).next()}deleteFieldIndex(e,t){const n=Al(e),r=Rl(e),i=Pl(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t,n){return Ma.resolve(vo())}getFieldIndex(e,t){return Ma.resolve(null)}Oe(e,t){const n=new Tl;for(const r of function(e){return e.fields.filter((e=>2!==e.kind))}(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ne(r.kind);gl.le.Xt(e,i)}return n.Ve()}Me(e){const t=new Tl;return gl.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const n=Al(e),r=Rl(e);return(t?n.qt(Ca.collectionGroupIndex,IDBKeyRange.bound(t,t)):n.qt()).next((e=>{const t=[];return Ma.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Ui(t.sequenceNumber,new Vi(il(t.readTime),new yi(ua(t.documentKey)),t.largestBatchId)):Ui.empty(),r=e.fields.map((([e,t])=>new Fi(ni.fromServerFormat(e),t)));return new Mi(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>e.indexState.sequenceNumber-t.indexState.sequenceNumber)),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Al(e),i=Rl(e);return this.$e(e).next((e=>r.qt(Ca.collectionGroupIndex,IDBKeyRange.bound(t,t)).next((t=>Ma.forEach(t,(t=>i.put(function(e,t,n,r){return new xa(e,t.uid||"",n,rl(r.readTime),aa(r.documentKey.path),r.largestBatchId)}(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Ma.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Ma.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Ma.forEach(i,(n=>this.Fe(e,t,n).next((t=>{const i=this.Be(r,n);return t.isEqual(i)?Ma.resolve():this.Le(e,r,t,i)})))))))}))}Ue(e,t,n){return Pl(e).put(new Na(n.indexId,this.uid,n.arrayValue,n.directionalValue,aa(t.key.path)))}qe(e,t,n){return Pl(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,aa(t.key.path)])}Fe(e,t,n){const r=Pl(e);let i=new lo(El);return r.Qt({index:Na.documentKeyIndex,range:IDBKeyRange.only([n.indexId,this.uid,aa(t.path)])},((e,r)=>{i=i.add(new Il(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}Be(e,t){let n=new lo(El);const r=this.Oe(t,e);if(null==r)return n;const i=function(e){return e.fields.find((e=>2===e.kind))}(t);if(null!=i){const s=e.data.field(i.fieldPath);if(xi(s))for(const i of s.arrayValue.values||[])n=n.add(new Il(t.indexId,e.key,this.Me(i),r))}else n=n.add(new Il(t.indexId,e.key,new Uint8Array,r));return n}Le(e,t,n,r){Er("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=uo(s),l=uo(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=uo(o)):t?(i(a),a=uo(s)):(a=uo(s),l=uo(o))}}(n,r,El,(n=>{i.push(this.Ue(e,t,n))}),(n=>{i.push(this.qe(e,t,n))})),Ma.waitFor(i)}$e(e){let t=1;return Rl(e).Qt({index:xa.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}}function Nl(e){return Ha(e,Ia.store)}function Pl(e){return Ha(e,Na.store)}function Al(e){return Ha(e,Ca.store)}function Rl(e){return Ha(e,xa.store)}const Ol={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Dl{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Dl(e,Dl.DEFAULT_COLLECTION_PERCENTILE,Dl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ll(e,t,n){const r=e.store(pa.store),i=e.store(ma.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Qt({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Nr(1===a)})));const c=[];for(const e of n.mutations){const r=ma.key(t,e.key.path,n.batchId);s.push(i.delete(r)),c.push(e.key)}return Ma.waitFor(s).next((()=>c))}function Ml(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xr();t=e.noDocument}return JSON.stringify(t).length}Dl.DEFAULT_COLLECTION_PERCENTILE=10,Dl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dl.DEFAULT=new Dl(41943040,Dl.DEFAULT_COLLECTION_PERCENTILE,Dl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dl.DISABLED=new Dl(-1,0,0);class Fl{constructor(e,t,n,r){this.userId=e,this.O=t,this.indexManager=n,this.referenceDelegate=r,this.Ke={}}static Jt(e,t,n,r){Nr(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Fl(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vl(e).Qt({index:pa.userMutationsIndex,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=ql(e),s=Vl(e);return s.add({}).next((o=>{Nr("number"==typeof o);const a=new Ga(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Ho(e.Ht,t))),i=n.mutations.map((t=>Ho(e.Ht,t)));return new pa(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.O,this.userId,a),c=[];let u=new lo(((e,t)=>Wr(e.canonicalString(),t.canonicalString())));for(const e of r){const t=ma.key(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,ma.PLACEHOLDER))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Ke[o]=a.keys()})),Ma.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Vl(e).get(t).next((e=>e?(Nr(e.userId===this.userId),sl(this.O,e)):null))}Ge(e,t){return this.Ke[t]?Ma.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Ke[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Vl(e).Qt({index:pa.userMutationsIndex,range:r},((e,t,r)=>{t.userId===this.userId&&(Nr(t.batchId>=n),i=sl(this.O,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Vl(e).Qt({index:pa.userMutationsIndex,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vl(e).qt(pa.userMutationsIndex,t).next((e=>e.map((e=>sl(this.O,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ma.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ql(e).Qt({range:r},((n,r,s)=>{const[o,a,l]=n,c=ua(a);if(o===this.userId&&t.path.isEqual(c))return Vl(e).get(l).next((e=>{if(!e)throw xr();Nr(e.userId===this.userId),i.push(sl(this.O,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new lo(Wr);const r=[];return t.forEach((t=>{const i=ma.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=ql(e).Qt({range:s},((e,r,i)=>{const[s,o,a]=e,l=ua(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Ma.waitFor(r).next((()=>this.je(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=ma.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new lo(Wr);return ql(e).Qt({range:s},((e,t,i)=>{const[s,a,l]=e,c=ua(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.je(e,o)))}je(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Vl(e).get(t).next((e=>{if(null===e)throw xr();Nr(e.userId===this.userId),n.push(sl(this.O,e))})))})),Ma.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Ll(e.zt,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Qe(t.batchId)})),Ma.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Ma.resolve();const n=IDBKeyRange.lowerBound(ma.prefixForUser(this.userId)),r=[];return ql(e).Qt({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=ua(e[1]);r.push(t)}else n.done()})).next((()=>{Nr(0===r.length)}))}))}containsKey(e,t){return Ul(e,this.userId,t)}We(e){return jl(e).get(this.userId).next((e=>e||new fa(this.userId,-1,"")))}}function Ul(e,t,n){const r=ma.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ql(e).Qt({range:s,jt:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Vl(e){return Ha(e,pa.store)}function ql(e){return Ha(e,ma.store)}function jl(e){return Ha(e,fa.store)}class Bl{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new Bl(0)}static Je(){return new Bl(-1)}}class zl{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next((t=>{const n=new Bl(t.highestTargetId);return t.highestTargetId=n.next(),this.Xe(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ye(e).next((e=>Qr.fromTimestamp(new Gr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ye(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ye(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Xe(e,r))))}addTargetData(e,t){return this.Ze(e,t).next((()=>this.Ye(e).next((n=>(n.targetCount+=1,this.tn(t,n),this.Xe(e,n))))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>$l(e).delete(t.targetId))).next((()=>this.Ye(e))).next((t=>(Nr(t.targetCount>0),t.targetCount-=1,this.Xe(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return $l(e).Qt(((s,o)=>{const a=ol(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Ma.waitFor(i))).next((()=>r))}forEachTarget(e,t){return $l(e).Qt(((e,n)=>{const r=ol(n);t(r)}))}Ye(e){return Wl(e).get(Ta.key).next((e=>(Nr(null!==e),e)))}Xe(e,t){return Wl(e).put(Ta.key,t)}Ze(e,t){return $l(e).put(al(this.O,t))}tn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ye(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Bi(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return $l(e).Qt({range:r,index:wa.queryTargetsIndexName},((e,n,r)=>{const s=ol(n);zi(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Kl(e);return t.forEach((t=>{const s=aa(t.path);r.push(i.put(new ba(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))})),Ma.waitFor(r)}removeMatchingKeys(e,t,n){const r=Kl(e);return Ma.forEach(t,(t=>{const i=aa(t.path);return Ma.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Kl(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Kl(e);let i=vo();return r.Qt({range:n,jt:!0},((e,t,n)=>{const r=ua(e[1]),s=new yi(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=aa(t.path),r=IDBKeyRange.bound([n],[Hr(n)],!1,!0);let i=0;return Kl(e).Qt({index:ba.documentTargetsIndex,jt:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}Tt(e,t){return $l(e).get(t).next((e=>e?ol(e):null))}}function $l(e){return Ha(e,wa.store)}function Wl(e){return Ha(e,Ta.store)}function Kl(e){return Ha(e,ba.store)}async function Hl(e){if(e.code!==Ar.FAILED_PRECONDITION||e.message!==Da)throw e;Er("LocalStore","Unexpectedly lost primary lease")}function Gl([e,t],[n,r]){const i=Wr(e,n);return 0===i?Wr(t,r):i}class Ql{constructor(e){this.en=e,this.buffer=new lo(Gl),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Gl(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Yl{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){const t=this.on?3e5:6e4;Er("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.cn=null,this.on=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){ja(e)?Er("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Hl(e)}await this.un(e)}))}}class Jl{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Ma.resolve(Br.A);const n=new Ql(t);return this.an.forEachTarget(e,(e=>n.rn(e.sequenceNumber))).next((()=>this.an.ln(e,(e=>n.rn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.an.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Er("LruGarbageCollector","Garbage collection skipped; disabled"),Ma.resolve(Ol)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Er("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ol):this.fn(e,t)))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let n,r,i,s,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Er("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Ir()<=a.in.DEBUG&&Er("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(l-o)+"ms\n"+`\tRemoved ${e} documents in `+(c-l)+"ms\n"+`Total Duration: ${c-u}ms`),Ma.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class Xl{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Jl(e,t)}(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}dn(e){let t=0;return this.ln(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,((e,n)=>t(n)))}addReference(e,t,n){return Zl(e,n)}removeReference(e,t,n){return Zl(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Zl(e,t)}wn(e,t){return function(e,t){let n=!1;return jl(e).Wt((r=>Ul(e,r,t).next((e=>(e&&(n=!0),Ma.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this._n(e,((s,o)=>{if(o<=t){const t=this.wn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Qr.min()),Kl(e).delete([0,aa(s.path)]))))}));r.push(t)}})).next((()=>Ma.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Zl(e,t)}_n(e,t){const n=Kl(e);let r,i=Br.A;return n.Qt({index:ba.documentTargetsIndex},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Br.A&&t(new yi(ua(r)),i),i=o,r=s):i=Br.A})).next((()=>{i!==Br.A&&t(new yi(ua(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zl(e,t){return Kl(e).put(function(e,t){return new ba(0,aa(e.path),t)}(t,e.currentSequenceNumber))}class ec{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){Jr(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return Xr(this.inner)}}class tc{constructor(){this.changes=new ec((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Li.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ma.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nc{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return sc(e).put(oc(t),n)}removeEntry(e,t){const n=sc(e),r=oc(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.mn(e,n))))}getEntry(e,t){return sc(e).get(oc(t)).next((e=>this.gn(t,e)))}yn(e,t){return sc(e).get(oc(t)).next((e=>({document:this.gn(t,e),size:Ml(e)})))}getEntries(e,t){let n=fo();return this.pn(e,t,((e,t)=>{const r=this.gn(e,t);n=n.insert(e,r)})).next((()=>n))}In(e,t){let n=fo(),r=new so(yi.comparator);return this.pn(e,t,((e,t)=>{const i=this.gn(e,t);n=n.insert(e,i),r=r.insert(e,Ml(t))})).next((()=>({documents:n,En:r})))}pn(e,t,n){if(t.isEmpty())return Ma.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return sc(e).Qt({range:r},((e,t,r)=>{const o=yi.fromSegments(e);for(;s&&yi.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Ut(s.path.toArray()):r.done()})).next((()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null}))}getAll(e,t,n){let r=fo();const i=t.length+1,s={};if(n.isEqual(Qr.min())){const e=t.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.toArray(),r=tl(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=va.collectionReadTimeIndex}return sc(e).Qt(s,((e,n,s)=>{if(e.length!==i)return;const o=this.gn(yi.fromSegments(e),n);t.isPrefixOf(o.key.path)?r=r.insert(o.key,o):s.done()})).next((()=>r))}newChangeBuffer(e){return new rc(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return ic(e).get(_a.key).next((e=>(Nr(!!e),e)))}mn(e,t){return ic(e).put(_a.key,t)}gn(e,t){if(t){const e=Za(this.O,t);if(!e.isNoDocument()||!e.version.isEqual(Qr.min()))return e}return Li.newInvalidDocument(e)}}class rc extends tc{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new ec((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new lo(((e,t)=>Wr(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.An.get(i);if(s.isValidDocument()){const a=el(this.Tn.O,s);r=r.add(i.path.popLast());const l=Ml(a);n+=l-o,t.push(this.Tn.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=el(this.Tn.O,s.convertToNoDocument(Qr.min()));t.push(this.Tn.addEntry(e,i,n))}else t.push(this.Tn.removeEntry(e,i))})),r.forEach((n=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Tn.updateMetadata(e,n)),Ma.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next((e=>(this.An.set(t,e.size),e.document)))}getAllFromCache(e,t){return this.Tn.In(e,t).next((({documents:e,En:t})=>(t.forEach(((e,t)=>{this.An.set(e,t)})),e)))}}function ic(e){return Ha(e,_a.store)}function sc(e){return Ha(e,va.store)}function oc(e){return e.path.toArray()}class ac{constructor(e){this.O=e}kt(e,t,n,r){const i=new Fa("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(da.store)}(e),function(e){e.createObjectStore(fa.store,{keyPath:fa.keyPath}),e.createObjectStore(pa.store,{keyPath:pa.keyPath,autoIncrement:!0}).createIndex(pa.userMutationsIndex,pa.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ma.store)}(e),lc(e),function(e){e.createObjectStore(va.store)}(e));let s=Ma.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ba.store),e.deleteObjectStore(wa.store),e.deleteObjectStore(Ta.store)}(e),lc(e)),s=s.next((()=>function(e){const t=e.store(Ta.store),n=new Ta(0,0,Qr.min().toTimestamp(),0);return t.put(Ta.key,n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store(pa.store).qt().next((n=>{e.deleteObjectStore(pa.store),e.createObjectStore(pa.store,{keyPath:pa.keyPath,autoIncrement:!0}).createIndex(pa.userMutationsIndex,pa.userMutationsKeyPath,{unique:!0});const r=t.store(pa.store),i=n.map((e=>r.put(e)));return Ma.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore(Ea.store,{keyPath:Ea.keyPath})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Rn(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore(_a.store)}(e),this.Pn(i))))),n<7&&r>=7&&(s=s.next((()=>this.bn(i)))),n<8&&r>=8&&(s=s.next((()=>this.vn(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(va.store);t.createIndex(va.readTimeIndex,va.readTimeIndexPath,{unique:!1}),t.createIndex(va.collectionReadTimeIndex,va.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(s=s.next((()=>this.Vn(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore(ka.store,{keyPath:ka.keyPath})}(e),function(e){e.createObjectStore(Sa.store,{keyPath:Sa.keyPath})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore(Pa.store,{keyPath:Pa.keyPath});t.createIndex(Pa.collectionPathOverlayIndex,Pa.collectionPathOverlayIndexPath,{unique:!1}),t.createIndex(Pa.collectionGroupOverlayIndex,Pa.collectionGroupOverlayIndexPath,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>{!function(e){e.createObjectStore(Ca.store,{keyPath:Ca.keyPath,autoIncrement:!0}).createIndex(Ca.collectionGroupIndex,Ca.collectionGroupIndexPath,{unique:!1}),e.createObjectStore(xa.store,{keyPath:xa.keyPath}).createIndex(xa.sequenceNumberIndex,xa.sequenceNumberIndexPath,{unique:!1}),e.createObjectStore(Na.store,{keyPath:Na.keyPath}).createIndex(Na.documentKeyIndex,Na.documentKeyIndexPath,{unique:!1})}(e)}))),s}Pn(e){let t=0;return e.store(va.store).Qt(((e,n)=>{t+=Ml(n)})).next((()=>{const n=new _a(t);return e.store(_a.store).put(_a.key,n)}))}Rn(e){const t=e.store(fa.store),n=e.store(pa.store);return t.qt().next((t=>Ma.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.qt(pa.userMutationsIndex,r).next((n=>Ma.forEach(n,(n=>{Nr(n.userId===t.userId);const r=sl(this.O,n);return Ll(e,t.userId,r).next((()=>{}))}))))}))))}bn(e){const t=e.store(ba.store),n=e.store(va.store);return e.store(Ta.store).get(Ta.key).next((e=>{const r=[];return n.Qt(((n,i)=>{const s=new ei(n),o=function(e){return[0,aa(e)]}(s);r.push(t.get(o).next((n=>n?Ma.resolve():(n=>t.put(new ba(0,aa(n),e.highestListenSequenceNumber)))(s))))})).next((()=>Ma.waitFor(r)))}))}vn(e,t){e.createObjectStore(Ia.store,{keyPath:Ia.keyPath});const n=t.store(Ia.store),r=new Cl,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:aa(r)})}};return t.store(va.store).Qt({jt:!0},((e,t)=>{const n=new ei(e);return i(n.popLast())})).next((()=>t.store(ma.store).Qt({jt:!0},(([e,t,n],r)=>{const s=ua(t);return i(s.popLast())}))))}Vn(e){const t=e.store(wa.store);return t.Qt(((e,n)=>{const r=ol(n),i=al(this.O,r);return t.put(i)}))}}function lc(e){e.createObjectStore(ba.store,{keyPath:ba.keyPath}).createIndex(ba.documentTargetsIndex,ba.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(wa.store,{keyPath:wa.keyPath}).createIndex(wa.queryTargetsIndexName,wa.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Ta.store)}const cc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uc{constructor(e,t,n,r,i,s,o,a,l,c,u=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Sn=i,this.window=s,this.document=o,this.Dn=l,this.Cn=c,this.schemaVersion=u,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=e=>Promise.resolve(),!uc.Vt())throw new Rr(Ar.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Xl(this,r),this.Bn=t+"main",this.O=new Xa(a),this.Ln=new Ua(this.Bn,this.schemaVersion,new ac(this.O)),this.Un=new zl(this.referenceDelegate,this.O),this.qn=function(e){return new nc(e)}(this.O),this.Kn=new hl,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===c&&kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Rr(Ar.FAILED_PRECONDITION,cc);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Un.getHighestSequenceNumber(e)))})).then((e=>{this.Nn=new Br(e,this.Dn)})).then((()=>{this.xn=!0})).catch((e=>(this.Ln&&this.Ln.close(),Promise.reject(e))))}Hn(e){return this.Fn=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((async()=>{this.started&&await this.jn()})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>dc(e).put(new Ea(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next((()=>{if(this.isPrimary)return this.Jn(e).next((e=>{e||(this.isPrimary=!1,this.Sn.enqueueRetryable((()=>this.Fn(!1))))}))})).next((()=>this.Yn(e))).next((t=>this.isPrimary&&!t?this.Xn(e).next((()=>!1)):!!t&&this.Zn(e).next((()=>!0)))))).catch((e=>{if(ja(e))return Er("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Er("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable((()=>this.Fn(e))),this.isPrimary=e}))}Jn(e){return hc(e).get(da.key).next((e=>Ma.resolve(this.ts(e))))}es(e){return dc(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.ss(this.$n,18e5)){this.$n=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Ha(e,Ea.store);return t.qt().next((e=>{const n=this.rs(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Ma.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Gn)for(const t of e)this.Gn.removeItem(this.os(t.clientId))}}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.jn().then((()=>this.ns())).then((()=>this.zn()))))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?Ma.resolve(!0):hc(e).get(da.key).next((t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Rr(Ar.FAILED_PRECONDITION,cc);return!1}}return!(!this.networkEnabled||!this.inForeground)||dc(e).qt().next((e=>void 0===this.rs(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Er("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.xn=!1,this.us(),this.Mn&&(this.Mn.cancel(),this.Mn=null),this.hs(),this.ls(),await this.Ln.runTransaction("shutdown","readwrite",[da.store,Ea.store],(e=>{const t=new Ka(e,Br.A);return this.Xn(t).next((()=>this.es(t)))})),this.Ln.close(),this.fs()}rs(e,t){return e.filter((e=>this.ss(e.updateTimeMs,t)&&!this.cs(e.clientId)))}ds(){return this.runTransaction("getActiveClients","readonly",(e=>dc(e).qt().next((e=>this.rs(e,18e5).map((e=>e.clientId))))))}get started(){return this.xn}getMutationQueue(e,t){return Fl.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new xl(e)}getDocumentOverlayCache(e){return pl.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,n){Er("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=13===(s=this.schemaVersion)?Oa:12===s?Ra:11===s?Aa:void xr();var s;let o;return this.Ln.runTransaction(e,r,i,(r=>(o=new Ka(r,this.Nn?this.Nn.next():Br.A),"readwrite-primary"===t?this.Jn(o).next((e=>!!e||this.Yn(o))).next((t=>{if(!t)throw kr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable((()=>this.Fn(!1))),new Rr(Ar.FAILED_PRECONDITION,Da);return n(o)})).next((e=>this.Zn(o).next((()=>e)))):this._s(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}_s(e){return hc(e).get(da.key).next((e=>{if(null!==e&&this.ss(e.leaseTimestampMs,5e3)&&!this.cs(e.ownerId)&&!this.ts(e)&&!(this.Cn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Rr(Ar.FAILED_PRECONDITION,cc)}))}Zn(e){const t=new da(this.clientId,this.allowTabSynchronization,Date.now());return hc(e).put(da.key,t)}static Vt(){return Ua.Vt()}Xn(e){const t=hc(e);return t.get(da.key).next((e=>this.ts(e)?(Er("IndexedDbPersistence","Releasing primary lease."),t.delete(da.key)):Ma.resolve()))}ss(e,t){const n=Date.now();return!(e<n-t||e>n&&(kr(`Detected an update time that is in the future: ${e} > ${n}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.jn())))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,l.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const n=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Er("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return kr("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){kr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hc(e){return Ha(e,da.store)}function dc(e){return Ha(e,Ea.store)}function fc(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class pc{constructor(e,t){this.progress=e,this.ws=t}}class mc{constructor(e,t,n){this.qn=e,this.gs=t,this.indexManager=n}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next((n=>this.ps(e,t,n)))}ps(e,t,n){return this.qn.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}Is(e,t){e.forEach(((e,n)=>{for(const e of t)e.applyToLocalView(n)}))}Es(e,t){return this.qn.getEntries(e,t).next((t=>this.Ts(e,t).next((()=>t))))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.Is(t,e)))}As(e,t,n){return function(e){return yi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Rs(e,t.path):ds(t)?this.Ps(e,t,n):this.bs(e,t,n)}Rs(e,t){return this.ys(e,new yi(t)).next((e=>{let t=mo();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}Ps(e,t,n){const r=t.collectionGroup;let i=mo();return this.indexManager.getCollectionParents(e,r).next((s=>Ma.forEach(s,(s=>{const o=function(e,t){return new ss(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.bs(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}bs(e,t,n){let r;return this.qn.getAll(e,t.path,n).next((n=>(r=n,this.gs.getAllMutationBatchesAffectingQuery(e,t)))).next((e=>{for(const t of e)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=Li.newInvalidDocument(n),r=r.insert(n,i)),zs(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}})).next((()=>(r.forEach(((e,n)=>{_s(t,n)||(r=r.remove(e))})),r)))}}class gc{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.vs=n,this.Vs=r}static Ss(e,t){let n=vo(),r=vo();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new gc(e,t.fromCache,n,r)}}class yc{Ds(e){this.Cs=e}As(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Qr.min())?this.Ns(e,t):this.Cs.Es(e,r).next((i=>{const s=this.xs(t,i);return(ls(t)||cs(t))&&this.ks(t.limitType,s,r,n)?this.Ns(e,t):(Ir()<=a.in.DEBUG&&Er("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),vs(t)),this.Cs.As(e,t,n).next((e=>(s.forEach((t=>{e=e.insert(t.key,t)})),e))))}))}xs(e,t){let n=new lo(ws(e));return t.forEach(((t,r)=>{_s(e,r)&&(n=n.add(r))})),n}ks(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ns(e,t){return Ir()<=a.in.DEBUG&&Er("QueryEngine","Using full collection scan to execute query:",vs(t)),this.Cs.As(e,t,Qr.min())}}class vc{constructor(e,t,n,r){this.persistence=e,this.Os=t,this.O=r,this.Ms=new so(Wr),this.$s=new ec((e=>Bi(e)),zi),this.Fs=Qr.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(n)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new mc(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function _c(e,t,n,r){return new vc(e,t,n,r)}async function wc(e,t){const n=Pr(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.gs.getAllMutationBatches(e).next((i=>(r=i,n.Ls(t),n.gs.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=vo();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.Us.Es(e,o).next((e=>({qs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function bc(e){const t=Pr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Un.getLastRemoteSnapshotVersion(e)))}function Tc(e,t,n){let r=vo();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=fo();return n.forEach(((n,i)=>{const s=e.get(n);i.isNoDocument()&&i.version.isEqual(Qr.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!s.isValidDocument()||i.version.compareTo(s.version)>0||0===i.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Er("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",i.version)})),r}))}function Ic(e,t){const n=Pr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.gs.getNextMutationBatchAfterBatchId(e,t))))}function Ec(e,t){const n=Pr(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Un.getTargetData(e,t).next((i=>i?(r=i,Ma.resolve(r)):n.Un.allocateTargetId(e).next((i=>(r=new Ja(t,i,0,e.currentSequenceNumber),n.Un.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.$s.set(t,e.targetId)),e}))}async function kc(e,t,n){const r=Pr(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ja(e))throw e;Er("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.$s.delete(i.target)}function Sc(e,t,n){const r=Pr(e);let i=Qr.min(),s=vo();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Pr(e),i=r.$s.get(n);return void 0!==i?Ma.resolve(r.Ms.get(i)):r.Un.getTargetData(t,n)}(r,e,ps(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Os.As(e,t,n?i:Qr.min(),n?s:vo()))).next((e=>({documents:e,Ks:s})))))}function Cc(e,t){const n=Pr(e),r=Pr(n.Un),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.Tt(e,t).next((e=>e?e.target:null))))}function xc(e){const t=Pr(e);return t.persistence.runTransaction("Get new document changes","readonly",(e=>function(e,t,n){const r=Pr(e);let i=fo(),s=tl(n);const o=sc(t),a=IDBKeyRange.lowerBound(s,!0);return o.Qt({index:va.readTimeIndex,range:a},((e,t)=>{const n=Za(r.O,t);i=i.insert(n.key,n),s=t.readTime})).next((()=>({ws:i,readTime:nl(s)})))}(t.Bs,e,t.Fs))).then((({ws:e,readTime:n})=>(t.Fs=n,e)))}async function Nc(e,t,n=vo()){const r=await Ec(e,ps(ll(t.bundledQuery))),i=Pr(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Mo(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kn.saveNamedQuery(e,t);const o=r.withResumeToken(ii.EMPTY_BYTE_STRING,s);return i.Ms=i.Ms.insert(o.targetId,o),i.Un.updateTargetData(e,o).next((()=>i.Un.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Un.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kn.saveNamedQuery(e,t)))}))}class Pc{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return Ma.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var n;return this.Ws.set(t.id,{id:(n=t).id,version:n.version,createTime:Mo(n.createTime)}),Ma.resolve()}getNamedQuery(e,t){return Ma.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,function(e){return{name:e.name,query:ll(e.bundledQuery),readTime:Mo(e.readTime)}}(t)),Ma.resolve()}}class Ac{constructor(){this.overlays=new so(yi.comparator),this.Hs=new Map}getOverlay(e,t){return Ma.resolve(this.overlays.get(t))}saveOverlays(e,t,n){return n.forEach((n=>{this.Yt(e,t,n)})),Ma.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Hs.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Hs.delete(n)),Ma.resolve()}getOverlaysForCollection(e,t,n){const r=new Map,i=t.length+1,s=new yi(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ma.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new so(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=new Map,i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=new Map,a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(t,e))),!(o.size>=r)););return Ma.resolve(o)}Yt(e,t,n){if(null===n)return;const r=this.overlays.get(n.key);null!==r&&this.Hs.get(r.largestBatchId).delete(n.key),this.overlays=this.overlays.insert(n.key,new Ya(t,n));let i=this.Hs.get(t);void 0===i&&(i=new Set,this.Hs.set(t,i)),i.add(n.key)}}class Rc{constructor(){this.Js=new lo(Oc.Ys),this.Xs=new lo(Oc.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const n=new Oc(e,t);this.Js=this.Js.add(n),this.Xs=this.Xs.add(n)}ti(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ei(new Oc(e,t))}ni(e,t){e.forEach((e=>this.removeReference(e,t)))}si(e){const t=new yi(new ei([])),n=new Oc(t,e),r=new Oc(t,e+1),i=[];return this.Xs.forEachInRange([n,r],(e=>{this.ei(e),i.push(e.key)})),i}ii(){this.Js.forEach((e=>this.ei(e)))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new yi(new ei([])),n=new Oc(t,e),r=new Oc(t,e+1);let i=vo();return this.Xs.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Oc(e,0),n=this.Js.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Oc{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return yi.comparator(e.key,t.key)||Wr(e.oi,t.oi)}static Zs(e,t){return Wr(e.oi,t.oi)||yi.comparator(e.key,t.key)}}class Dc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new lo(Oc.Ys)}checkEmpty(e){return Ma.resolve(0===this.gs.length)}addMutationBatch(e,t,n,r){const i=this.ci;this.ci++,this.gs.length>0&&this.gs[this.gs.length-1];const s=new Ga(i,t,n,r);this.gs.push(s);for(const t of r)this.ui=this.ui.add(new Oc(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Ma.resolve(s)}lookupMutationBatch(e,t){return Ma.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.hi(n),i=r<0?0:r;return Ma.resolve(this.gs.length>i?this.gs[i]:null)}getHighestUnacknowledgedBatchId(){return Ma.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return Ma.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Oc(t,0),r=new Oc(t,Number.POSITIVE_INFINITY),i=[];return this.ui.forEachInRange([n,r],(e=>{const t=this.ai(e.oi);i.push(t)})),Ma.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new lo(Wr);return t.forEach((e=>{const t=new Oc(e,0),r=new Oc(e,Number.POSITIVE_INFINITY);this.ui.forEachInRange([t,r],(e=>{n=n.add(e.oi)}))})),Ma.resolve(this.li(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;yi.isDocumentKey(i)||(i=i.child(""));const s=new Oc(new yi(i),0);let o=new lo(Wr);return this.ui.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.oi)),!0)}),s),Ma.resolve(this.li(o))}li(e){const t=[];return e.forEach((e=>{const n=this.ai(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Nr(0===this.fi(t.batchId,"removed")),this.gs.shift();let n=this.ui;return Ma.forEach(t.mutations,(r=>{const i=new Oc(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.ui=n}))}Qe(e){}containsKey(e,t){const n=new Oc(t,0),r=this.ui.firstAfterOrEqual(n);return Ma.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.gs.length,Ma.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class Lc{constructor(e){this.di=e,this.docs=new so(yi.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.di(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ma.resolve(n?n.document.mutableCopy():Li.newInvalidDocument(t))}getEntries(e,t){let n=fo();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Li.newInvalidDocument(e))})),Ma.resolve(n)}getAll(e,t,n){let r=fo();const i=new yi(t.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||i.readTime.compareTo(n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return Ma.resolve(r)}_i(e,t){return Ma.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Mc(this)}getSize(e){return Ma.resolve(this.size)}}class Mc extends tc{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Tn.addEntry(e,r)):this.Tn.removeEntry(n)})),Ma.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class Fc{constructor(e){this.persistence=e,this.wi=new ec((e=>Bi(e)),zi),this.lastRemoteSnapshotVersion=Qr.min(),this.highestTargetId=0,this.mi=0,this.gi=new Rc,this.targetCount=0,this.yi=Bl.He()}forEachTarget(e,t){return this.wi.forEach(((e,n)=>t(n))),Ma.resolve()}getLastRemoteSnapshotVersion(e){return Ma.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ma.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),Ma.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.mi&&(this.mi=t),Ma.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new Bl(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,Ma.resolve()}updateTargetData(e,t){return this.Ze(t),Ma.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,Ma.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.wi.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.wi.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Ma.waitFor(i).next((()=>r))}getTargetCount(e){return Ma.resolve(this.targetCount)}getTargetData(e,t){const n=this.wi.get(t)||null;return Ma.resolve(n)}addMatchingKeys(e,t,n){return this.gi.ti(t,n),Ma.resolve()}removeMatchingKeys(e,t,n){this.gi.ni(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ma.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),Ma.resolve()}getMatchingKeysForTargetId(e,t){const n=this.gi.ri(t);return Ma.resolve(n)}containsKey(e,t){return Ma.resolve(this.gi.containsKey(t))}}class Uc{constructor(e,t){this.pi={},this.overlays={},this.Nn=new Br(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new Fc(this),this.indexManager=new Sl,this.qn=function(e){return new Lc(e)}((e=>this.referenceDelegate.Ii(e))),this.O=new Xa(t),this.Kn=new Pc(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ac,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.pi[e.toKey()];return n||(n=new Dc(t,this.referenceDelegate),this.pi[e.toKey()]=n),n}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,n){Er("MemoryPersistence","Starting transaction:",e);const r=new Vc(this.Nn.next());return this.referenceDelegate.Ei(),n(r).next((e=>this.referenceDelegate.Ti(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ai(e,t){return Ma.or(Object.values(this.pi).map((n=>()=>n.containsKey(e,t))))}}class Vc extends La{constructor(e){super(),this.currentSequenceNumber=e}}class qc{constructor(e){this.persistence=e,this.Ri=new Rc,this.Pi=null}static bi(e){return new qc(e)}get vi(){if(this.Pi)return this.Pi;throw xr()}addReference(e,t,n){return this.Ri.addReference(n,t),this.vi.delete(n.toString()),Ma.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.vi.add(n.toString()),Ma.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),Ma.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach((e=>this.vi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.vi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ma.forEach(this.vi,(n=>{const r=yi.fromPath(n);return this.Vi(e,r).next((e=>{e||t.removeEntry(r,Qr.min())}))})).next((()=>(this.Pi=null,t.apply(e))))}updateLimboDocument(e,t){return this.Vi(e,t).next((e=>{e?this.vi.delete(t.toString()):this.vi.add(t.toString())}))}Ii(e){return 0}Vi(e,t){return Ma.or([()=>Ma.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function jc(e,t){return`firestore_clients_${e}_${t}`}function Bc(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function zc(e,t){return`firestore_targets_${e}_${t}`}class $c{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Si(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Rr(r.error.code,r.error.message))),s?new $c(e,t,r.state,i):(kr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wc{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Si(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Rr(n.error.code,n.error.message))),i?new Wc(e,n.state,r):(kr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kc{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=wo();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=gi(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new Kc(e,i):(kr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Hc{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Hc(t.clientId,t.onlineState):(kr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Gc{constructor(){this.activeTargetIds=wo()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qc{constructor(e,t,n,r,i){this.window=e,this.Sn=t,this.persistenceKey=n,this.xi=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new so(Wr),this.started=!1,this.$i=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Fi=jc(this.persistenceKey,this.xi),this.Bi=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.Mi=this.Mi.insert(this.xi,new Gc),this.Li=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Ki=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Gi=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.ds();for(const t of e){if(t===this.xi)continue;const e=this.getItem(jc(this.persistenceKey,t));if(e){const n=Kc.Si(t,e);n&&(this.Mi=this.Mi.insert(n.clientId,n))}}this.ji();const t=this.storage.getItem(this.Ki);if(t){const e=this.Qi(t);e&&this.Wi(e)}for(const e of this.$i)this.Oi(e);this.$i=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,n){this.Hi(e,t,n),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(zc(this.persistenceKey,e));if(n){const r=Wc.Si(e,n);r&&(t=r.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zc(this.persistenceKey,e))}updateQueryState(e,t,n){this.Xi(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ji(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Er("SharedClientState","READ",e,t),t}setItem(e,t){Er("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Er("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){const t=e;if(t.storageArea===this.storage){if(Er("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Fi)return void kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Li.test(t.key)){if(null==t.newValue){const e=this.er(t.key);return this.nr(e,null)}{const e=this.sr(t.key,t.newValue);if(e)return this.nr(e.clientId,e)}}else if(this.Ui.test(t.key)){if(null!==t.newValue){const e=this.ir(t.key,t.newValue);if(e)return this.rr(e)}}else if(this.qi.test(t.key)){if(null!==t.newValue){const e=this.cr(t.key,t.newValue);if(e)return this.ur(e)}}else if(t.key===this.Ki){if(null!==t.newValue){const e=this.Qi(t.newValue);if(e)return this.Wi(e)}}else if(t.key===this.Bi){const e=function(e){let t=Br.A;if(null!=e)try{const n=JSON.parse(e);Nr("number"==typeof n),t=n}catch(e){kr("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Br.A&&this.sequenceNumberHandler(e)}else if(t.key===this.Gi)return this.syncEngine.ar()}else this.$i.push(t)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,n){const r=new $c(this.currentUser,e,t,n),i=Bc(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Di())}Ji(e){const t=Bc(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){const t={clientId:this.xi,onlineState:e};this.storage.setItem(this.Ki,JSON.stringify(t))}Xi(e,t,n){const r=zc(this.persistenceKey,e),i=new Wc(e,t,n);this.setItem(r,i.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const n=this.er(e);return Kc.Si(n,t)}ir(e,t){const n=this.Ui.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return $c.Si(new wr(i),r,t)}cr(e,t){const n=this.qi.exec(e),r=Number(n[1]);return Wc.Si(r,t)}Qi(e){return Hc.Si(e)}async rr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.hr(e.batchId,e.state,e.error);Er("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const n=t?this.Mi.insert(e,t):this.Mi.remove(e),r=this.zi(this.Mi),i=this.zi(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.dr(s,o).then((()=>{this.Mi=n}))}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=wo();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Yc{constructor(){this._r=new Gc,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,n){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new Gc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Jc{mr(e){}shutdown(){}}class Xc{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Er("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Er("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Zc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class eu{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class tu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.kr=t+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,n,r,i){const s=this.$r(e,t);Er("RestConnection","Sending: ",s,n);const o={};return this.Fr(o,r,i),this.Br(e,s,o,n).then((e=>(Er("RestConnection","Received: ",e),e)),(t=>{throw Sr("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t}))}Lr(e,t,n,r,i){return this.Mr(e,t,n,r,i)}Fr(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+br,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}$r(e,t){const n=Zc[e];return`${this.kr}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,n,r){return new Promise(((i,s)=>{const o=new vr;o.listenOnce(fr.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case dr.NO_ERROR:const t=o.getResponseJson();Er("Connection","XHR received:",JSON.stringify(t)),i(t);break;case dr.TIMEOUT:Er("Connection",'RPC "'+e+'" timed out'),s(new Rr(Ar.DEADLINE_EXCEEDED,"Request time out"));break;case dr.HTTP_ERROR:const n=o.getStatus();if(Er("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ar).indexOf(t)>=0?t:Ar.UNKNOWN}(e.status);s(new Rr(t,e.message))}else s(new Rr(Ar.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Rr(Ar.UNAVAILABLE,"Connection failed."));break;default:xr()}}finally{Er("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);o.send(t,"POST",a,n,15)}))}Ur(e,t,n){const r=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ur(),s=hr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new gr({})),this.Fr(o.initMessageHeaders,t,n),(0,l.uI)()||(0,l.b$)()||(0,l.d)()||(0,l.w1)()||(0,l.Mn)()||(0,l.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=r.join("");Er("Connection","Creating WebChannel: "+a,o);const c=i.createWebChannel(a,o);let u=!1,h=!1;const d=new eu({Ar:e=>{h?Er("Connection","Not sending because WebChannel is closed:",e):(u||(Er("Connection","Opening WebChannel transport."),c.open(),u=!0),Er("Connection","WebChannel sending:",e),c.send(e))},Rr:()=>c.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(c,yr.EventType.OPEN,(()=>{h||Er("Connection","WebChannel transport opened.")})),f(c,yr.EventType.CLOSE,(()=>{h||(h=!0,Er("Connection","WebChannel transport closed"),d.Cr())})),f(c,yr.EventType.ERROR,(e=>{h||(h=!0,Sr("Connection","WebChannel transport errored:",e),d.Cr(new Rr(Ar.UNAVAILABLE,"The operation could not be completed")))})),f(c,yr.EventType.MESSAGE,(e=>{var t;if(!h){const n=e.data[0];Nr(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Er("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=to[e];if(void 0!==t)return io(t)}(e),n=i.message;void 0===t&&(t=Ar.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),h=!0,d.Cr(new Rr(t,n)),c.close()}else Er("Connection","WebChannel received:",n),d.Nr(n)}})),f(s,pr.STAT_EVENT,(e=>{e.stat===mr.PROXY?Er("Connection","Detected buffering proxy"):e.stat===mr.NOPROXY&&Er("Connection","Detected no buffering proxy")})),setTimeout((()=>{d.Dr()}),0),d}}function nu(){return"undefined"!=typeof window?window:null}function ru(){return"undefined"!=typeof document?document:null}function iu(e){return new Ro(e,!0)}class su{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Sn=e,this.timerId=t,this.qr=n,this.Kr=r,this.Gr=i,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),n=Math.max(0,Date.now()-this.Wr),r=Math.max(0,t-n);r>0&&Er("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,r,(()=>(this.Wr=Date.now(),e()))),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class ou{constructor(e,t,n,r,i,s,o,a){this.Sn=e,this.Xr=n,this.Zr=r,this.eo=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new su(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}async stop(){this.oo()&&await this.close(0)}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,(()=>this.lo())))}fo(e){this._o(),this.stream.send(e)}async lo(){if(this.co())return this.close(0)}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}async close(e,t){this._o(),this.wo(),this.ro.cancel(),this.no++,4!==e?this.ro.reset():t&&t.code===Ar.RESOURCE_EXHAUSTED?(kr(t.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.ro.zr()):t&&t.code===Ar.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.mo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.vr(t)}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.no===t&&this.po(e,n)}),(t=>{e((()=>{const e=new Rr(Ar.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Io(e)}))}))}po(e,t){const n=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr((()=>{n((()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,(()=>(this.co()&&(this.state=3),Promise.resolve()))),this.listener.Pr())))})),this.stream.vr((e=>{n((()=>this.Io(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}uo(){this.state=5,this.ro.Hr((async()=>{this.state=0,this.start()}))}Io(e){return Er("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget((()=>this.no===e?t():(Er("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class au extends ou{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.O=i}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xr()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.N?(Nr(void 0===t||"string"==typeof t),ii.fromBase64String(t||"")):(Nr(void 0===t||t instanceof Uint8Array),ii.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ar.UNKNOWN:io(e.code);return new Rr(t,e.message||"")}(o);n=new ko(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=qo(e,r.document.name),s=Mo(r.document.updateTime),o=new Oi({mapValue:{fields:r.document.fields}}),a=Li.newFoundDocument(i,s,o),l=r.targetIds||[],c=r.removedTargetIds||[];n=new Io(l,c,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=qo(e,r.document),s=r.readTime?Mo(r.readTime):Qr.min(),o=Li.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Io([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=qo(e,r.document),s=r.removedTargetIds||[];n=new Io([],s,i,null)}else{if(!("filter"in t))return xr();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new eo(r),s=e.targetId;n=new Eo(s,i)}}return n}(this.O,e),n=function(e){if(!("targetChange"in e))return Qr.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Qr.min():t.readTime?Mo(t.readTime):Qr.min()}(e);return this.listener.To(t,n)}Ao(e){const t={};t.database=zo(this.O),t.addTarget=function(e,t){let n;const r=t.target;return n=$i(r)?{documents:Qo(e,r)}:{query:Yo(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Do(e,t.resumeToken):t.snapshotVersion.compareTo(Qr.min())>0&&(n.readTime=Oo(e,t.snapshotVersion.toTimestamp())),n}(this.O,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xr()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.O,e);n&&(t.labels=n),this.fo(t)}Ro(e){const t={};t.database=zo(this.O),t.removeTarget=e,this.fo(t)}}class lu extends ou{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.O=i,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Nr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function(e,t){return e&&e.length>0?(Nr(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Mo(e.updateTime):Mo(t);return n.isEqual(Qr.min())&&(n=Mo(t)),new Us(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Mo(e.commitTime);return this.listener.Vo(n,t)}return Nr(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=zo(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Ho(this.O,e)))};this.fo(t)}}class cu extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=n,this.O=r,this.Co=!1}No(){if(this.Co)throw new Rr(Ar.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,n){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.eo.Mr(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Rr(Ar.UNKNOWN,e.toString())}))}Lr(e,t,n){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.eo.Lr(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Rr(Ar.UNKNOWN,e.toString())}))}terminate(){this.Co=!0}}class uu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve()))))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(kr(t),this.Oo=!1):Er("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class hu{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=i,this.jo.mr((e=>{n.enqueueAndForget((async()=>{wu(this)&&(Er("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Pr(e);t.Ko.add(4),await fu(t),t.Qo.set("Unknown"),t.Ko.delete(4),await du(t)}(this))}))})),this.Qo=new uu(n,r)}}async function du(e){if(wu(e))for(const t of e.Go)await t(!0)}async function fu(e){for(const t of e.Go)await t(!1)}function pu(e,t){const n=Pr(e);n.qo.has(t.targetId)||(n.qo.set(t.targetId,t),_u(n)?vu(n):Uu(n).co()&&gu(n,t))}function mu(e,t){const n=Pr(e),r=Uu(n);n.qo.delete(t),r.co()&&yu(n,t),0===n.qo.size&&(r.co()?r.ho():wu(n)&&n.Qo.set("Unknown"))}function gu(e,t){e.Wo.Z(t.targetId),Uu(e).Ao(t)}function yu(e,t){e.Wo.Z(t),Uu(e).Ro(t)}function vu(e){e.Wo=new Co({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Tt:t=>e.qo.get(t)||null}),Uu(e).start(),e.Qo.Mo()}function _u(e){return wu(e)&&!Uu(e).oo()&&e.qo.size>0}function wu(e){return 0===Pr(e).Ko.size}function bu(e){e.Wo=void 0}async function Tu(e){e.qo.forEach(((t,n)=>{gu(e,t)}))}async function Iu(e,t){bu(e),_u(e)?(e.Qo.Bo(t),vu(e)):e.Qo.set("Unknown")}async function Eu(e,t,n){if(e.Qo.set("Online"),t instanceof ko&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.qo.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.qo.delete(r),e.Wo.removeTarget(r))}(e,t)}catch(n){Er("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ku(e,n)}else if(t instanceof Io?e.Wo.ct(t):t instanceof Eo?e.Wo._t(t):e.Wo.ht(t),!n.isEqual(Qr.min()))try{const t=await bc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Wo.yt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.qo.get(r);i&&e.qo.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.qo.get(t);if(!n)return;e.qo.set(t,n.withResumeToken(ii.EMPTY_BYTE_STRING,n.snapshotVersion)),yu(e,t);const r=new Ja(n.target,t,1,n.sequenceNumber);gu(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Er("RemoteStore","Failed to raise snapshot:",t),await ku(e,t)}}async function ku(e,t,n){if(!ja(t))throw t;e.Ko.add(1),await fu(e),e.Qo.set("Offline"),n||(n=()=>bc(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Er("RemoteStore","Retrying IndexedDB access"),await n(),e.Ko.delete(1),await du(e)}))}function Su(e,t){return t().catch((n=>ku(e,n,t)))}async function Cu(e){const t=Pr(e),n=Vu(t);let r=t.Uo.length>0?t.Uo[t.Uo.length-1].batchId:-1;for(;xu(t);)try{const e=await Ic(t.localStore,r);if(null===e){0===t.Uo.length&&n.ho();break}r=e.batchId,Nu(t,e)}catch(e){await ku(t,e)}Pu(t)&&Au(t)}function xu(e){return wu(e)&&e.Uo.length<10}function Nu(e,t){e.Uo.push(t);const n=Vu(e);n.co()&&n.bo&&n.vo(t.mutations)}function Pu(e){return wu(e)&&!Vu(e).oo()&&e.Uo.length>0}function Au(e){Vu(e).start()}async function Ru(e){Vu(e).Do()}async function Ou(e){const t=Vu(e);for(const n of e.Uo)t.vo(n.mutations)}async function Du(e,t,n){const r=e.Uo.shift(),i=Qa.from(r,t,n);await Su(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Cu(e)}async function Lu(e,t){t&&Vu(e).bo&&await async function(e,t){if(ro(n=t.code)&&n!==Ar.ABORTED){const n=e.Uo.shift();Vu(e).ao(),await Su(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Cu(e)}var n}(e,t),Pu(e)&&Au(e)}async function Mu(e,t){const n=Pr(e);n.asyncQueue.verifyOperationInProgress(),Er("RemoteStore","RemoteStore received new credentials");const r=wu(n);n.Ko.add(3),await fu(n),r&&n.Qo.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ko.delete(3),await du(n)}async function Fu(e,t){const n=Pr(e);t?(n.Ko.delete(2),await du(n)):t||(n.Ko.add(2),await fu(n),n.Qo.set("Unknown"))}function Uu(e){return e.zo||(e.zo=function(e,t,n){const r=Pr(e);return r.No(),new au(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:Tu.bind(null,e),vr:Iu.bind(null,e),To:Eu.bind(null,e)}),e.Go.push((async t=>{t?(e.zo.ao(),_u(e)?vu(e):e.Qo.set("Unknown")):(await e.zo.stop(),bu(e))}))),e.zo}function Vu(e){return e.Ho||(e.Ho=function(e,t,n){const r=Pr(e);return r.No(),new lu(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:Ru.bind(null,e),vr:Lu.bind(null,e),So:Ou.bind(null,e),Vo:Du.bind(null,e)}),e.Go.push((async t=>{t?(e.Ho.ao(),await Cu(e)):(await e.Ho.stop(),e.Uo.length>0&&(Er("RemoteStore",`Stopping write stream with ${e.Uo.length} pending writes`),e.Uo=[]))}))),e.Ho}class qu{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new qu(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rr(Ar.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ju(e,t){if(kr("AsyncQueue",`${t}: ${e}`),ja(e))return new Rr(Ar.UNAVAILABLE,`${t}: ${e}`);throw e}class Bu{constructor(e){this.comparator=e?(t,n)=>e(t,n)||yi.comparator(t.key,n.key):(e,t)=>yi.comparator(e.key,t.key),this.keyedMap=mo(),this.sortedSet=new so(this.comparator)}static emptySet(e){return new Bu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Bu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class zu{constructor(){this.Jo=new so(yi.comparator)}track(e){const t=e.doc.key,n=this.Jo.get(t);n?0!==e.type&&3===n.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==n.type?this.Jo=this.Jo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jo=this.Jo.remove(t):1===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):xr():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal(((t,n)=>{e.push(n)})),e}}class $u{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new $u(e,t,Bu.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class Wu{constructor(){this.Xo=void 0,this.listeners=[]}}class Ku{constructor(){this.queries=new ec((e=>ys(e)),gs),this.onlineState="Unknown",this.Zo=new Set}}async function Hu(e,t){const n=Pr(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Wu),i)try{s.Xo=await n.onListen(r)}catch(e){const n=ju(e,`Initialization of query '${vs(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.tc(n.onlineState),s.Xo&&t.ec(s.Xo)&&Ju(n)}async function Gu(e,t){const n=Pr(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Qu(e,t){const n=Pr(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.ec(e)&&(r=!0);i.Xo=e}}r&&Ju(n)}function Yu(e,t,n){const r=Pr(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function Ju(e){e.Zo.forEach((e=>{e.next()}))}class Xu{constructor(e,t,n){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=n||{}}ec(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new $u(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.uc&&n||e.docs.isEmpty()&&"Offline"!==t)}rc(e){if(e.docChanges.length>0)return!0;const t=this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}cc(e){e=$u.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class Zu{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class eh{constructor(e){this.O=e}Gs(e){return qo(this.O,e)}js(e){return e.metadata.exists?Ko(this.O,e.document,!1):Li.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Mo(e)}}class th{constructor(e,t,n){this.hc=e,this.localStore=t,this.O=n,this.queries=[],this.documents=[],this.progress=nh(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,n=new eh(this.O);for(const r of e)if(r.metadata.queries){const e=n.Gs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||vo()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Pr(e);let s=vo(),o=fo();for(const e of n){const n=t.Gs(e.metadata.name);e.document&&(s=s.add(n));const r=t.js(e);r.setReadTime(t.Qs(e.metadata.readTime)),o=o.insert(n,r)}const a=i.Bs.newChangeBuffer({trackRemovals:!0}),l=await Ec(i,function(e){return ps(as(ei.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Tc(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Un.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Un.addMatchingKeys(e,s,l.targetId))).next((()=>i.Us.Ts(e,t))).next((()=>t))))))}(this.localStore,new eh(this.O),this.documents,this.hc.id),t=this.fc(this.documents);for(const e of this.queries)await Nc(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",new pc(Object.assign({},this.progress),e)}}function nh(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class rh{constructor(e){this.key=e}}class ih{constructor(e){this.key=e}}class sh{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=vo(),this.mutatedKeys=vo(),this.mc=ws(e),this.gc=new Bu(this.mc)}get yc(){return this.dc}Ic(e,t){const n=t?t.Ec:new zu,r=t?t.gc:this.gc;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=ls(this.query)&&r.size===this.query.limit?r.last():null,l=cs(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=_s(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Tc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.mc(u,a)>0||l&&this.mc(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),ls(this.query)||cs(this.query))for(;s.size>this.query.limit;){const e=ls(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{gc:s,Ec:n,ks:o,mutatedKeys:i}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const i=e.Ec.Yo();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xr()}};return n(e)-n(t)}(e.type,t.type)||this.mc(e.doc,t.doc))),this.Ac(n);const s=t?this.Rc():[],o=0===this.wc.size&&this.current?1:0,a=o!==this._c;return this._c=o,0!==i.length||a?{snapshot:new $u(this.query,e.gc,r,i,e.mutatedKeys,0===o,a,!1),Pc:s}:{Pc:s}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new zu,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach((e=>this.dc=this.dc.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.dc=this.dc.delete(e))),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=vo(),this.gc.forEach((e=>{this.bc(e.key)&&(this.wc=this.wc.add(e.key))}));const t=[];return e.forEach((e=>{this.wc.has(e)||t.push(new ih(e))})),this.wc.forEach((n=>{e.has(n)||t.push(new rh(n))})),t}vc(e){this.dc=e.Ks,this.wc=vo();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return $u.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class oh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ah{constructor(e){this.key=e,this.Sc=!1}}class lh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Dc={},this.Cc=new ec((e=>ys(e)),gs),this.Nc=new Map,this.xc=new Set,this.kc=new so(yi.comparator),this.Oc=new Map,this.Mc=new Rc,this.$c={},this.Fc=new Map,this.Bc=Bl.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}async function ch(e,t){const n=Lh(e);let r,i;const s=n.Cc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Vc();else{const e=await Ec(n.localStore,ps(t));n.isPrimaryClient&&pu(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await uh(n,t,r,"current"===s)}return i}async function uh(e,t,n,r){e.Uc=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ic(n);i.ks&&(i=await Sc(e.localStore,t.query,!1).then((({documents:e})=>t.view.Ic(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return bh(e,t.targetId,o.Pc),o.snapshot}(e,t,n,r);const i=await Sc(e.localStore,t,!0),s=new sh(t,i.Ks),o=s.Ic(i.documents),a=To.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),l=s.applyChanges(o,e.isPrimaryClient,a);bh(e,n,l.Pc);const c=new oh(t,n,s);return e.Cc.set(t,c),e.Nc.has(n)?e.Nc.get(n).push(t):e.Nc.set(n,[t]),l.snapshot}async function hh(e,t){const n=Pr(e),r=n.Cc.get(t),i=n.Nc.get(r.targetId);if(i.length>1)return n.Nc.set(r.targetId,i.filter((e=>!gs(e,t)))),void n.Cc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await kc(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),mu(n.remoteStore,r.targetId),_h(n,r.targetId)})).catch(Hl)):(_h(n,r.targetId),await kc(n.localStore,r.targetId,!0))}async function dh(e,t){const n=Pr(e);try{const e=await function(e,t){const n=Pr(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Un.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Un.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?c=c.withResumeToken(ii.EMPTY_BYTE_STRING,Qr.min()).withLastLimboFreeSnapshotVersion(Qr.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Un.updateTargetData(e,c))}));let a=fo();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Tc(e,s,t.documentUpdates).next((e=>{a=e}))),!r.isEqual(Qr.min())){const t=n.Un.getLastRemoteSnapshotVersion(e).next((t=>n.Un.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Ma.waitFor(o).next((()=>s.apply(e))).next((()=>n.Us.Ts(e,a))).next((()=>a))})).then((e=>(n.Ms=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Oc.get(t);r&&(Nr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Sc=!0:e.modifiedDocuments.size>0?Nr(r.Sc):e.removedDocuments.size>0&&(Nr(r.Sc),r.Sc=!1))})),await Eh(n,e,t)}catch(e){await Hl(e)}}function fh(e,t,n){const r=Pr(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Cc.forEach(((n,r)=>{const i=r.view.tc(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Pr(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.tc(t)&&(r=!0)})),r&&Ju(n)}(r.eventManager,t),e.length&&r.Dc.To(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ph(e,t,n){const r=Pr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Oc.get(t),s=i&&i.key;if(s){let e=new so(yi.comparator);e=e.insert(s,Li.newNoDocument(s,Qr.min()));const n=vo().add(s),i=new bo(Qr.min(),new Map,new lo(Wr),e,n);await dh(r,i),r.kc=r.kc.remove(s),r.Oc.delete(t),Ih(r)}else await kc(r.localStore,t,!1).then((()=>_h(r,t,n))).catch(Hl)}async function mh(e,t){const n=Pr(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Pr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ma.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Nr(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.gs.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.gs.performConsistencyCheck(e))).next((()=>n.Us.Es(e,r)))}))}(n.localStore,t);vh(n,r,null),yh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Eh(n,e)}catch(e){await Hl(e)}}async function gh(e,t,n){const r=Pr(e);try{const e=await function(e,t){const n=Pr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.gs.lookupMutationBatch(e,t).next((t=>(Nr(null!==t),r=t.keys(),n.gs.removeMutationBatch(e,t)))).next((()=>n.gs.performConsistencyCheck(e))).next((()=>n.Us.Es(e,r)))}))}(r.localStore,t);vh(r,t,n),yh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Eh(r,e)}catch(n){await Hl(n)}}function yh(e,t){(e.Fc.get(t)||[]).forEach((e=>{e.resolve()})),e.Fc.delete(t)}function vh(e,t,n){const r=Pr(e);let i=r.$c[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.$c[r.currentUser.toKey()]=i}}function _h(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Nc.get(t))e.Cc.delete(r),n&&e.Dc.qc(r,n);e.Nc.delete(t),e.isPrimaryClient&&e.Mc.si(t).forEach((t=>{e.Mc.containsKey(t)||wh(e,t)}))}function wh(e,t){e.xc.delete(t.path.canonicalString());const n=e.kc.get(t);null!==n&&(mu(e.remoteStore,n),e.kc=e.kc.remove(t),e.Oc.delete(n),Ih(e))}function bh(e,t,n){for(const r of n)r instanceof rh?(e.Mc.addReference(r.key,t),Th(e,r)):r instanceof ih?(Er("SyncEngine","Document no longer in limbo: "+r.key),e.Mc.removeReference(r.key,t),e.Mc.containsKey(r.key)||wh(e,r.key)):xr()}function Th(e,t){const n=t.key,r=n.path.canonicalString();e.kc.get(n)||e.xc.has(r)||(Er("SyncEngine","New document in limbo: "+n),e.xc.add(r),Ih(e))}function Ih(e){for(;e.xc.size>0&&e.kc.size<e.maxConcurrentLimboResolutions;){const t=e.xc.values().next().value;e.xc.delete(t);const n=new yi(ei.fromString(t)),r=e.Bc.next();e.Oc.set(r,new ah(n)),e.kc=e.kc.insert(n,r),pu(e.remoteStore,new Ja(ps(as(n.path)),r,2,Br.A))}}async function Eh(e,t,n){const r=Pr(e),i=[],s=[],o=[];r.Cc.isEmpty()||(r.Cc.forEach(((e,a)=>{o.push(r.Uc(a,t,n).then((e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=gc.Ss(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Dc.To(i),await async function(e,t){const n=Pr(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ma.forEach(t,(t=>Ma.forEach(t.vs,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ma.forEach(t.Vs,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ja(e))throw e;Er("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,s))}async function kh(e,t){const n=Pr(e);if(!n.currentUser.isEqual(t)){Er("SyncEngine","User change. New user:",t.toKey());const e=await wc(n.localStore,t);n.currentUser=t,function(e,t){e.Fc.forEach((e=>{e.forEach((e=>{e.reject(new Rr(Ar.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fc.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Eh(n,e.qs)}}function Sh(e,t){const n=Pr(e),r=n.Oc.get(t);if(r&&r.Sc)return vo().add(r.key);{let e=vo();const r=n.Nc.get(t);if(!r)return e;for(const t of r){const r=n.Cc.get(t);e=e.unionWith(r.view.yc)}return e}}async function Ch(e,t){const n=Pr(e),r=await Sc(n.localStore,t.query,!0),i=t.view.vc(r);return n.isPrimaryClient&&bh(n,t.targetId,i.Pc),i}async function xh(e){const t=Pr(e);return xc(t.localStore).then((e=>Eh(t,e)))}async function Nh(e,t,n,r){const i=Pr(e),s=await function(e,t){const n=Pr(e),r=Pr(n.gs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Ge(e,t).next((t=>t?n.Us.Es(e,t):Ma.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Cu(i.remoteStore):"acknowledged"===n||"rejected"===n?(vh(i,t,r||null),yh(i,t),function(e,t){Pr(Pr(e).gs).Qe(t)}(i.localStore,t)):xr(),await Eh(i,s)):Er("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Ph(e,t,n){const r=Pr(e),i=[],s=[];for(const e of t){let t;const n=r.Nc.get(e);if(n&&0!==n.length){t=await Ec(r.localStore,ps(n[0]));for(const e of n){const t=r.Cc.get(e),n=await Ch(r,t);n.snapshot&&s.push(n.snapshot)}}else{const n=await Cc(r.localStore,e);t=await Ec(r.localStore,n),await uh(r,Ah(n),e,!1)}i.push(t)}return r.Dc.To(s),i}function Ah(e){return os(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Rh(e){const t=Pr(e);return Pr(Pr(t.localStore).persistence).ds()}async function Oh(e,t,n,r){const i=Pr(e);if(i.Lc)Er("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(t))switch(n){case"current":case"not-current":{const e=await xc(i.localStore),r=bo.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await Eh(i,e,r);break}case"rejected":await kc(i.localStore,t,!0),_h(i,t,r);break;default:xr()}}async function Dh(e,t,n){const r=Lh(e);if(r.Lc){for(const e of t){if(r.Nc.has(e)){Er("SyncEngine","Adding an already active target "+e);continue}const t=await Cc(r.localStore,e),n=await Ec(r.localStore,t);await uh(r,Ah(t),n.targetId,!1),pu(r.remoteStore,n)}for(const e of n)r.Nc.has(e)&&await kc(r.localStore,e,!1).then((()=>{mu(r.remoteStore,e),_h(r,e)})).catch(Hl)}}function Lh(e){const t=Pr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=dh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ph.bind(null,t),t.Dc.To=Qu.bind(null,t.eventManager),t.Dc.qc=Yu.bind(null,t.eventManager),t}function Mh(e){const t=Pr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gh.bind(null,t),t}class Fh{constructor(){this.synchronizeTabs=!1}async initialize(e){this.O=iu(e.databaseInfo.databaseId),this.sharedClientState=this.Gc(e),this.persistence=this.jc(e),await this.persistence.start(),this.gcScheduler=this.Qc(e),this.localStore=this.Wc(e)}Qc(e){return null}Wc(e){return _c(this.persistence,new yc,e.initialUser,this.O)}jc(e){return new Uc(qc.bi,this.O)}Gc(e){return new Yc}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Uh extends Fh{constructor(e,t,n){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await async function(e){const t=Pr(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",(e=>function(e){const t=sc(e);let n=Qr.min();return t.Qt({index:va.readTimeIndex,reverse:!0},((e,t,r)=>{t.readTime&&(n=nl(t.readTime)),r.done()})).next((()=>n))}(e))).then((e=>{t.Fs=e}))}(this.localStore),await this.zc.initialize(this,e),await Mh(this.zc.syncEngine),await Cu(this.zc.remoteStore),await this.persistence.Hn((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}Wc(e){return _c(this.persistence,new yc,e.initialUser,this.O)}Qc(e){const t=this.persistence.referenceDelegate.garbageCollector;return new Yl(t,e.asyncQueue)}jc(e){const t=fc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Dl.withCacheSize(this.cacheSizeBytes):Dl.DEFAULT;return new uc(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,nu(),ru(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new Yc}}class Vh extends Uh{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.zc.syncEngine;this.sharedClientState instanceof Qc&&(this.sharedClientState.syncEngine={hr:Nh.bind(null,t),lr:Oh.bind(null,t),dr:Dh.bind(null,t),ds:Rh.bind(null,t),ar:xh.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Hn((async e=>{await async function(e,t){const n=Pr(e);if(Lh(n),Mh(n),!0===t&&!0!==n.Lc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Ph(n,e.toArray());n.Lc=!0,await Fu(n.remoteStore,!0);for(const e of t)pu(n.remoteStore,e)}else if(!1===t&&!1!==n.Lc){const e=[];let t=Promise.resolve();n.Nc.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(_h(n,i),kc(n.localStore,i,!0)))),mu(n.remoteStore,i)})),await t,await Ph(n,e),function(e){const t=Pr(e);t.Oc.forEach(((e,n)=>{mu(t.remoteStore,n)})),t.Mc.ii(),t.Oc=new Map,t.kc=new so(yi.comparator)}(n),n.Lc=!1,await Fu(n.remoteStore,!1)}}(this.zc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())}))}Gc(e){const t=nu();if(!Qc.Vt(t))throw new Rr(Ar.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=fc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qc(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class qh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>fh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=kh.bind(null,this.syncEngine),await Fu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ku}createDatastore(e){const t=iu(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new tu(r));var r;return function(e,t,n,r){return new cu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>fh(this.syncEngine,e,0),s=Xc.Vt()?new Xc:new Jc,new hu(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new lh(e,t,n,r,i,s);return o&&(a.Lc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Pr(e);Er("RemoteStore","RemoteStore shutting down."),t.Ko.add(5),await fu(t),t.jo.shutdown(),t.Qo.set("Unknown")}(this.remoteStore)}}function jh(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class Bh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class zh{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new Or,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then((e=>{e&&e.ac()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Yc.cancel()}async getMetadata(){return this.metadata.promise}async Kc(){return await this.getMetadata(),this.Zc()}async Zc(){const e=await this.tu();if(null===e)return null;const t=this.Xc.decode(e),n=Number(t);isNaN(n)&&this.eu(`length string (${t}) is not valid number`);const r=await this.nu(n);return new Zu(JSON.parse(r),e.length+n)}su(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async tu(){for(;this.su()<0&&!await this.iu(););if(0===this.buffer.length)return null;const e=this.su();e<0&&this.eu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async nu(e){for(;this.buffer.length<e;)await this.iu()&&this.eu("Reached the end of bundle when more is expected.");const t=this.Xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}async iu(){const e=await this.Yc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class $h{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Rr(Ar.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Pr(e),r=zo(n.O)+"/documents",i={documents:t.map((e=>Vo(n.O,e)))},s=await n.Lr("BatchGetDocuments",r,i),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Nr(!!t.found),t.found.name,t.found.updateTime;const n=qo(e,t.found.name),r=Mo(t.found.updateTime),i=new Oi({mapValue:{fields:t.found.fields}});return Li.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Nr(!!t.missing),Nr(!!t.readTime);const n=qo(e,t.missing),r=Mo(t.readTime);return Li.newNoDocument(n,r)}(e,t):xr()}(n.O,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Nr(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=yi.fromPath(t);this.mutations.push(new Zs(n,this.precondition(n)))})),await async function(e,t){const n=Pr(e),r=zo(n.O)+"/documents",i={writes:t.map((e=>Ho(n.O,e)))};await n.Mr("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xr();t=Qr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Rr(Ar.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Vs.updateTime(t):Vs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Qr.min()))throw new Rr(Ar.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vs.updateTime(t)}return Vs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Wh{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ru=5,this.ro=new su(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){this.ro.Hr((async()=>{const e=new $h(this.datastore),t=this.cu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.uu(e)}))))})).catch((e=>{this.uu(e)}))}))}cu(e){try{const t=this.updateFunction(e);return!pi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget((()=>(this.ou(),Promise.resolve())))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ro(t)}return!1}}class Kh{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=wr.UNAUTHENTICATED,this.clientId=$r.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Er("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Er("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Rr(Ar.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ju(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Hh(e,t){e.asyncQueue.verifyOperationInProgress(),Er("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await wc(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function Gh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Qh(e);Er("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Mu(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Mu(t.remoteStore,n))),e.onlineComponents=t}async function Qh(e){return e.offlineComponents||(Er("FirestoreClient","Using default OfflineComponentProvider"),await Hh(e,new Fh)),e.offlineComponents}async function Yh(e){return e.onlineComponents||(Er("FirestoreClient","Using default OnlineComponentProvider"),await Gh(e,new qh)),e.onlineComponents}function Jh(e){return Qh(e).then((e=>e.persistence))}function Xh(e){return Qh(e).then((e=>e.localStore))}function Zh(e){return Yh(e).then((e=>e.remoteStore))}function ed(e){return Yh(e).then((e=>e.syncEngine))}async function td(e){const t=await Yh(e),n=t.eventManager;return n.onListen=ch.bind(null,t.syncEngine),n.onUnlisten=hh.bind(null,t.syncEngine),n}function nd(e,t,n={}){const r=new Or;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Bh({next:s=>{t.enqueueAndForget((()=>Gu(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Rr(Ar.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Rr(Ar.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Xu(as(n.path),s,{includeMetadataChanges:!0,uc:!0});return Hu(e,o)}(await td(e),e.asyncQueue,t,n,r))),r.promise}function rd(e,t,n={}){const r=new Or;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Bh({next:n=>{t.enqueueAndForget((()=>Gu(e,o))),n.fromCache&&"server"===r.source?i.reject(new Rr(Ar.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Xu(n,s,{includeMetadataChanges:!0,uc:!0});return Hu(e,o)}(await td(e),e.asyncQueue,t,n,r))),r.promise}const id=new Map;function sd(e,t,n){if(!n)throw new Rr(Ar.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function od(e,t,n,r){if(!0===t&&!0===r)throw new Rr(Ar.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ad(e){if(!yi.isDocumentKey(e))throw new Rr(Ar.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ld(e){if(yi.isDocumentKey(e))throw new Rr(Ar.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function cd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":xr()}function ud(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Rr(Ar.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cd(e);throw new Rr(Ar.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function hd(e,t){if(t<=0)throw new Rr(Ar.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class dd{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Rr(Ar.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Rr(Ar.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,od("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fd{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dd({}),this._settingsFrozen=!1,e instanceof fi?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Rr(Ar.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fi(e.options.projectId)}(e))}get app(){if(!this._app)throw new Rr(Ar.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Rr(Ar.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dd(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Lr;switch(e.type){case"gapi":const t=e.client;return Nr(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Vr(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Rr(Ar.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=id.get(e);t&&(Er("ComponentProvider","Removing Datastore"),id.delete(e),t.terminate())}(this),Promise.resolve()}}class pd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pd(this.firestore,e,this._key)}}class md{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new md(this.firestore,e,this._query)}}class gd extends md{constructor(e,t,n){super(e,t,as(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pd(this.firestore,null,new yi(e))}withConverter(e){return new gd(this.firestore,e,this._path)}}function yd(e,t,...n){if(e=(0,l.m9)(e),sd("collection","path",t),e instanceof fd){const r=ei.fromString(t,...n);return ld(r),new gd(e,null,r)}{if(!(e instanceof pd||e instanceof gd))throw new Rr(Ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ei.fromString(t,...n));return ld(r),new gd(e.firestore,null,r)}}function vd(e,t,...n){if(e=(0,l.m9)(e),1===arguments.length&&(t=$r.R()),sd("doc","path",t),e instanceof fd){const r=ei.fromString(t,...n);return ad(r),new pd(e,null,new yi(r))}{if(!(e instanceof pd||e instanceof gd))throw new Rr(Ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ei.fromString(t,...n));return ad(r),new pd(e.firestore,e instanceof gd?e.converter:null,new yi(r))}}function _d(e,t){return e=(0,l.m9)(e),t=(0,l.m9)(t),(e instanceof pd||e instanceof gd)&&(t instanceof pd||t instanceof gd)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function wd(e,t){return e=(0,l.m9)(e),t=(0,l.m9)(t),e instanceof md&&t instanceof md&&e.firestore===t.firestore&&gs(e._query,t._query)&&e.converter===t.converter}class bd{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new su(this,"async_queue_retry"),this.yu=()=>{const e=ru();e&&Er("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ro.Yr()};const e=ru();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=ru();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise((()=>{}));const t=new Or;return this.Iu((()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.lu.push(e),this.Eu())))}async Eu(){if(0!==this.lu.length){try{await this.lu[0](),this.lu.shift(),this.ro.reset()}catch(e){if(!ja(e))throw e;Er("AsyncQueue","Operation failed with retryable error: "+e)}this.lu.length>0&&this.ro.Hr((()=>this.Eu()))}}Iu(e){const t=this.hu.then((()=>(this.wu=!0,e().catch((e=>{this._u=e,this.wu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw kr("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.wu=!1,e))))));return this.hu=t,t}enqueueAfterDelay(e,t,n){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const r=qu.createAndSchedule(this,e,t,n,(e=>this.Tu(e)));return this.du.push(r),r}pu(){this._u&&xr()}verifyOperationInProgress(){}async Au(){let e;do{e=this.hu,await e}while(e!==this.hu)}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then((()=>{this.du.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()}))}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function Td(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class Id{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ed extends fd{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new bd,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Sd(this),this._firestoreClient.terminate()}}function kd(e){return e._firestoreClient||Sd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Sd(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new di(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Kh(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Cd(e,t,n){const r=new Or;return e.asyncQueue.enqueue((async()=>{try{await Hh(e,n),await Gh(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===Ar.FAILED_PRECONDITION||e.code===Ar.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then((()=>r.promise))}function xd(e){if(e._initialized||e._terminated)throw new Rr(Ar.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Nd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Rr(Ar.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pd(ii.fromBase64String(e))}catch(e){throw new Rr(Ar.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Pd(ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ad{constructor(e){this._methodName=e}}class Rd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Rr(Ar.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Rr(Ar.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wr(this._lat,e._lat)||Wr(this._long,e._long)}}const Od=/^__.*__$/;class Dd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Gs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hs(e,this.data,t,this.fieldTransforms)}}class Ld{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Gs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Md(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xr()}}class Fd{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.O=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new Fd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.Nu(e),r}xu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.vu(),r}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return rf(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(Md(this.Vu)&&Od.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class Ud{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=n||iu(e)}Fu(e,t,n,r=!1){return new Fd({Vu:e,methodName:t,$u:n,path:ni.emptyPath(),Cu:!1,Mu:r},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function Vd(e){const t=e._freezeSettings(),n=iu(e._databaseId);return new Ud(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qd(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Zd("Data must be an object, but it was:",o,r);const a=Jd(r,o);let l,c;if(s.merge)l=new ri(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ef(t,r,n);if(!o.contains(i))throw new Rr(Ar.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);sf(e,i)||e.push(i)}l=new ri(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Dd(new Oi(a),l,c)}class jd extends Ad{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Ou(`${this._methodName}() can only appear at the top level of your update data`):e.Ou(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jd}}function Bd(e,t,n){return new Fd({Vu:3,$u:t.settings.$u,methodName:e._methodName,Cu:n},t.databaseId,t.O,t.ignoreUndefinedProperties)}class zd extends Ad{_toFieldTransform(e){return new Fs(e.path,new Ns)}isEqual(e){return e instanceof zd}}class $d extends Ad{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=Bd(this,e,!0),n=this.Bu.map((e=>Yd(e,t))),r=new Ps(n);return new Fs(e.path,r)}isEqual(e){return this===e}}class Wd extends Ad{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=Bd(this,e,!0),n=this.Bu.map((e=>Yd(e,t))),r=new Rs(n);return new Fs(e.path,r)}isEqual(e){return this===e}}class Kd extends Ad{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Ds(e.O,Es(e.O,this.Lu));return new Fs(e.path,t)}isEqual(e){return this===e}}function Hd(e,t,n,r){const i=e.Fu(1,t,n);Zd("Data must be an object, but it was:",i,r);const s=[],o=Oi.empty();Jr(r,((e,r)=>{const a=nf(t,e,n);r=(0,l.m9)(r);const c=i.xu(a);if(r instanceof jd)s.push(a);else{const e=Yd(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ri(s);return new Ld(o,a,i.fieldTransforms)}function Gd(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[ef(t,r,n)],c=[i];if(s.length%2!=0)throw new Rr(Ar.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)a.push(ef(t,s[e])),c.push(s[e+1]);const u=[],h=Oi.empty();for(let e=a.length-1;e>=0;--e)if(!sf(u,a[e])){const t=a[e];let n=c[e];n=(0,l.m9)(n);const r=o.xu(t);if(n instanceof jd)u.push(t);else{const e=Yd(n,r);null!=e&&(u.push(t),h.set(t,e))}}const d=new ri(u);return new Ld(h,d,o.fieldTransforms)}function Qd(e,t,n,r=!1){return Yd(n,e.Fu(r?4:3,t))}function Yd(e,t){if(Xd(e=(0,l.m9)(e)))return Zd("Unsupported field value:",t,e),Jd(e,t);if(e instanceof Ad)return function(e,t){if(!Md(t.Vu))throw t.Ou(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Ou(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Cu&&4!==t.Vu)throw t.Ou("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Yd(i,t.ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Es(t.O,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Gr.fromDate(e);return{timestampValue:Oo(t.O,n)}}if(e instanceof Gr){const n=new Gr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Oo(t.O,n)}}if(e instanceof Rd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Pd)return{bytesValue:Do(t.O,e._byteString)};if(e instanceof pd){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Ou(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Fo(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ou(`Unsupported field value: ${cd(e)}`)}(e,t)}function Jd(e,t){const n={};return Xr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jr(e,((e,r)=>{const i=Yd(r,t.Du(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Xd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Gr||e instanceof Rd||e instanceof Pd||e instanceof pd||e instanceof Ad)}function Zd(e,t,n){if(!Xd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=cd(n);throw"an object"===r?t.Ou(e+" a custom object"):t.Ou(e+" "+r)}}function ef(e,t,n){if((t=(0,l.m9)(t))instanceof Nd)return t._internalPath;if("string"==typeof t)return nf(e,t);throw rf("Field path arguments must be of type string or ",e,!1,void 0,n)}const tf=new RegExp("[~\\*/\\[\\]]");function nf(e,t,n){if(t.search(tf)>=0)throw rf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Nd(...t.split("."))._internalPath}catch(r){throw rf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function rf(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Rr(Ar.INVALID_ARGUMENT,a+e+l)}function sf(e,t){return e.some((e=>e.isEqual(t)))}class of{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new af(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class af extends of{data(){return super.data()}}function lf(e,t){return"string"==typeof t?nf(e,t):t instanceof Nd?t._internalPath:t._delegate._internalPath}class cf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uf extends of{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(lf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class hf extends uf{data(e={}){return super.data(e)}}class df{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new cf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new hf(this._firestore,this._userDataWriter,n.key,n,new cf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Rr(Ar.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new hf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new cf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new hf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ff(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ff(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xr()}}function pf(e,t){return e instanceof uf&&t instanceof uf?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof df&&t instanceof df&&e._firestore===t._firestore&&wd(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function mf(e){if(cs(e)&&0===e.explicitOrderBy.length)throw new Rr(Ar.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gf{}function yf(e,...t){for(const n of t)e=n._apply(e);return e}class vf extends gf{constructor(e,t,n){super(),this.Uu=e,this.qu=t,this.Ku=n,this.type="where"}_apply(e){const t=Vd(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Rr(Ar.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){kf(o,s);const t=[];for(const n of o)t.push(Ef(r,e,n));a={arrayValue:{values:t}}}else a=Ef(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||kf(o,s),a=Qd(n,"where",o,"in"===s||"not-in"===s);const l=Wi.create(i,s,a);return function(e,t){if(t.S()){const n=hs(e);if(null!==n&&!n.isEqual(t.field))throw new Rr(Ar.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=us(e);null!==r&&Sf(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Rr(Ar.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Rr(Ar.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,l),l}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new md(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class _f extends gf{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Rr(Ar.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Rr(Ar.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ts(t,n);return function(e,t){if(null===us(e)){const n=hs(e);null!==n&&Sf(0,n,t.field)}}(e,r),r}(e._query,this.Uu,this.Gu);return new md(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ss(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class wf extends gf{constructor(e,t,n){super(),this.type=e,this.ju=t,this.Qu=n}_apply(e){return new md(e.firestore,e.converter,ms(e._query,this.ju,this.Qu))}}class bf extends gf{constructor(e,t,n){super(),this.type=e,this.Wu=t,this.zu=n}_apply(e){const t=If(e,this.type,this.Wu,this.zu);return new md(e.firestore,e.converter,function(e,t){return new ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Tf extends gf{constructor(e,t,n){super(),this.type=e,this.Wu=t,this.zu=n}_apply(e){const t=If(e,this.type,this.Wu,this.zu);return new md(e.firestore,e.converter,function(e,t){return new ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function If(e,t,n,r){if(n[0]=(0,l.m9)(n[0]),n[0]instanceof of)return function(e,t,n,r,i){if(!r)throw new Rr(Ar.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of fs(e))if(n.field.isKeyField())s.push(Si(t,r.key));else{const e=r.data.field(n.field);if(ci(e))throw new Rr(Ar.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new Rr(Ar.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new es(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Vd(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Rr(Ar.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const l=i[s];if(o[s].field.isKeyField()){if("string"!=typeof l)throw new Rr(Ar.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof l}`);if(!ds(e)&&-1!==l.indexOf("/"))throw new Rr(Ar.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${l}' contains a slash.`);const n=e.path.child(ei.fromString(l));if(!yi.isDocumentKey(n))throw new Rr(Ar.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new yi(n);a.push(Si(t,i))}else{const e=Qd(n,r,l);a.push(e)}}return new es(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Ef(e,t,n){if("string"==typeof(n=(0,l.m9)(n))){if(""===n)throw new Rr(Ar.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ds(t)&&-1!==n.indexOf("/"))throw new Rr(Ar.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ei.fromString(n));if(!yi.isDocumentKey(r))throw new Rr(Ar.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Si(e,new yi(r))}if(n instanceof pd)return Si(e,n._key);throw new Rr(Ar.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cd(n)}.`)}function kf(e,t){if(!Array.isArray(e)||0===e.length)throw new Rr(Ar.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Rr(Ar.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Sf(e,t,n){if(!n.isEqual(t))throw new Rr(Ar.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Cf{convertValue(e,t="none"){switch(_i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xr()}}convertObject(e,t){const n={};return Jr(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Rd(ai(e.latitude),ai(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ui(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(hi(e));default:return null}}convertTimestamp(e){const t=oi(e);return new Gr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ei.fromString(e);Nr(oa(n));const r=new fi(n.get(1),n.get(3)),i=new yi(n.popFirst(5));return r.isEqual(t)||kr(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function xf(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Nf extends Cf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pd(this.firestore,null,t)}}class Pf{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vd(e)}set(e,t,n){this._verifyNotCommitted();const r=Af(e,this._firestore),i=xf(r.converter,t,n),s=qd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Vs.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=Af(e,this._firestore);let s;return s="string"==typeof(t=(0,l.m9)(t))||t instanceof Nd?Gd(this._dataReader,"WriteBatch.update",i._key,t,n,r):Hd(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Vs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Af(e,this._firestore);return this._mutations=this._mutations.concat(new Xs(t._key,Vs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Rr(Ar.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Af(e,t){if((e=(0,l.m9)(e)).firestore!==t)throw new Rr(Ar.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Rf extends Cf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pd(this.firestore,null,t)}}function Of(e,t,n){e=ud(e,pd);const r=ud(e.firestore,Ed),i=xf(e.converter,t,n);return Mf(r,[qd(Vd(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Vs.none())])}function Df(e,t,n,...r){e=ud(e,pd);const i=ud(e.firestore,Ed),s=Vd(i);let o;return o="string"==typeof(t=(0,l.m9)(t))||t instanceof Nd?Gd(s,"updateDoc",e._key,t,n,r):Hd(s,"updateDoc",e._key,t),Mf(i,[o.toMutation(e._key,Vs.exists(!0))])}function Lf(e,...t){var n,r,i;e=(0,l.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Td(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Td(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,u,h;if(e instanceof pd)u=ud(e.firestore,Ed),h=as(e._key.path),c={next:n=>{t[o]&&t[o](Ff(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=ud(e,md);u=ud(n.firestore,Ed),h=n._query;const r=new Rf(u);c={next:e=>{t[o]&&t[o](new df(u,r,n,e))},error:t[o+1],complete:t[o+2]},mf(e._query)}return function(e,t,n,r){const i=new Bh(r),s=new Xu(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Hu(await td(e),s))),()=>{i.Jc(),e.asyncQueue.enqueueAndForget((async()=>Gu(await td(e),s)))}}(kd(u),h,a,c)}function Mf(e,t){return function(e,t){const n=new Or;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Mh(e);try{const e=await function(e,t){const n=Pr(e),r=Gr.now(),i=t.reduce(((e,t)=>e.add(t.key)),vo());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.Us.Es(e,i).next((i=>{s=i;const o=[];for(const e of t){const t=$s(e,s.get(e.key));null!=t&&o.push(new Gs(e.key,t,Di(t.value.mapValue),Vs.exists(!0)))}return n.gs.addMutationBatch(e,r,o,t)})))).then((e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.$c[e.currentUser.toKey()];r||(r=new so(Wr)),r=r.insert(t,n),e.$c[e.currentUser.toKey()]=r}(r,e.batchId,n),await Eh(r,e.changes),await Cu(r.remoteStore)}catch(e){const t=ju(e,"Failed to persist write");n.reject(t)}}(await ed(e),t,n))),n.promise}(kd(e),t)}function Ff(e,t,n){const r=n.docs.get(t._key),i=new Rf(e);return new uf(e,i,t._key,r,new cf(n.hasPendingWrites,n.fromCache),t.converter)}class Uf extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vd(e)}get(e){const t=Af(e,this._firestore),n=new Nf(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return xr();const r=e[0];if(r.isFoundDocument())return new of(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new of(this._firestore,n,t._key,null,t.converter);throw xr()}))}set(e,t,n){const r=Af(e,this._firestore),i=xf(r.converter,t,n),s=qd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=Af(e,this._firestore);let s;return s="string"==typeof(t=(0,l.m9)(t))||t instanceof Nd?Gd(this._dataReader,"Transaction.update",i._key,t,n,r):Hd(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=Af(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Af(e,this._firestore),n=new Rf(this._firestore);return super.get(e).then((e=>new uf(this._firestore,n,t._key,e._document,new cf(!1,!1),t.converter)))}}function Vf(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Rr("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function qf(){if("undefined"==typeof Uint8Array)throw new Rr("unimplemented","Uint8Arrays are not available in this environment.")}function jf(){if("undefined"==typeof atob)throw new Rr("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){!function(e){br=e}(s.SDK_VERSION),(0,s._registerComponent)(new o.wA("firestore",((e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new Ed(r,new Fr(e.getProvider("auth-internal")),new jr(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i}),"PUBLIC")),(0,s.registerVersion)(_r,"3.4.5",e),(0,s.registerVersion)(_r,"3.4.5","esm2017")}();class Bf{constructor(e){this._delegate=e}static fromBase64String(e){return jf(),new Bf(Pd.fromBase64String(e))}static fromUint8Array(e){return qf(),new Bf(Pd.fromUint8Array(e))}toBase64(){return jf(),this._delegate.toBase64()}toUint8Array(){return qf(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class $f{enableIndexedDbPersistence(e,t){return function(e,t){xd(e=ud(e,Ed));const n=kd(e),r=e._freezeSettings(),i=new qh;return Cd(n,i,new Uh(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){xd(e=ud(e,Ed));const t=kd(e),n=e._freezeSettings(),r=new qh;return Cd(t,r,new Vh(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Rr(Ar.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Or;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ua.Vt())return Promise.resolve();const t=e+"main";await Ua.delete(t)}(fc(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Wf{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof fi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Sr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=ud(e,fd))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Sr("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=wr.MOCK_USER;else{t=(0,l.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Rr(Ar.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new wr(s)}e._authCredentials=new Mr(new Dr(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Jh(e),n=await Zh(e);return t.setNetworkEnabled(!0),function(e){const t=Pr(e);return t.Ko.delete(0),du(t)}(n)}))}(kd(e=ud(e,Ed)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Jh(e),n=await Zh(e);return t.setNetworkEnabled(!1),async function(e){const t=Pr(e);t.Ko.add(0),await fu(t),t.Qo.set("Offline")}(n)}))}(kd(e=ud(e,Ed)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,od("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Pr(e);wu(n.remoteStore)||Er("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Pr(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.gs.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Fc.get(e)||[];r.push(t),n.Fc.set(e,r)}catch(e){const n=ju(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ed(e),t))),t.promise}(kd(e=ud(e,Ed)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new Bh(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Pr(e).Zo.add(t),t.next()}(await td(e),n))),()=>{n.Jc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Pr(e).Zo.delete(t)}(await td(e),n)))}}(kd(e=ud(e,Ed)),Td(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Rr("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sp(this,yd(this._delegate,e))}catch(e){throw Jf(e,"collection()","Firestore.collection()")}}doc(e){try{return new Yf(this,vd(this._delegate,e))}catch(e){throw Jf(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new np(this,function(e,t){if(e=ud(e,fd),sd("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Rr(Ar.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new md(e,null,function(e){return new ss(ei.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw Jf(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t){return function(e,t){const n=new Or;return e.asyncQueue.enqueueAndForget((async()=>{const r=await function(e){return Yh(e).then((e=>e.datastore))}(e);new Wh(e.asyncQueue,r,t,n).run()})),n.promise}(kd(e=ud(e,Ed)),(n=>t(new Uf(e,n))))}(this._delegate,(t=>e(new Hf(this,t))))}batch(){return kd(this._delegate),new Gf(new Pf(this._delegate,(e=>Mf(this._delegate,e))))}loadBundle(e){return function(e,t){const n=kd(e=ud(e,Ed)),r=new Id;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new zh(e,t)}(function(e,t){if(e instanceof Uint8Array)return jh(e,t);if(e instanceof ArrayBuffer)return jh(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,iu(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Pr(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Pr(e),r=Mo(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kn.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(nh(r));const i=new th(r,e.localStore,t.O);let s=await t.Kc();for(;s;){const e=await i.lc(s);e&&n._updateProgress(e),s=await t.Kc()}const o=await i.complete();await Eh(e,o.ws,void 0),await function(e,t){const n=Pr(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kn.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress)}catch(e){Sr("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}})(r,t,n).then((()=>{r.sharedClientState.notifyBundleLoaded()}))}(await ed(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Pr(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kn.getNamedQuery(e,t)))}(await Xh(e),t)))}(kd(e=ud(e,Ed)),t).then((t=>t?new md(e,null,t.query):null))}(this._delegate,e).then((e=>e?new np(this,e):null))}}class Kf extends Cf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bf(new Pd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Yf.forKey(t,this.firestore,null)}}class Hf{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Kf(e)}get(e){const t=op(e);return this._delegate.get(t).then((e=>new ep(this._firestore,new uf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=op(e);return n?(Vf("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=op(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=op(e);return this._delegate.delete(t),this}}class Gf{constructor(e){this._delegate=e}set(e,t,n){const r=op(e);return n?(Vf("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=op(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=op(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qf{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new hf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new tp(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Qf.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Qf(e,new Kf(e),t),r.set(t,i)),i}}Qf.INSTANCES=new WeakMap;class Yf{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Kf(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Rr("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Yf(t,new pd(t._delegate,n,new yi(e)))}static forKey(e,t,n){return new Yf(t,new pd(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new sp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sp(this.firestore,yd(this._delegate,e))}catch(e){throw Jf(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,l.m9)(e))instanceof pd&&_d(this._delegate,e)}set(e,t){t=Vf("DocumentReference.set",t);try{return t?Of(this._delegate,e,t):Of(this._delegate,e)}catch(e){throw Jf(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?Df(this._delegate,e):Df(this._delegate,e,t,...n)}catch(e){throw Jf(e,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return Mf(ud(e.firestore,Ed),[new Xs(e._key,Vs.none())])}(this._delegate)}onSnapshot(...e){const t=Xf(e),n=Zf(e,(e=>new ep(this.firestore,new uf(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Lf(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=ud(e,pd);const t=ud(e.firestore,Ed),n=kd(t),r=new Rf(t);return function(e,t){const n=new Or;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Pr(e);return n.persistence.runTransaction("read document","readonly",(e=>n.Us.ys(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Rr(Ar.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=ju(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await Xh(e),t,n))),n.promise}(n,e._key).then((n=>new uf(t,r,e._key,n,new cf(null!==n&&n.hasLocalMutations,!0),e.converter)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=ud(e,pd);const t=ud(e.firestore,Ed);return nd(kd(t),e._key,{source:"server"}).then((n=>Ff(t,e,n)))}(this._delegate):function(e){e=ud(e,pd);const t=ud(e.firestore,Ed);return nd(kd(t),e._key).then((n=>Ff(t,e,n)))}(this._delegate),t.then((e=>new ep(this.firestore,new uf(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Yf(this.firestore,e?this._delegate.withConverter(Qf.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Jf(e,t,n){return e.message=e.message.replace(t,n),e}function Xf(e){for(const t of e)if("object"==typeof t&&!zf(t))return t;return{}}function Zf(e,t){var n,r;let i;return i=zf(e[0])?e[0]:zf(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ep{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Yf(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return pf(this._delegate,e._delegate)}}class tp extends ep{data(e){const t=this._delegate.data(e);return function(e,t){e||xr()}(void 0!==t),t}}class np{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Kf(e)}where(e,t,n){try{return new np(this.firestore,yf(this._delegate,function(e,t,n){const r=t,i=lf("where",e);return new vf(i,r,n)}(e,t,n)))}catch(e){throw Jf(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new np(this.firestore,yf(this._delegate,function(e,t="asc"){const n=t,r=lf("orderBy",e);return new _f(r,n)}(e,t)))}catch(e){throw Jf(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new np(this.firestore,yf(this._delegate,function(e){return hd("limit",e),new wf("limit",e,"F")}(e)))}catch(e){throw Jf(e,"limit()","Query.limit()")}}limitToLast(e){try{return new np(this.firestore,yf(this._delegate,function(e){return hd("limitToLast",e),new wf("limitToLast",e,"L")}(e)))}catch(e){throw Jf(e,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new np(this.firestore,yf(this._delegate,function(...e){return new bf("startAt",e,!0)}(...e)))}catch(e){throw Jf(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new np(this.firestore,yf(this._delegate,function(...e){return new bf("startAfter",e,!1)}(...e)))}catch(e){throw Jf(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new np(this.firestore,yf(this._delegate,function(...e){return new Tf("endBefore",e,!1)}(...e)))}catch(e){throw Jf(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new np(this.firestore,yf(this._delegate,function(...e){return new Tf("endAt",e,!0)}(...e)))}catch(e){throw Jf(e,"endAt()","Query.endAt()")}}isEqual(e){return wd(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=ud(e,md);const t=ud(e.firestore,Ed),n=kd(t),r=new Rf(t);return function(e,t){const n=new Or;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Sc(e,t,!0),i=new sh(t,r.Ks),s=i.Ic(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=ju(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await Xh(e),t,n))),n.promise}(n,e._query).then((n=>new df(t,r,e,n)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=ud(e,md);const t=ud(e.firestore,Ed),n=kd(t),r=new Rf(t);return rd(n,e._query,{source:"server"}).then((n=>new df(t,r,e,n)))}(this._delegate):function(e){e=ud(e,md);const t=ud(e.firestore,Ed),n=kd(t),r=new Rf(t);return mf(e._query),rd(n,e._query).then((n=>new df(t,r,e,n)))}(this._delegate),t.then((e=>new ip(this.firestore,new df(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=Xf(e),n=Zf(e,(e=>new ip(this.firestore,new df(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Lf(this._delegate,t,n)}withConverter(e){return new np(this.firestore,e?this._delegate.withConverter(Qf.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class rp{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new tp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ip{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new np(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new tp(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new rp(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new tp(this._firestore,n))}))}isEqual(e){return pf(this._delegate,e._delegate)}}class sp extends np{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Yf(this.firestore,e):null}doc(e){try{return new Yf(this.firestore,void 0===e?vd(this._delegate):vd(this._delegate,e))}catch(e){throw Jf(e,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=ud(e.firestore,Ed),r=vd(e),i=xf(e.converter,t);return Mf(n,[qd(Vd(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Vs.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Yf(this.firestore,e)))}isEqual(e){return _d(this._delegate,e._delegate)}withConverter(e){return new sp(this.firestore,e?this._delegate.withConverter(Qf.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function op(e){return ud(e,pd)}class ap{constructor(...e){this._delegate=new Nd(...e)}static documentId(){return new ap(ni.keyField().canonicalString())}isEqual(e){return(e=(0,l.m9)(e))instanceof Nd&&this._delegate._internalPath.isEqual(e._internalPath)}}class lp{constructor(e){this._delegate=e}static serverTimestamp(){const e=new zd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new lp(e)}static delete(){const e=new jd("deleteField");return e._methodName="FieldValue.delete",new lp(e)}static arrayUnion(...e){const t=function(...e){return new $d("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new lp(t)}static arrayRemove(...e){const t=function(...e){return new Wd("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new lp(t)}static increment(e){const t=function(e){return new Kd("increment",e)}(e);return t._methodName="FieldValue.increment",new lp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cp={Firestore:Wf,GeoPoint:Rd,Timestamp:Gr,Blob:Bf,Transaction:Hf,WriteBatch:Gf,DocumentReference:Yf,DocumentSnapshot:ep,Query:np,QueryDocumentSnapshot:tp,QuerySnapshot:ip,CollectionReference:sp,FieldPath:ap,FieldValue:lp,setLogLevel:function(e){!function(e){Tr.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var up,hp;up=i.Z,hp=(e,t)=>new Wf(e,t,new $f),up.INTERNAL.registerComponent(new o.wA("firestore-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return hp(t,n)}),"PUBLIC").setServiceProps(Object.assign({},cp))),up.registerVersion("@firebase/firestore-compat","0.1.14")},5308:function(e,t,n){"use strict";n.d(t,{cF:function(){return I}});var r=n(2238),i=n(4444),s=n(8463);const o="firebasestorage.googleapis.com";class a extends i.ZR{constructor(e,t){super(l(e),`Firebase Storage: ${t} (${l(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,a.prototype)}_codeEquals(e){return l(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}function l(e){return"storage/"+e}function c(e){return new a("invalid-argument",e)}function u(){return new a("app-deleted","The Firebase app was deleted.")}class h{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=h.makeFromUrl(e,t)}catch(t){return new h(e,"")}if(""===n.path)return n;throw new a("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const l=t.replace(/[.]/g,"\\."),c=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${l}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===o?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<c.length;t++){const r=c[t],i=r.regex.exec(e);if(i){const e=i[r.indices.bucket];let t=i[r.indices.path];t||(t=""),n=new h(e,t),r.postModify(n);break}}if(null==n)throw function(e){return new a("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class d{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function f(e,t,n,r){if(r<t)throw c(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw c(`Invalid value for '${e}'. Expected ${n} or less.`)}var p;!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(p||(p={}));class m{constructor(e,t,n,r,i,s,o,a,l,c,u){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(e){r(e)}else if(null!==i){const e=new a("unknown","An unknown error occurred, please check the error payload for server response.");e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else t.canceled?r(this.appDelete_?u():new a("canceled","User canceled the upload/download.")):r(new a("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new g(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(...e){c||(c=!0,t.apply(null,e))}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e,...t){if(c)return void d();if(e)return d(),void u.call(null,e,...t);if(l()||o)return d(),void u.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(((e,t)=>{if(t)return void e(!1,new g(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===p.NO_ERROR,i=n.getStatus();if(!t||this.isRetryStatusCode_(i)){const t=n.getErrorCode()===p.ABORT;return void e(!1,new g(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new g(s,n))}))}),e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}class g{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}class y{constructor(e,t){this._service=e,this._location=t instanceof h?t:h.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new y(e,t)}get root(){const e=new h(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new h(this._location.bucket,e);return new y(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new a("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function v(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:h.makeFromBucketSpec(n,e)}class _{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=o,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?h.makeFromBucketSpec(r,this._host):v(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=h.makeFromBucketSpec(this._url,e):this._bucket=v(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){f("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){f("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new y(this,e)}_makeRequest(e,t,n,r){if(this._deleted)return new d(u());{const i=function(e,t,n,r,i,s){const o=function(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}(e.urlParams),a=e.url+o,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new m(a,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((()=>this._requests.delete(i)),(()=>this._requests.delete(i))),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const w="@firebase/storage",b="0.9.2",T="storage";function I(e=(0,r.getApp)(),t){return e=(0,i.m9)(e),(0,r._getProvider)(e,T).getImmediate({identifier:t})}(0,r._registerComponent)(new s.wA(T,(function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new _(n,i,s,t,r.SDK_VERSION)}),"PUBLIC").setMultipleInstances(!0)),(0,r.registerVersion)(w,b,""),(0,r.registerVersion)(w,b,"esm2017")},7531:function(e,t,n){"use strict";n.d(t,{lX:function(){return _},q_:function(){return k},ob:function(){return d},PP:function(){return C},Ep:function(){return h}});var r=n(7462);function i(e){return"/"===e.charAt(0)}function s(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var o=n(2177);function a(e){return"/"===e.charAt(0)?e:"/"+e}function l(e){return"/"===e.charAt(0)?e.substr(1):e}function c(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function u(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function h(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function d(e,t,n,o){var a;"string"==typeof e?(a=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),a.state=t):(void 0===(a=(0,r.Z)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(a.key=n),o?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],a=e&&i(e),l=t&&i(t),c=a||l;if(e&&i(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var u=o[o.length-1];n="."===u||".."===u||""===u}else n=!1;for(var h=0,d=o.length;d>=0;d--){var f=o[d];"."===f?s(o,d):".."===f?(s(o,d),h++):h&&(s(o,d),h--)}if(!c)for(;h--;h)o.unshift("..");!c||""===o[0]||o[0]&&i(o[0])||o.unshift("");var p=o.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p}(a.pathname,o.pathname)):a.pathname=o.pathname:a.pathname||(a.pathname="/"),a}function f(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var s="function"==typeof e?e(t,n):e;"string"==typeof s?"function"==typeof r?r(s,i):i(!0):i(!1!==s)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var p=!("undefined"==typeof window||!window.document||!window.document.createElement);function m(e,t){t(window.confirm(e))}var g="popstate",y="hashchange";function v(){try{return window.history.state||{}}catch(e){return{}}}function _(e){void 0===e&&(e={}),p||(0,o.Z)(!1);var t,n=window.history,i=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,s=!(-1===window.navigator.userAgent.indexOf("Trident")),l=e,_=l.forceRefresh,w=void 0!==_&&_,b=l.getUserConfirmation,T=void 0===b?m:b,I=l.keyLength,E=void 0===I?6:I,k=e.basename?u(a(e.basename)):"";function S(e){var t=e||{},n=t.key,r=t.state,i=window.location,s=i.pathname+i.search+i.hash;return k&&(s=c(s,k)),d(s,r,n)}function C(){return Math.random().toString(36).substr(2,E)}var x=f();function N(e){(0,r.Z)(j,e),j.length=n.length,x.notifyListeners(j.location,j.action)}function P(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||O(S(e.state))}function A(){O(S(v()))}var R=!1;function O(e){R?(R=!1,N()):x.confirmTransitionTo(e,"POP",T,(function(t){t?N({action:"POP",location:e}):function(e){var t=j.location,n=L.indexOf(t.key);-1===n&&(n=0);var r=L.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(R=!0,F(i))}(e)}))}var D=S(v()),L=[D.key];function M(e){return k+h(e)}function F(e){n.go(e)}var U=0;function V(e){1===(U+=e)&&1===e?(window.addEventListener(g,P),s&&window.addEventListener(y,A)):0===U&&(window.removeEventListener(g,P),s&&window.removeEventListener(y,A))}var q=!1,j={length:n.length,action:"POP",location:D,createHref:M,push:function(e,t){var r="PUSH",s=d(e,t,C(),j.location);x.confirmTransitionTo(s,r,T,(function(e){if(e){var t=M(s),o=s.key,a=s.state;if(i)if(n.pushState({key:o,state:a},null,t),w)window.location.href=t;else{var l=L.indexOf(j.location.key),c=L.slice(0,l+1);c.push(s.key),L=c,N({action:r,location:s})}else window.location.href=t}}))},replace:function(e,t){var r="REPLACE",s=d(e,t,C(),j.location);x.confirmTransitionTo(s,r,T,(function(e){if(e){var t=M(s),o=s.key,a=s.state;if(i)if(n.replaceState({key:o,state:a},null,t),w)window.location.replace(t);else{var l=L.indexOf(j.location.key);-1!==l&&(L[l]=s.key),N({action:r,location:s})}else window.location.replace(t)}}))},go:F,goBack:function(){F(-1)},goForward:function(){F(1)},block:function(e){void 0===e&&(e=!1);var t=x.setPrompt(e);return q||(V(1),q=!0),function(){return q&&(q=!1,V(-1)),t()}},listen:function(e){var t=x.appendListener(e);return V(1),function(){V(-1),t()}}};return j}var w="hashchange",b={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+l(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:l,decodePath:a},slash:{encodePath:a,decodePath:a}};function T(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function I(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function E(e){window.location.replace(T(window.location.href)+"#"+e)}function k(e){void 0===e&&(e={}),p||(0,o.Z)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,s=void 0===i?m:i,l=n.hashType,g=void 0===l?"slash":l,y=e.basename?u(a(e.basename)):"",v=b[g],_=v.encodePath,k=v.decodePath;function S(){var e=k(I());return y&&(e=c(e,y)),d(e)}var C=f();function x(e){(0,r.Z)(q,e),q.length=t.length,C.notifyListeners(q.location,q.action)}var N=!1,P=null;function A(){var e,t,n=I(),r=_(n);if(n!==r)E(r);else{var i=S(),o=q.location;if(!N&&(t=i,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(P===h(i))return;P=null,function(e){if(N)N=!1,x();else{C.confirmTransitionTo(e,"POP",s,(function(t){t?x({action:"POP",location:e}):function(e){var t=q.location,n=L.lastIndexOf(h(t));-1===n&&(n=0);var r=L.lastIndexOf(h(e));-1===r&&(r=0);var i=n-r;i&&(N=!0,M(i))}(e)}))}}(i)}}var R=I(),O=_(R);R!==O&&E(O);var D=S(),L=[h(D)];function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(w,A):0===F&&window.removeEventListener(w,A)}var V=!1,q={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=T(window.location.href)),n+"#"+_(y+h(e))},push:function(e,t){var n="PUSH",r=d(e,void 0,void 0,q.location);C.confirmTransitionTo(r,n,s,(function(e){if(e){var t=h(r),i=_(y+t);if(I()!==i){P=t,function(e){window.location.hash=e}(i);var s=L.lastIndexOf(h(q.location)),o=L.slice(0,s+1);o.push(t),L=o,x({action:n,location:r})}else x()}}))},replace:function(e,t){var n="REPLACE",r=d(e,void 0,void 0,q.location);C.confirmTransitionTo(r,n,s,(function(e){if(e){var t=h(r),i=_(y+t);I()!==i&&(P=t,E(i));var s=L.indexOf(h(q.location));-1!==s&&(L[s]=t),x({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=C.setPrompt(e);return V||(U(1),V=!0),function(){return V&&(V=!1,U(-1)),t()}},listen:function(e){var t=C.appendListener(e);return U(1),function(){U(-1),t()}}};return q}function S(e,t,n){return Math.min(Math.max(e,t),n)}function C(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,s=void 0===i?["/"]:i,o=t.initialIndex,a=void 0===o?0:o,l=t.keyLength,c=void 0===l?6:l,u=f();function p(e){(0,r.Z)(w,e),w.length=w.entries.length,u.notifyListeners(w.location,w.action)}function m(){return Math.random().toString(36).substr(2,c)}var g=S(a,0,s.length-1),y=s.map((function(e){return d(e,void 0,"string"==typeof e?m():e.key||m())})),v=h;function _(e){var t=S(w.index+e,0,w.entries.length-1),r=w.entries[t];u.confirmTransitionTo(r,"POP",n,(function(e){e?p({action:"POP",location:r,index:t}):p()}))}var w={length:y.length,action:"POP",location:y[g],index:g,entries:y,createHref:v,push:function(e,t){var r="PUSH",i=d(e,t,m(),w.location);u.confirmTransitionTo(i,r,n,(function(e){if(e){var t=w.index+1,n=w.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),p({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=d(e,t,m(),w.location);u.confirmTransitionTo(i,r,n,(function(e){e&&(w.entries[w.index]=i,p({action:r,location:i}))}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},canGo:function(e){var t=w.index+e;return t>=0&&t<w.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return w}},8679:function(e,t,n){"use strict";var r=n(9864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<o.length;++g){var y=o[g];if(!(s[y]||r&&r[y]||m&&m[y]||a&&a[y])){var v=d(n,y);try{c(t,y,v)}catch(e){}}}}return t}},8676:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,s=new Promise((function(s,o){n(i=e[t].apply(e,r)).then(s,o)}));return s.request=i,s}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new u(e,i.request)}))}function s(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function o(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function a(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function l(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function u(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function f(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function p(e){this._db=e}s(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),l(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(u,"_cursor",["direction","key","primaryKey","value"]),o(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(u.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new u(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},s(h,"_store",["name","keyPath","indexNames","autoIncrement"]),o(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),l(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},s(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},s(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),s=i.request;return s&&(s.onupgradeneeded=function(e){n&&n(new f(s.result,e.oldVersion,s.transaction))}),i.then((function(e){return new p(e)}))},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},7418:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,s){for(var o,a,l=i(e),c=1;c<arguments.length;c++){for(var u in o=Object(arguments[c]))n.call(o,u)&&(l[u]=o[u]);if(t){a=t(o);for(var h=0;h<a.length;h++)r.call(o,a[h])&&(l[a[h]]=o[a[h]])}}return l}},2703:function(e,t,n){"use strict";var r=n(414);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},5697:function(e,t,n){e.exports=n(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4448:function(e,t,n){"use strict";var r=n(7294),i=n(7418),s=n(3840);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=60103,I=60106,E=60107,k=60108,S=60114,C=60109,x=60110,N=60112,P=60113,A=60120,R=60115,O=60116,D=60121,L=60128,M=60129,F=60130,U=60131;if("function"==typeof Symbol&&Symbol.for){var V=Symbol.for;T=V("react.element"),I=V("react.portal"),E=V("react.fragment"),k=V("react.strict_mode"),S=V("react.profiler"),C=V("react.provider"),x=V("react.context"),N=V("react.forward_ref"),P=V("react.suspense"),A=V("react.suspense_list"),R=V("react.memo"),O=V("react.lazy"),D=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),F=V("react.offscreen"),U=V("react.legacy_hidden")}var q,j="function"==typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=j&&e[j]||e["@@iterator"])?e:null}function z(e){if(void 0===q)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var $=!1;function W(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return W(e.type,!1);case 11:return W(e.type.render,!1);case 22:return W(e.type._render,!1);case 1:return W(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case E:return"Fragment";case I:return"Portal";case S:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case A:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return H(e.type);case D:return H(e._render);case O:t=e._payload,e=e._init;try{return H(e(t))}catch(e){}}return null}function G(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ce(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,me,ge=(me=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Te=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(Te[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,xe=null;function Ne(e){if(e=ni(e)){if("function"!=typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Se(e.stateNode,e.type,t))}}function Pe(e){Ce?xe?xe.push(e):xe=[e]:Ce=e}function Ae(){if(Ce){var e=Ce,t=xe;if(xe=Ce=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Re(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function De(){}var Le=Re,Me=!1,Fe=!1;function Ue(){null===Ce&&null===xe||(De(),Ae())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(h)try{var je={};Object.defineProperty(je,"passive",{get:function(){qe=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(me){qe=!1}function Be(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var ze=!1,$e=null,We=!1,Ke=null,He={onError:function(e){ze=!0,$e=e}};function Ge(e,t,n,r,i,s,o,a,l){ze=!1,$e=null,Be.apply(He,arguments)}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Je(e){if(Qe(e)!==e)throw Error(o(188))}function Xe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Je(i),e;if(s===r)return Je(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,st=[],ot=null,at=null,lt=null,ct=new Map,ut=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=ft(t,n,r,i,s),null!==t&&null!==(t=ni(t))&&tt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ti(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){yt(e)&&n.delete(t)}function _t(){for(it=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&yt(ot)&&(ot=null),null!==at&&yt(at)&&(at=null),null!==lt&&yt(lt)&&(lt=null),ct.forEach(vt),ut.forEach(vt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,_t)))}function bt(e){function t(t){return wt(t,e)}if(0<st.length){wt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&wt(ot,e),null!==at&&wt(at,e),null!==lt&&wt(lt,e),ct.forEach(t),ut.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function Tt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:Tt("Animation","AnimationEnd"),animationiteration:Tt("Animation","AnimationIteration"),animationstart:Tt("Animation","AnimationStart"),transitionend:Tt("Transition","TransitionEnd")},Et={},kt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in kt)return Et[e]=n[t];return e}h&&(kt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),xt=St("animationiteration"),Nt=St("animationstart"),Pt=St("transitionend"),At=new Map,Rt=new Map,Ot=["abort","abort",Ct,"animationEnd",xt,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Pt,"transitionEnd","waiting","waiting"];function Dt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),At.set(r,i),c(i,[r])}}(0,s.unstable_now)();var Lt=8;function Mt(e){if(0!=(1&e))return Lt=15,1;if(0!=(2&e))return Lt=14,2;if(0!=(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!=(32&e)?(Lt=11,32):0!=(t=192&e)?(Lt=10,t):0!=(256&e)?(Lt=9,256):0!=(t=3584&e)?(Lt=8,t):0!=(4096&e)?(Lt=7,4096):0!=(t=4186112&e)?(Lt=6,t):0!=(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!=(134217728&e)?(Lt=3,134217728):0!=(t=805306368&e)?(Lt=2,t):0!=(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=Lt=15;else if(0!=(s=134217727&n)){var l=s&~o;0!==l?(r=Mt(l),i=Lt):0!=(a&=s)&&(r=Mt(a),i=Lt)}else 0!=(s=n&~o)?(r=Mt(s),i=Lt):0!==a&&(r=Mt(a),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-zt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-zt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Vt(10,t):e;case 10:return 0===(e=qt(192&~t))?Vt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&0===(e=qt(4186112&~t))&&(e=512),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function jt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-zt(t)]=n}var zt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-($t(e)/Wt|0)|0},$t=Math.log,Wt=Math.LN2,Kt=s.unstable_UserBlockingPriority,Ht=s.unstable_runWithPriority,Gt=!0;function Qt(e,t,n,r){Me||De();var i=Jt,s=Me;Me=!0;try{Oe(i,e,t,n,r)}finally{(Me=s)||Ue()}}function Yt(e,t,n,r){Ht(Kt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Gt)if((i=0==(4&t))&&0<st.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),st.push(e);else{var s=Xt(e,t,n,r);if(null===s)i&&pt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(s,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=mt(ot,e,t,n,r,i),!0;case"dragenter":return at=mt(at,e,t,n,r,i),!0;case"mouseover":return lt=mt(lt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ct.set(s,mt(ct.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ut.set(s,mt(ut.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;pt(e,r)}Dr(e,t,r,null,n)}}}function Xt(e,t,n,r){var i=ke(r);if(null!==(i=ti(i))){var s=Qe(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Ye(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Dr(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var ln,cn,un,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(hn),fn=i({},hn,{view:0,detail:0}),pn=an(fn),mn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(ln=e.screenX-un.screenX,cn=e.screenY-un.screenY):cn=ln=0,un=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),gn=an(mn),yn=an(i({},mn,{dataTransfer:0})),vn=an(i({},fn,{relatedTarget:0})),_n=an(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(wn),Tn=an(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Cn(){return Sn}var xn=i({},fn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(xn),Pn=an(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=an(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(On),Ln=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var Un=h&&"TextEvent"in window&&!Fn,Vn=h&&(!Mn||Fn&&8<Fn&&11>=Fn),qn=String.fromCharCode(32),jn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var $n=!1,Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Pe(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Qn=null;function Yn(e){xr(e,0)}function Jn(e){if(J(ri(e)))return e}function Xn(e,t){if("change"===e)return t}var Zn=!1;if(h){var er;if(h){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"==typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Gn&&(Gn.detachEvent("onpropertychange",ir),Qn=Gn=null)}function ir(e){if("value"===e.propertyName&&Jn(Qn)){var t=[];if(Hn(t,Qn,e,ke(e)),e=Yn,Me)e(t);else{Me=!0;try{Re(e,t)}finally{Me=!1,Ue()}}}}function sr(e,t,n){"focusin"===e?(rr(),Qn=n,(Gn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Qn)}function ar(e,t){if("click"===e)return Jn(t)}function lr(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ur=Object.prototype.hasOwnProperty;function hr(e,t){if(cr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,vr=null,_r=null,wr=null,br=!1;function Tr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==X(r)||(r="selectionStart"in(r=vr)&&gr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Mr(_r,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}Dt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Dt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Dt(Ot,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Rt.set(Ir[Er],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ge.apply(this,arguments),ze){if(!ze)throw Error(o(198));var u=$e;ze=!1,$e=null,We||(We=!0,Ke=u)}}(r,t,void 0,e),e.currentTarget=null}function xr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Cr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Cr(i,a,c),s=l}}}if(We)throw e=Ke,We=!1,Ke=null,e}function Nr(e,t){var n=si(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Pr="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Pr]||(e[Pr]=!0,a.forEach((function(t){Sr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=si(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Or(s,e,i,t),o.add(a))}function Or(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Qt;break;case 1:i=Yt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ti(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e();Fe=!0;try{Le(e,t,n)}finally{Fe=!1,Ue()}}((function(){var r=s,i=ke(n),o=[];e:{var a=At.get(e);if(void 0!==a){var l=dn,c=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=vn;break;case"focusout":c="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ct:case xt:case Nt:l=_n;break;case Pt:l=Rn;break;case"scroll":l=pn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var u=0!=(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=Ve(p,d))&&u.push(Lr(p,m,f))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=n.relatedTarget||n.fromElement)||!ti(c)&&!c[Zr])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ti(c):null)&&(c!==(h=Qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=gn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:ri(l),f=null==c?a:ri(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,ti(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Fr(f))p++;for(f=0,m=d;m;m=Fr(m))f++;for(;0<p-f;)u=Fr(u),p--;for(;0<f-p;)d=Fr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Fr(u),d=Fr(d)}u=null}else u=null;null!==l&&Ur(o,a,l,u,!1),null!==c&&null!==h&&Ur(o,h,c,u,!0)}if("select"===(l=(a=r?ri(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Kn(a))if(Zn)g=lr;else{g=or;var y=sr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ar);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ie(a,"number",a.value)),y=r?ri(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(vr=y,_r=r,wr=null);break;case"focusout":wr=_r=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,Tr(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Tr(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else $n?Bn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Vn&&"ko"!==n.locale&&($n||"onCompositionStart"!==_?"onCompositionEnd"===_&&$n&&(v=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,$n=!0)),0<(y=Mr(r,_)).length&&(_=new Tn(_,e,null,n,i),o.push({event:_,listeners:y}),(v||null!==(v=zn(n)))&&(_.data=v))),(v=Un?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,qn);case"textInput":return(e=t.data)===qn&&jn?null:e;default:return null}}(e,n):function(e,t){if($n)return"compositionend"===e||!Mn&&Bn(e,t)?(e=nn(),tn=en=Zt=null,$n=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Mr(r,"onBeforeInput")).length&&(i=new Tn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v)}xr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ve(e,n))&&r.unshift(Lr(e,s,i)),null!=(s=Ve(e,t))&&r.push(Lr(e,s,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ve(n,s))&&o.unshift(Lr(n,l,a)):i||null!=(l=Ve(n,s))&&o.push(Lr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var qr=null,jr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function zr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $r="function"==typeof setTimeout?setTimeout:void 0,Wr="function"==typeof clearTimeout?clearTimeout:void 0;function Kr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Gr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Qr=0,Yr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Yr,Xr="__reactProps$"+Yr,Zr="__reactContainer$"+Yr,ei="__reactEvents$"+Yr;function ti(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Gr(e);null!==e;){if(n=e[Jr])return n;e=Gr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Jr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[Xr]||null}function si(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ai=-1;function li(e){return{current:e}}function ci(e){0>ai||(e.current=oi[ai],oi[ai]=null,ai--)}function ui(e,t){ai++,oi[ai]=e.current,e.current=t}var hi={},di=li(hi),fi=li(!1),pi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gi(e){return null!=e.childContextTypes}function yi(){ci(fi),ci(di)}function vi(e,t,n){if(di.current!==hi)throw Error(o(168));ui(di,t),ui(fi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,H(t)||"Unknown",s));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=di.current,ui(di,e),ui(fi,fi.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=_i(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ci(fi),ci(di),ui(di,e)):ci(fi),ui(fi,n)}var Ti=null,Ii=null,Ei=s.unstable_runWithPriority,ki=s.unstable_scheduleCallback,Si=s.unstable_cancelCallback,Ci=s.unstable_shouldYield,xi=s.unstable_requestPaint,Ni=s.unstable_now,Pi=s.unstable_getCurrentPriorityLevel,Ai=s.unstable_ImmediatePriority,Ri=s.unstable_UserBlockingPriority,Oi=s.unstable_NormalPriority,Di=s.unstable_LowPriority,Li=s.unstable_IdlePriority,Mi={},Fi=void 0!==xi?xi:function(){},Ui=null,Vi=null,qi=!1,ji=Ni(),Bi=1e4>ji?Ni:function(){return Ni()-ji};function zi(){switch(Pi()){case Ai:return 99;case Ri:return 98;case Oi:return 97;case Di:return 96;case Li:return 95;default:throw Error(o(332))}}function $i(e){switch(e){case 99:return Ai;case 98:return Ri;case 97:return Oi;case 96:return Di;case 95:return Li;default:throw Error(o(332))}}function Wi(e,t){return e=$i(e),Ei(e,t)}function Ki(e,t,n){return e=$i(e),ki(e,t,n)}function Hi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}Gi()}function Gi(){if(!qi&&null!==Ui){qi=!0;var e=0;try{var t=Ui;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(t){throw null!==Ui&&(Ui=Ui.slice(e+1)),ki(Ai,Hi),t}finally{qi=!1}}}var Qi=b.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=li(null),Xi=null,Zi=null,es=null;function ts(){es=Zi=Xi=null}function ns(e){var t=Ji.current;ci(Ji),e.type._context._currentValue=t}function rs(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function is(e,t){Xi=e,es=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function ss(e,t){if(es!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(es=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===Xi)throw Error(o(308));Zi=t,Xi.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var os=!1;function as(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function us(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ds(e,t,n,r){var s=e.updateQueue;os=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var c=l,u=c.next;c.next=null,null===a?o=u:a.next=u,a=c;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=c)}}if(null!==o){for(d=s.baseState,a=0,h=u=c=null;;){l=o.lane;var f=o.eventTime;if((r&l)===l){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(l=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,l);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(l="function"==typeof(p=m.payload)?p.call(f,d,l):p))break e;d=i({},d,l);break e;case 2:os=!0}}null!==o.callback&&(e.flags|=32,null===(l=s.effects)?s.effects=[o]:l.push(o))}else f={eventTime:f,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(u=h=f,c=d):h=h.next=f,a|=l;if(null===(o=o.next)){if(null===(l=s.shared.pending))break;o=l.next,l.next=null,s.lastBaseUpdate=l,s.shared.pending=null}}null===h&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,Ua|=a,e.lanes=a,e.memoizedState=d}}function fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var ps=(new r.Component).refs;function ms(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gs={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cl(),i=ul(e),s=cs(r,i);s.payload=t,null!=n&&(s.callback=n),us(e,s),hl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cl(),i=ul(e),s=cs(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),us(e,s),hl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cl(),r=ul(e),i=cs(n,r);i.tag=2,null!=t&&(i.callback=t),us(e,i),hl(e,r,n)}};function ys(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&hr(n,r)&&hr(i,s))}function vs(e,t,n){var r=!1,i=hi,s=t.contextType;return"object"==typeof s&&null!==s?s=ss(s):(i=gi(t)?pi:di.current,s=(r=null!=(r=t.contextTypes))?mi(e,i):hi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function _s(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gs.enqueueReplaceState(t,t.state,null)}function ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ps,as(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=ss(s):(s=gi(t)?pi:di.current,i.context=mi(e,s)),ds(e,n,i,r),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(ms(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&gs.enqueueReplaceState(i,i.state,null),ds(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var bs=Array.isArray;function Ts(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ps&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Is(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Es(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=zl(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ts(e,t,n),r.return=e,r):((r=$l(n.type,n.key,n.props,null,e.mode,r)).ref=Ts(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Wl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Hl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case T:return(n=$l(t.type,t.key,t.props,null,e.mode,n)).ref=Ts(e,null,t),n.return=e,n;case I:return(t=Gl(t,e.mode,n)).return=e,t}if(bs(t)||B(t))return(t=Wl(t,e.mode,n,null)).return=e,t;Is(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case T:return n.key===i?n.type===E?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case I:return n.key===i?u(e,t,n,r):null}if(bs(n)||B(n))return null!==i?null:h(e,t,n,r,null);Is(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case T:return e=e.get(null===r.key?n:r.key)||null,r.type===E?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case I:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(bs(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);Is(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),c}function g(i,a,l,c){var u=B(l);if("function"!=typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),a=s(_,a,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,s,l){var c="object"==typeof s&&null!==s&&s.type===E&&null===s.key;c&&(s=s.props.children);var u="object"==typeof s&&null!==s;if(u)switch(s.$$typeof){case T:e:{for(u=s.key,c=r;null!==c;){if(c.key===u){if(7===c.tag){if(s.type===E){n(e,c.sibling),(r=i(c,s.props.children)).return=e,e=r;break e}}else if(c.elementType===s.type){n(e,c.sibling),(r=i(c,s.props)).ref=Ts(e,c,s),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}s.type===E?((r=Wl(s.props.children,e.mode,l,s.key)).return=e,e=r):((l=$l(s.type,s.key,s.props,null,e.mode,l)).ref=Ts(e,r,s),l.return=e,e=l)}return a(e);case I:e:{for(c=s.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Gl(s,e.mode,l)).return=e,e=r}return a(e)}if("string"==typeof s||"number"==typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Hl(s,e.mode,l)).return=e,e=r),a(e);if(bs(s))return m(e,r,s,l);if(B(s))return g(e,r,s,l);if(u&&Is(e,s),void 0===s&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var ks=Es(!0),Ss=Es(!1),Cs={},xs=li(Cs),Ns=li(Cs),Ps=li(Cs);function As(e){if(e===Cs)throw Error(o(174));return e}function Rs(e,t){switch(ui(Ps,t),ui(Ns,e),ui(xs,Cs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(xs),ui(xs,t)}function Os(){ci(xs),ci(Ns),ci(Ps)}function Ds(e){As(Ps.current);var t=As(xs.current),n=fe(t,e.type);t!==n&&(ui(Ns,e),ui(xs,n))}function Ls(e){Ns.current===e&&(ci(xs),ci(Ns))}var Ms=li(0);function Fs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Us=null,Vs=null,qs=!1;function js(e,t){var n=jl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function zs(e){if(qs){var t=Vs;if(t){var n=t;if(!Bs(e,t)){if(!(t=Hr(n.nextSibling))||!Bs(e,t))return e.flags=-1025&e.flags|2,qs=!1,void(Us=e);js(Us,n)}Us=e,Vs=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,qs=!1,Us=e}}function $s(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Us=e}function Ws(e){if(e!==Us)return!1;if(!qs)return $s(e),qs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!zr(t,e.memoizedProps))for(t=Vs;t;)js(e,t),t=Hr(t.nextSibling);if($s(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Vs=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Vs=null}}else Vs=Us?Hr(e.stateNode.nextSibling):null;return!0}function Ks(){Vs=Us=null,qs=!1}var Hs=[];function Gs(){for(var e=0;e<Hs.length;e++)Hs[e]._workInProgressVersionPrimary=null;Hs.length=0}var Qs=b.ReactCurrentDispatcher,Ys=b.ReactCurrentBatchConfig,Js=0,Xs=null,Zs=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,s){if(Js=s,Xs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qs.current=null===e||null===e.memoizedState?Ro:Oo,e=n(r,i),no){s=0;do{if(no=!1,!(25>s))throw Error(o(301));s+=1,eo=Zs=null,t.updateQueue=null,Qs.current=Do,e=n(r,i)}while(no)}if(Qs.current=Ao,t=null!==Zs&&null!==Zs.next,Js=0,eo=Zs=Xs=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Xs.memoizedState=eo=e:eo=eo.next=e,eo}function ao(){if(null===Zs){var e=Xs.alternate;e=null!==e?e.memoizedState:null}else e=Zs.next;var t=null===eo?Xs.memoizedState:eo.next;if(null!==t)eo=t,Zs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Zs=e).memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},null===eo?Xs.memoizedState=eo=e:eo=eo.next=e}return eo}function lo(e,t){return"function"==typeof t?t(e):t}function co(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Zs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=s=null,c=i;do{var u=c.lane;if((Js&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=h,s=r):l=l.next=h,Xs.lanes|=u,Ua|=u}c=c.next}while(null!==c&&c!==i);null===l?s=r:l.next=a,cr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function uo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);cr(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Js&e)===e)&&(t._workInProgressVersionPrimary=r,Hs.push(t))),e)return n(t._source);throw Hs.push(t),Error(o(350))}function fo(e,t,n,r){var i=Pa;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),l=Qs.current,c=l.useState((function(){return ho(i,t,n)})),u=c[1],h=c[0];c=eo;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=Xs;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=u;var e=s(t._source);if(!cr(a,e)){e=n(t._source),cr(h,e)||(u(e),e=ul(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var l=31-zt(o),c=1<<l;r[l]|=e,o&=~c}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=ul(g);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),cr(p,n)&&cr(m,t)&&cr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:h}).dispatch=u=Po.bind(null,Xs,e),c.queue=e,c.baseQueue=null,h=ho(i,t,n),c.memoizedState=c.baseState=h),h}function po(e,t,n){return fo(ao(),e,t,n)}function mo(e){var t=oo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:e}).dispatch=Po.bind(null,Xs,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Xs.updateQueue)?(t={lastEffect:null},Xs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},oo().memoizedState=e}function vo(){return ao().memoizedState}function _o(e,t,n,r){var i=oo();Xs.flags|=e,i.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=ao();r=void 0===r?null:r;var s=void 0;if(null!==Zs){var o=Zs.memoizedState;if(s=o.destroy,null!==r&&io(r,o.deps))return void go(t,n,s,r)}Xs.flags|=e,i.memoizedState=go(1|t,n,s,r)}function bo(e,t){return _o(516,4,e,t)}function To(e,t){return wo(516,4,e,t)}function Io(e,t){return wo(4,2,e,t)}function Eo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ko(e,t,n){return n=null!=n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xo(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=zi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Ys.transition;Ys.transition=1;try{e(!1),t()}finally{Ys.transition=n}}))}function Po(e,t,n){var r=cl(),i=ul(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===Xs||null!==o&&o===Xs)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=o(a,n);if(s.eagerReducer=o,s.eagerState=l,cr(l,a))return}catch(e){}hl(e,i,r)}}var Ao={readContext:ss,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Ro={readContext:ss,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:ss,useEffect:bo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,_o(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Po.bind(null,Xs,e),[r.memoizedState,e]},useRef:yo,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return bo((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return yo(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(qs){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Qr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0==(2&Xs.mode)&&(Xs.flags|=516,go(5,(function(){n("r:"+(Qr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Qr++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:ss,useCallback:Co,useContext:ss,useEffect:To,useImperativeHandle:ko,useLayoutEffect:Io,useMemo:xo,useReducer:co,useRef:vo,useState:function(){return co(lo)},useDebugValue:So,useDeferredValue:function(e){var t=co(lo),n=t[0],r=t[1];return To((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=co(lo)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return co(lo)[0]},unstable_isNewReconciler:!1},Do={readContext:ss,useCallback:Co,useContext:ss,useEffect:To,useImperativeHandle:ko,useLayoutEffect:Io,useMemo:xo,useReducer:uo,useRef:vo,useState:function(){return uo(lo)},useDebugValue:So,useDeferredValue:function(e){var t=uo(lo),n=t[0],r=t[1];return To((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=uo(lo)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return uo(lo)[0]},unstable_isNewReconciler:!1},Lo=b.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Ss(t,null,n,r):ks(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var s=t.ref;return is(t,i),r=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,na(e,t,i))}function Vo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!=typeof o||Bl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=$l(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,s))}return o=e.child,0==(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?na(e,t,s):(t.flags|=1,(e=zl(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,s){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0==(s&i))return t.lanes=e.lanes,na(e,t,s);0!=(16384&e.flags)&&(Mo=!0)}return zo(e,t,n,r,s)}function jo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},_l(0,n);else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_l(0,e),null;t.memoizedState={baseLanes:0},_l(0,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,_l(0,r);return Fo(e,t,i,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function zo(e,t,n,r,i){var s=gi(n)?pi:di.current;return s=mi(t,s),is(t,i),n=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,na(e,t,i))}function $o(e,t,n,r,i){if(gi(n)){var s=!0;wi(t)}else s=!1;if(is(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vs(t,n,r),ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;c="object"==typeof c&&null!==c?ss(c):mi(t,c=gi(n)?pi:di.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==c)&&_s(t,o,r,c),os=!1;var d=t.memoizedState;o.state=d,ds(t,r,o,i),l=t.memoizedState,a!==r||d!==l||fi.current||os?("function"==typeof u&&(ms(t,n,u,r),l=t.memoizedState),(a=os||ys(t,n,a,r,d,l,c))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ls(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Yi(t.type,a),o.props=c,h=t.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?ss(l):mi(t,l=gi(n)?pi:di.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==l)&&_s(t,o,r,l),os=!1,d=t.memoizedState,o.state=d,ds(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||fi.current||os?("function"==typeof f&&(ms(t,n,f,r),p=t.memoizedState),(c=os||ys(t,n,c,r,d,p,l))?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,s,i)}function Wo(e,t,n,r,i,s){Bo(e,t);var o=0!=(64&t.flags);if(!r&&!o)return i&&bi(t,n,!1),na(e,t,s);r=t.stateNode,Lo.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ks(t,e.child,null,s),t.child=ks(t,null,a,s)):Fo(e,t,a,s),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function Ko(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),Rs(e,t.containerInfo)}var Ho,Go,Qo,Yo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,s=Ms.current,o=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),ui(Ms,1&s),null===e?(void 0!==i.fallback&&zs(t),e=i.children,s=i.fallback,o?(e=Xo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,e):"number"==typeof i.unstable_expectedLoadTime?(e=Xo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,t.lanes=33554432,e):((n=Kl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=function(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0==(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=zl(o,a),null!==e?r=zl(e,r):(r=Wl(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Yo,i):(n=function(e,t,n,r){var i=e.child;return e=i.sibling,n=zl(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,i.children,n),t.memoizedState=null,n))}function Xo(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=Kl(t,i,0,null),n=Wl(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function Zo(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),rs(e.return,t)}function ea(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function ta(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fo(e,t,r.children,n),0!=(2&(r=Ms.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Zo(e,n);else if(19===e.tag)Zo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Ms,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ea(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ea(t,!0,n,null,s,t.lastEffect);break;case"together":ea(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function na(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ua|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=zl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ra(e,t){if(!qs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ia(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return Os(),ci(fi),ci(di),Gs(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ws(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ls(t);var s=As(Ps.current);if(n=t.type,null!==e&&null!=t.stateNode)Go(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=As(xs.current),Ws(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Jr]=t,r[Xr]=a,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<kr.length;e++)Nr(kr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,a),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Nr("invalid",r);break;case"textarea":le(r,a),Nr("invalid",r)}for(var c in Ie(n,a),e=null,a)a.hasOwnProperty(c)&&(s=a[c],"children"===c?"string"==typeof s?r.textContent!==s&&(e=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(e=["children",""+s]):l.hasOwnProperty(c)&&null!=s&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":Y(r),re(r,a,!0);break;case"textarea":Y(r),ue(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===s.nodeType?s:s.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Xr]=r,Ho(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),s=r;break;case"iframe":case"object":case"embed":Nr("load",e),s=r;break;case"video":case"audio":for(s=0;s<kr.length;s++)Nr(kr[s],e);s=r;break;case"source":Nr("error",e),s=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),s=r;break;case"details":Nr("toggle",e),s=r;break;case"input":ee(e,r),s=Z(e,r),Nr("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":le(e,r),s=ae(e,r),Nr("invalid",e);break;default:s=r}Ie(n,s);var u=s;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?be(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===a?"string"==typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"==typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Nr("scroll",e):null!=h&&w(e,a,h,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Vr)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Qo(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));n=As(Ps.current),As(xs.current),Ws(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ci(Ms),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ws(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ms.current)?0===La&&(La=3):(0!==La&&3!==La||(La=4),null===Pa||0==(134217727&Ua)&&0==(134217727&Va)||ml(Pa,Ra))),(r||n)&&(t.flags|=4),null);case 4:return Os(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return ns(t),null;case 19:if(ci(Ms),null===(r=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(c=r.rendering))if(a)ra(r,!1);else{if(0!==La||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fs(e))){for(t.flags|=64,ra(r,!1),null!==(a=c.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ui(Ms,1&Ms.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>za&&(t.flags|=64,a=!0,ra(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Fs(c))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ra(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qs)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>za&&1073741824!==n&&(t.flags|=64,a=!0,ra(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Ms.current,ui(Ms,a?1&t|2:1&t),n):null;case 23:case 24:return wl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function sa(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Os(),ci(fi),ci(di),Gs(),0!=(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ls(e),null;case 13:return ci(Ms),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Ms),null;case 4:return Os(),null;case 10:return ns(e),null;case 23:case 24:return wl(),null;default:return null}}function oa(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function aa(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Go=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,As(xs.current);var o,a=null;switch(n){case"input":s=Z(e,s),r=Z(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(e.onclick=Vr)}for(h in Ie(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var c=s[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var u=r[h];if(c=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(null!=u||null!=c))if("style"===h)if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(a=a||[]).push(h,u)):"children"===h?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Nr("scroll",e),a||c===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===L?u.toString():(a=a||[]).push(h,u))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Qo=function(e,t,n,r){n!==r&&(t.flags|=4)};var la="function"==typeof WeakMap?WeakMap:Map;function ca(e,t,n){(n=cs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ha||(Ha=!0,Ga=r),aa(0,t)},n}function ua(e,t,n){(n=cs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return aa(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Qa?Qa=new Set([this]):Qa.add(this),aa(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ha="function"==typeof WeakSet?WeakSet:Set;function da(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Fl(e,t)}else t.current=null}function fa(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Kr(t.stateNode.containerInfo))}throw Error(o(163))}function pa(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Dl(n,e),Ol(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&bt(n)))))}throw Error(o(163))}function ma(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ga(e,t){if(Ii&&"function"==typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(Ti,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Dl(t,n);else{r=t;try{i()}catch(e){Fl(r,e)}}n=n.next}while(n!==e)}break;case 1:if(da(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Fl(t,e)}break;case 5:da(t);break;case 4:Ta(e,t)}}function ya(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function va(e){return 5===e.tag||3===e.tag||4===e.tag}function _a(e){e:{for(var t=e.return;null!==t;){if(va(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||va(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?wa(e,n,t):ba(e,n,t)}function wa(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(wa(e,t,n),e=e.sibling;null!==e;)wa(e,t,n),e=e.sibling}function ba(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ba(e,t,n),e=e.sibling;null!==e;)ba(e,t,n),e=e.sibling}function Ta(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,l=i,c=l;;)if(ga(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(a=n,l=i.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ga(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function Ia(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Xr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];"style"===a?be(n,l):"dangerouslySetInnerHTML"===a?ge(n,l):"children"===a?ye(n,l):w(n,a,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,bt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ba=Bi(),ma(t.child,!0)),void Ea(t);case 19:return void Ea(t);case 23:case 24:return void ma(t,null!==t.memoizedState)}throw Error(o(163))}function Ea(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ha),t.forEach((function(t){var r=Vl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ka(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Sa=Math.ceil,Ca=b.ReactCurrentDispatcher,xa=b.ReactCurrentOwner,Na=0,Pa=null,Aa=null,Ra=0,Oa=0,Da=li(0),La=0,Ma=null,Fa=0,Ua=0,Va=0,qa=0,ja=null,Ba=0,za=1/0;function $a(){za=Bi()+500}var Wa,Ka=null,Ha=!1,Ga=null,Qa=null,Ya=!1,Ja=null,Xa=90,Za=[],el=[],tl=null,nl=0,rl=null,il=-1,sl=0,ol=0,al=null,ll=!1;function cl(){return 0!=(48&Na)?Bi():-1!==il?il:il=Bi()}function ul(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===zi()?1:2;if(0===sl&&(sl=Fa),0!==Qi.transition){0!==ol&&(ol=null!==ja?ja.pendingLanes:0),e=sl;var t=4186112&~ol;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=zi(),e=Vt(0!=(4&Na)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),sl)}function hl(e,t,n){if(50<nl)throw nl=0,rl=null,Error(o(185));if(null===(e=dl(e,t)))return null;Bt(e,t,n),e===Pa&&(Va|=t,4===La&&ml(e,Ra));var r=zi();1===t?0!=(8&Na)&&0==(48&Na)?gl(e):(fl(e,n),0===Na&&($a(),Hi())):(0==(4&Na)||98!==r&&99!==r||(null===tl?tl=new Set([e]):tl.add(e)),fl(e,n)),ja=e}function dl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function fl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-zt(a),c=1<<l,u=s[l];if(-1===u){if(0==(c&r)||0!=(c&i)){u=t,Mt(c);var h=Lt;s[l]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);a&=~c}if(r=Ft(e,e===Pa?Ra:0),t=Lt,0===r)null!==n&&(n!==Mi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Si(n)}15===t?(n=gl.bind(null,e),null===Ui?(Ui=[n],Vi=ki(Ai,Gi)):Ui.push(n),n=Mi):14===t?n=Ki(99,gl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Ki(n,pl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function pl(e){if(il=-1,ol=sl=0,0!=(48&Na))throw Error(o(327));var t=e.callbackNode;if(Rl()&&e.callbackNode!==t)return null;var n=Ft(e,e===Pa?Ra:0);if(0===n)return null;var r=n,i=Na;Na|=16;var s=Il();for(Pa===e&&Ra===r||($a(),bl(e,r));;)try{Sl();break}catch(t){Tl(e,t)}if(ts(),Ca.current=s,Na=i,null!==Aa?r=0:(Pa=null,Ra=0,r=La),0!=(Fa&Va))bl(e,0);else if(0!==r){if(2===r&&(Na|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(n=Ut(e))&&(r=El(e,n))),1===r)throw t=Ma,bl(e,0),ml(e,n),fl(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Nl(e);break;case 3:if(ml(e,n),(62914560&n)===n&&10<(r=Ba+500-Bi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){cl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=$r(Nl.bind(null,e),r);break}Nl(e);break;case 4:if(ml(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-zt(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sa(n/1960))-n)){e.timeoutHandle=$r(Nl.bind(null,e),n);break}Nl(e);break;default:throw Error(o(329))}}return fl(e,Bi()),e.callbackNode===t?pl.bind(null,e):null}function ml(e,t){for(t&=~qa,t&=~Va,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function gl(e){if(0!=(48&Na))throw Error(o(327));if(Rl(),e===Pa&&0!=(e.expiredLanes&Ra)){var t=Ra,n=El(e,t);0!=(Fa&Va)&&(n=El(e,t=Ft(e,t)))}else n=El(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Na|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(t=Ut(e))&&(n=El(e,t))),1===n)throw n=Ma,bl(e,0),ml(e,t),fl(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nl(e),fl(e,Bi()),null}function yl(e,t){var n=Na;Na|=1;try{return e(t)}finally{0===(Na=n)&&($a(),Hi())}}function vl(e,t){var n=Na;Na&=-2,Na|=8;try{return e(t)}finally{0===(Na=n)&&($a(),Hi())}}function _l(e,t){ui(Da,Oa),Oa|=t,Fa|=t}function wl(){Oa=Da.current,ci(Da)}function bl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Aa)for(n=Aa.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&yi();break;case 3:Os(),ci(fi),ci(di),Gs();break;case 5:Ls(r);break;case 4:Os();break;case 13:case 19:ci(Ms);break;case 10:ns(r);break;case 23:case 24:wl()}n=n.return}Pa=e,Aa=zl(e.current,null),Ra=Oa=Fa=t,La=0,Ma=null,qa=Va=Ua=0}function Tl(e,t){for(;;){var n=Aa;try{if(ts(),Qs.current=Ao,to){for(var r=Xs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Js=0,eo=Zs=Xs=null,no=!1,xa.current=null,null===n||null===n.return){La=1,Ma=t,Aa=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Ra,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l;if(0==(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!=(1&Ms.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var y=new Set;y.add(c),d.updateQueue=y}else g.add(c);if(0==(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=cs(-1,1);v.tag=2,us(a,v)}a.lanes|=1;break e}l=void 0,a=t;var _=s.pingCache;if(null===_?(_=s.pingCache=new la,l=new Set,_.set(c,l)):void 0===(l=_.get(c))&&(l=new Set,_.set(c,l)),!l.has(a)){l.add(a);var w=Ul.bind(null,s,c,a);c.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((H(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==La&&(La=2),l=oa(l,a),d=o;do{switch(d.tag){case 3:s=l,d.flags|=4096,t&=-t,d.lanes|=t,hs(d,ca(0,s,t));break e;case 1:s=l;var b=d.type,T=d.stateNode;if(0==(64&d.flags)&&("function"==typeof b.getDerivedStateFromError||null!==T&&"function"==typeof T.componentDidCatch&&(null===Qa||!Qa.has(T)))){d.flags|=4096,t&=-t,d.lanes|=t,hs(d,ua(d,s,t));break e}}d=d.return}while(null!==d)}xl(n)}catch(e){t=e,Aa===n&&null!==n&&(Aa=n=n.return);continue}break}}function Il(){var e=Ca.current;return Ca.current=Ao,null===e?Ao:e}function El(e,t){var n=Na;Na|=16;var r=Il();for(Pa===e&&Ra===t||bl(e,t);;)try{kl();break}catch(t){Tl(e,t)}if(ts(),Na=n,Ca.current=r,null!==Aa)throw Error(o(261));return Pa=null,Ra=0,La}function kl(){for(;null!==Aa;)Cl(Aa)}function Sl(){for(;null!==Aa&&!Ci();)Cl(Aa)}function Cl(e){var t=Wa(e.alternate,e,Oa);e.memoizedProps=e.pendingProps,null===t?xl(e):Aa=t,xa.current=null}function xl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=ia(n,t,Oa)))return void(Aa=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Oa)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=sa(t)))return n.flags&=2047,void(Aa=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Aa=t);Aa=t=e}while(null!==t);0===La&&(La=5)}function Nl(e){var t=zi();return Wi(99,Pl.bind(null,e,t)),null}function Pl(e,t){do{Rl()}while(null!==Ja);if(0!=(48&Na))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<s;){var c=31-zt(s),u=1<<c;i[c]=0,a[c]=-1,l[c]=-1,s&=~u}if(null!==tl&&0==(24&r)&&tl.has(e)&&tl.delete(e),e===Pa&&(Aa=Pa=null,Ra=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Na,Na|=32,xa.current=null,qr=Gt,gr(a=mr())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,s=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(e){l=null;break e}var h=0,d=-1,f=-1,p=0,m=0,g=a,y=null;t:for(;;){for(var v;g!==l||0!==s&&3!==g.nodeType||(d=h+s),g!==c||0!==u&&3!==g.nodeType||(f=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===a)break t;if(y===l&&++p===s&&(d=h),y===c&&++m===u&&(f=h),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}l=-1===d||-1===f?null:{start:d,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;jr={focusedElem:a,selectionRange:l},Gt=!1,al=null,ll=!1,Ka=r;do{try{Al()}catch(e){if(null===Ka)throw Error(o(330));Fl(Ka,e),Ka=Ka.nextEffect}}while(null!==Ka);al=null,Ka=r;do{try{for(a=e;null!==Ka;){var _=Ka.flags;if(16&_&&ye(Ka.stateNode,""),128&_){var w=Ka.alternate;if(null!==w){var b=w.ref;null!==b&&("function"==typeof b?b(null):b.current=null)}}switch(1038&_){case 2:_a(Ka),Ka.flags&=-3;break;case 6:_a(Ka),Ka.flags&=-3,Ia(Ka.alternate,Ka);break;case 1024:Ka.flags&=-1025;break;case 1028:Ka.flags&=-1025,Ia(Ka.alternate,Ka);break;case 4:Ia(Ka.alternate,Ka);break;case 8:Ta(a,l=Ka);var T=l.alternate;ya(l),null!==T&&ya(T)}Ka=Ka.nextEffect}}catch(e){if(null===Ka)throw Error(o(330));Fl(Ka,e),Ka=Ka.nextEffect}}while(null!==Ka);if(b=jr,w=mr(),_=b.focusedElem,a=b.selectionRange,w!==_&&_&&_.ownerDocument&&pr(_.ownerDocument.documentElement,_)){null!==a&&gr(_)&&(w=a.start,void 0===(b=a.end)&&(b=w),"selectionStart"in _?(_.selectionStart=w,_.selectionEnd=Math.min(b,_.value.length)):(b=(w=_.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),l=_.textContent.length,T=Math.min(a.start,l),a=void 0===a.end?T:Math.min(a.end,l),!b.extend&&T>a&&(l=a,a=T,T=l),l=fr(_,T),s=fr(_,a),l&&s&&(1!==b.rangeCount||b.anchorNode!==l.node||b.anchorOffset!==l.offset||b.focusNode!==s.node||b.focusOffset!==s.offset)&&((w=w.createRange()).setStart(l.node,l.offset),b.removeAllRanges(),T>a?(b.addRange(w),b.extend(s.node,s.offset)):(w.setEnd(s.node,s.offset),b.addRange(w))))),w=[];for(b=_;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"==typeof _.focus&&_.focus(),_=0;_<w.length;_++)(b=w[_]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Gt=!!qr,jr=qr=null,e.current=n,Ka=r;do{try{for(_=e;null!==Ka;){var I=Ka.flags;if(36&I&&pa(_,Ka.alternate,Ka),128&I){w=void 0;var E=Ka.ref;if(null!==E){var k=Ka.stateNode;Ka.tag,w=k,"function"==typeof E?E(w):E.current=w}}Ka=Ka.nextEffect}}catch(e){if(null===Ka)throw Error(o(330));Fl(Ka,e),Ka=Ka.nextEffect}}while(null!==Ka);Ka=null,Fi(),Na=i}else e.current=n;if(Ya)Ya=!1,Ja=e,Xa=t;else for(Ka=r;null!==Ka;)t=Ka.nextEffect,Ka.nextEffect=null,8&Ka.flags&&((I=Ka).sibling=null,I.stateNode=null),Ka=t;if(0===(r=e.pendingLanes)&&(Qa=null),1===r?e===rl?nl++:(nl=0,rl=e):nl=0,n=n.stateNode,Ii&&"function"==typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(Ti,n,void 0,64==(64&n.current.flags))}catch(e){}if(fl(e,Bi()),Ha)throw Ha=!1,e=Ga,Ga=null,e;return 0!=(8&Na)||Hi(),null}function Al(){for(;null!==Ka;){var e=Ka.alternate;ll||null===al||(0!=(8&Ka.flags)?Ze(Ka,al)&&(ll=!0):13===Ka.tag&&ka(e,Ka)&&Ze(Ka,al)&&(ll=!0));var t=Ka.flags;0!=(256&t)&&fa(e,Ka),0==(512&t)||Ya||(Ya=!0,Ki(97,(function(){return Rl(),null}))),Ka=Ka.nextEffect}}function Rl(){if(90!==Xa){var e=97<Xa?97:Xa;return Xa=90,Wi(e,Ll)}return!1}function Ol(e,t){Za.push(t,e),Ya||(Ya=!0,Ki(97,(function(){return Rl(),null})))}function Dl(e,t){el.push(t,e),Ya||(Ya=!0,Ki(97,(function(){return Rl(),null})))}function Ll(){if(null===Ja)return!1;var e=Ja;if(Ja=null,0!=(48&Na))throw Error(o(331));var t=Na;Na|=32;var n=el;el=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===s)throw Error(o(330));Fl(s,e)}}for(n=Za,Za=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===s)throw Error(o(330));Fl(s,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Na=t,Hi(),!0}function Ml(e,t,n){us(e,t=ca(0,t=oa(n,t),1)),t=cl(),null!==(e=dl(e,1))&&(Bt(e,1,t),fl(e,t))}function Fl(e,t){if(3===e.tag)Ml(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ml(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Qa||!Qa.has(r))){var i=ua(n,e=oa(t,e),1);if(us(n,i),i=cl(),null!==(n=dl(n,1)))Bt(n,1,i),fl(n,i);else if("function"==typeof r.componentDidCatch&&(null===Qa||!Qa.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ul(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cl(),e.pingedLanes|=e.suspendedLanes&n,Pa===e&&(Ra&n)===n&&(4===La||3===La&&(62914560&Ra)===Ra&&500>Bi()-Ba?bl(e,0):qa|=n),fl(e,t)}function Vl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===zi()?1:2:(0===sl&&(sl=Fa),0===(t=qt(62914560&~sl))&&(t=4194304))),n=cl(),null!==(e=dl(e,t))&&(Bt(e,t,n),fl(e,n))}function ql(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function jl(e,t,n,r){return new ql(e,t,n,r)}function Bl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zl(e,t){var n=e.alternate;return null===n?((n=jl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $l(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)Bl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case E:return Wl(n.children,i,s,t);case M:a=8,i|=16;break;case k:a=8,i|=1;break;case S:return(e=jl(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=s,e;case P:return(e=jl(13,n,t,i)).type=P,e.elementType=P,e.lanes=s,e;case A:return(e=jl(19,n,t,i)).elementType=A,e.lanes=s,e;case F:return Kl(n,i,s,t);case U:return(e=jl(24,n,t,i)).elementType=U,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case x:a=9;break e;case N:a=11;break e;case R:a=14;break e;case O:a=16,r=null;break e;case D:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=jl(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Wl(e,t,n,r){return(e=jl(7,e,r,t)).lanes=n,e}function Kl(e,t,n,r){return(e=jl(23,e,r,t)).elementType=F,e.lanes=n,e}function Hl(e,t,n){return(e=jl(6,e,null,t)).lanes=n,e}function Gl(e,t,n){return(t=jl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jt(0),this.expirationTimes=jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.mutableSourceEagerHydrationData=null}function Yl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Jl(e,t,n,r){var i=t.current,s=cl(),a=ul(i);e:if(n){t:{if(Qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(gi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var c=n.type;if(gi(c)){n=_i(n,c,l);break e}}n=l}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=cs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),us(i,t),hl(i,a,s),a}function Xl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Zl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ec(e,t){Zl(e,t),(e=e.alternate)&&Zl(e,t)}function tc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ql(e,t,null!=n&&!0===n.hydrate),t=jl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,as(t),e[Zr]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function nc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function rc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"==typeof i){var a=i;i=function(){var e=Xl(o);a.call(e)}}Jl(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Xl(o);l.call(e)}}vl((function(){Jl(t,o,e,i)}))}return Xl(o)}function ic(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(t))throw Error(o(200));return Yl(e,t,null,n)}Wa=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Mo=!0;else{if(0==(n&r)){switch(Mo=!1,t.tag){case 3:Ko(t),Ks();break;case 5:Ds(t);break;case 1:gi(t.type)&&wi(t);break;case 4:Rs(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ui(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Jo(e,t,n):(ui(Ms,1&Ms.current),null!==(t=na(e,t,n))?t.sibling:null);ui(Ms,1&Ms.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return ta(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Ms,Ms.current),r)break;return null;case 23:case 24:return t.lanes=0,jo(e,t,n)}return na(e,t,n)}Mo=0!=(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),is(t,n),i=so(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var s=!0;wi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,as(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&ms(t,r,a,e),i.updater=gs,t.stateNode=i,i._reactInternals=t,ws(t,r,e,n),t=Wo(null,t,r,!0,s,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return Bl(e)?1:0;if(null!=e){if((e=e.$$typeof)===N)return 11;if(e===R)return 14}return 2}(i),e=Yi(i,e),s){case 0:t=zo(null,t,i,e,n);break e;case 1:t=$o(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Yi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,zo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,$o(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Ko(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ls(e,t),ds(t,r,null,n),(r=t.memoizedState.element)===i)Ks(),t=na(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Vs=Hr(t.stateNode.containerInfo.firstChild),Us=t,s=qs=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Hs.push(s);for(n=Ss(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ks();t=t.child}return t;case 5:return Ds(t),null===e&&zs(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,zr(r,i)?a=null:null!==s&&zr(r,s)&&(t.flags|=16),Bo(e,t),Fo(e,t,a,n),t.child;case 6:return null===e&&zs(t),null;case 13:return Jo(e,t,n);case 4:return Rs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ks(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var l=t.type._context;if(ui(Ji,l._currentValue),l._currentValue=s,null!==a)if(l=a.value,0==(s=cr(l,s)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,s):1073741823))){if(a.children===i.children&&!fi.current){t=na(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&s)){1===l.tag&&((u=cs(-1,n&-n)).tag=2,us(l,u)),l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),rs(l.return,n),c.lanes|=n;break}u=u.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,is(t,n),r=r(i=ss(i,s.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return s=Yi(i=t.type,t.pendingProps),Vo(e,t,i,s=Yi(i.type,s),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,wi(t)):e=!1,is(t,n),vs(t,r,i),ws(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return ta(e,t,n);case 23:case 24:return jo(e,t,n)}throw Error(o(156,t.tag))},tc.prototype.render=function(e){Jl(e,this._internalRoot,null,null)},tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Jl(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(hl(e,4,cl()),ec(e,4))},tt=function(e){13===e.tag&&(hl(e,67108864,cl()),ec(e,67108864))},nt=function(e){if(13===e.tag){var t=cl(),n=ul(e);hl(e,n,t),ec(e,n)}},rt=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=yl,Oe=function(e,t,n,r,i){var s=Na;Na|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Na=s)&&($a(),Hi())}},De=function(){0==(49&Na)&&(function(){if(null!==tl){var e=tl;tl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,fl(e,Bi())}))}Hi()}(),Rl())},Le=function(e,t){var n=Na;Na|=2;try{return e(t)}finally{0===(Na=n)&&($a(),Hi())}};var sc={Events:[ni,ri,ii,Pe,Ae,Rl,{current:!1}]},oc={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},ac={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{Ti=lc.inject(ac),Ii=lc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=ic,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Na;if(0!=(48&n))return e(t);Na|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Na=n,Hi()}},t.hydrate=function(e,t,n){if(!nc(t))throw Error(o(200));return rc(null,e,t,!0,n)},t.render=function(e,t,n){if(!nc(t))throw Error(o(200));return rc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nc(e))throw Error(o(40));return!!e._reactRootContainer&&(vl((function(){rc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=yl,t.unstable_createPortal=function(e,t){return ic(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return rc(e,t,n,!1,r)},t.version="17.0.2"},3935:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(4448)},9921:function(e,t){"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function T(e){return b(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return T(e)||b(e)===u},t.isConcurrentMode=T,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===d},t.isFragment=function(e){return b(e)===s},t.isLazy=function(e){return b(e)===g},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===a},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===_||e.$$typeof===w||e.$$typeof===y)},t.typeOf=b},9864:function(e,t,n){"use strict";e.exports=n(9921)},9704:function(e,t,n){"use strict";n.d(t,{zt:function(){return u},I0:function(){return m},v9:function(){return _}});var r=n(7294),i=r.createContext(null),s=function(e){e()},o=function(){return s},a={notify:function(){},get:function(){return[]}};function l(e,t){var n,r=a;function i(){l.onStateChange&&l.onStateChange()}function s(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=o(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var l={addNestedSub:function(e){return s(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:s,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=a)},getListeners:function(){return r}};return l}var c="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,u=function(e){var t=e.store,n=e.context,s=e.children,o=(0,r.useMemo)((function(){var e=l(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),a=(0,r.useMemo)((function(){return t.getState()}),[t]);c((function(){var e=o.subscription;return e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,a]);var u=n||i;return r.createElement(u.Provider,{value:o},s)};function h(){return(0,r.useContext)(i)}function d(e){void 0===e&&(e=i);var t=e===i?h:function(){return(0,r.useContext)(e)};return function(){return t().store}}n(8679),n(2973),n(7462);var f=d();function p(e){void 0===e&&(e=i);var t=e===i?f:d(e);return function(){return t().dispatch}}var m=p(),g=function(e,t){return e===t};function y(e){void 0===e&&(e=i);var t=e===i?h:function(){return(0,r.useContext)(e)};return function(e,n){void 0===n&&(n=g);var i=t(),s=function(e,t,n,i){var s,o=(0,r.useReducer)((function(e){return e+1}),0)[1],a=(0,r.useMemo)((function(){return l(n,i)}),[n,i]),u=(0,r.useRef)(),h=(0,r.useRef)(),d=(0,r.useRef)(),f=(0,r.useRef)(),p=n.getState();try{if(e!==h.current||p!==d.current||u.current){var m=e(p);s=void 0!==f.current&&t(m,f.current)?f.current:m}else s=f.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return c((function(){h.current=e,d.current=p,f.current=s,u.current=void 0})),c((function(){function e(){try{var e=n.getState();if(e===d.current)return;var r=h.current(e);if(t(r,f.current))return;f.current=r,d.current=e}catch(e){u.current=e}o()}return a.onStateChange=e,a.trySubscribe(),e(),function(){return a.tryUnsubscribe()}}),[n,a]),s}(e,n,i.store,i.subscription);return(0,r.useDebugValue)(s),s}}var v,_=y();v=n(3935).unstable_batchedUpdates,s=v},8359:function(e,t){"use strict";if("function"==typeof Symbol&&Symbol.for){var n=Symbol.for;n("react.element"),n("react.portal"),n("react.fragment"),n("react.strict_mode"),n("react.profiler"),n("react.provider"),n("react.context"),n("react.forward_ref"),n("react.suspense"),n("react.suspense_list"),n("react.memo"),n("react.lazy"),n("react.block"),n("react.server.block"),n("react.fundamental"),n("react.debug_trace_mode"),n("react.legacy_hidden")}},2973:function(e,t,n){"use strict";n(8359)},3727:function(e,t,n){"use strict";n.d(t,{VK:function(){return u},rU:function(){return g}});var r=n(5977),i=n(1721),s=n(7294),o=n(7531),a=n(7462),l=n(3366),c=n(2177),u=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,o.lX)(t.props),t}return(0,i.Z)(t,e),t.prototype.render=function(){return s.createElement(r.F0,{history:this.history,children:this.props.children})},t}(s.Component);s.Component;var h=function(e,t){return"function"==typeof e?e(t):e},d=function(e,t){return"string"==typeof e?(0,o.ob)(e,null,null,t):e},f=function(e){return e},p=s.forwardRef;void 0===p&&(p=f);var m=p((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=(0,l.Z)(e,["innerRef","navigate","onClick"]),c=o.target,u=(0,a.Z)({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return u.ref=f!==p&&t||n,s.createElement("a",u)})),g=p((function(e,t){var n=e.component,i=void 0===n?m:n,u=e.replace,g=e.to,y=e.innerRef,v=(0,l.Z)(e,["component","replace","to","innerRef"]);return s.createElement(r.s6.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=e.history,r=d(h(g,e.location),e.location),l=r?n.createHref(r):"",m=(0,a.Z)({},v,{href:l,navigate:function(){var t=h(g,e.location),r=(0,o.Ep)(e.location)===(0,o.Ep)(d(t));(u||r?n.replace:n.push)(t)}});return f!==p?m.ref=t||y:m.innerRef=y,s.createElement(i,m)}))})),y=function(e){return e},v=s.forwardRef;void 0===v&&(v=y),v((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,o=e.activeClassName,u=void 0===o?"active":o,f=e.activeStyle,p=e.className,m=e.exact,_=e.isActive,w=e.location,b=e.sensitive,T=e.strict,I=e.style,E=e.to,k=e.innerRef,S=(0,l.Z)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return s.createElement(r.s6.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=w||e.location,o=d(h(E,n),n),l=o.pathname,C=l&&l.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),x=C?(0,r.LX)(n.pathname,{path:C,exact:m,sensitive:b,strict:T}):null,N=!!(_?_(x,n):x),P="function"==typeof p?p(N):p,A="function"==typeof I?I(N):I;N&&(P=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(P,u),A=(0,a.Z)({},A,f));var R=(0,a.Z)({"aria-current":N&&i||null,className:P,style:A,to:o},S);return y!==v?R.ref=t||k:R.innerRef=k,s.createElement(g,R)}))}))},5977:function(e,t,n){"use strict";n.d(t,{AW:function(){return I},F0:function(){return _},rs:function(){return E},s6:function(){return v},LX:function(){return T},k6:function(){return S},TH:function(){return C},UO:function(){return x}});var r=n(1721),i=n(7294),s=(n(7531),n(5697)),o=n.n(s),a=1073741823,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{};function c(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var u=i.createContext||function(e,t){var n,s,u,h="__create-react-context-"+((l[u="__global_unique_id__"]=(l[u]||0)+1)+"__"),d=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=c(t.props.value),t}(0,r.Z)(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[h]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((s=r)===(o=i)?0!==s||1/s==1/o:s!=s&&o!=o)?n=0:(n="function"==typeof t?t(r,i):a,0!=(n|=0)&&this.emitter.set(e.value,n))}var s,o},i.render=function(){return this.props.children},n}(i.Component);d.childContextTypes=((n={})[h]=o().object.isRequired,n);var f=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}(0,r.Z)(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?a:t},i.componentDidMount=function(){this.context[h]&&this.context[h].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?a:e},i.componentWillUnmount=function(){this.context[h]&&this.context[h].off(this.onUpdate)},i.getValue=function(){return this.context[h]?this.context[h].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return f.contextTypes=((s={})[h]=o().object,s),{Provider:d,Consumer:f}},h=u,d=n(2177),f=n(7462),p=n(9658),m=n.n(p),g=(n(9864),n(3366),n(8679),function(e){var t=h();return t.displayName=e,t}),y=g("Router-History"),v=g("Router"),_=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}(0,r.Z)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return i.createElement(v.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.createElement(y.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.Component);i.Component,i.Component;var w={},b=0;function T(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,s=void 0!==i&&i,o=n.strict,a=void 0!==o&&o,l=n.sensitive,c=void 0!==l&&l;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=w[n]||(w[n]={});if(r[e])return r[e];var i=[],s={regexp:m()(e,i,t),keys:i};return b<1e4&&(r[e]=s,b++),s}(n,{end:s,strict:a,sensitive:c}),i=r.regexp,o=r.keys,l=i.exec(e);if(!l)return null;var u=l[0],h=l.slice(1),d=e===u;return s&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var I=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(v.Consumer,null,(function(t){t||(0,d.Z)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?T(n.pathname,e.props):t.match,s=(0,f.Z)({},t,{location:n,match:r}),o=e.props,a=o.children,l=o.component,c=o.render;return Array.isArray(a)&&function(e){return 0===i.Children.count(e)}(a)&&(a=null),i.createElement(v.Provider,{value:s},s.match?a?"function"==typeof a?a(s):a:l?i.createElement(l,s):c?c(s):null:"function"==typeof a?a(s):null)}))},t}(i.Component);i.Component;var E=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(v.Consumer,null,(function(t){t||(0,d.Z)(!1);var n,r,s=e.props.location||t.location;return i.Children.forEach(e.props.children,(function(e){if(null==r&&i.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?T(s.pathname,(0,f.Z)({},e.props,{path:o})):t.match}})),r?i.cloneElement(n,{location:s,computedMatch:r}):null}))},t}(i.Component),k=i.useContext;function S(){return k(y)}function C(){return k(v).location}function x(){var e=k(v).match;return e?e.params:{}}},6585:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},9658:function(e,t,n){var r=n(6585);e.exports=function e(t,n,i){return r(n)||(i=n||i,n=[]),i=i||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(t,n):r(t)?function(t,n,r){for(var i=[],s=0;s<t.length;s++)i.push(e(t[s],n,r).source);return u(new RegExp("(?:"+i.join("|")+")",h(r)),n)}(t,n,i):function(e,t,n){return d(s(e,n),t,n)}(t,n,i)},e.exports.parse=s,e.exports.compile=function(e,t){return a(s(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,r=[],s=0,o=0,a="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(a+=e.slice(o,f),o=f+h.length,d)a+=d[1];else{var p=e[o],m=n[2],g=n[3],y=n[4],v=n[5],_=n[6],w=n[7];a&&(r.push(a),a="");var b=null!=m&&null!=p&&p!==m,T="+"===_||"*"===_,I="?"===_||"*"===_,E=n[2]||u,k=y||v;r.push({name:g||s++,prefix:m||"",delimiter:E,optional:I,repeat:T,partial:b,asterisk:!!w,pattern:k?c(k):w?".*":"[^"+l(E)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var s="",a=t||{},l=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!=typeof u){var h,d=a[u.name];if(null==d){if(u.optional){u.partial&&(s+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=l(d[f]),!n[c].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");s+=(0===f?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(d),!n[c].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');s+=u.prefix+h}}else s+=u}return s}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,s=!1!==n.end,o="",a=0;a<e.length;a++){var c=e[a];if("string"==typeof c)o+=l(c);else{var d=l(c.prefix),f="(?:"+c.pattern+")";t.push(c),c.repeat&&(f+="(?:"+d+f+")*"),o+=f=c.optional?c.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=l(n.delimiter||"/"),m=o.slice(-p.length)===p;return i||(o=(m?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=s?"$":i&&m?"":"(?="+p+"|$)",u(new RegExp("^"+o,h(n)),t)}},9249:function(e,t,n){"use strict";n.d(t,{Ix:function(){return A},Am:function(){return z}});var r=n(7294);function i(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=i(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function s(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=i(e))&&(r&&(r+=" "),r+=t);return r}var o=n(3935);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function c(e){return"number"==typeof e&&!isNaN(e)}function u(e){return"boolean"==typeof e}function h(e){return"string"==typeof e}function d(e){return"function"==typeof e}function f(e){return h(e)||d(e)?e:null}function p(e){return 0===e||e}var m=!("undefined"==typeof window||!window.document||!window.document.createElement);function g(e){return(0,r.isValidElement)(e)||h(e)||d(e)||c(e)}var y={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},v={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"};function _(e){var t=e.enter,n=e.exit,i=e.appendPosition,s=void 0!==i&&i,o=e.collapse,a=void 0===o||o,l=e.collapseDuration,c=void 0===l?300:l;return function(e){var i=e.children,o=e.position,l=e.preventExitTransition,u=e.done,h=e.nodeRef,d=e.isIn,f=s?t+"--"+o:t,p=s?n+"--"+o:n,m=(0,r.useRef)(),g=(0,r.useRef)(0);function y(e){if(e.target===h.current){var t=h.current;t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",y),t.removeEventListener("animationcancel",y),0===g.current&&(t.className=m.current)}}function v(){var e=h.current;e.removeEventListener("animationend",v),a?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=r+"px",i.transition="all "+n+"ms",requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,u,c):u()}return(0,r.useLayoutEffect)((function(){var e;e=h.current,m.current=e.className,e.className+=" "+f,e.addEventListener("animationend",y),e.addEventListener("animationcancel",y)}),[]),(0,r.useEffect)((function(){d||(l?v():function(){g.current=1;var e=h.current;e.className+=" "+p,e.addEventListener("animationend",v)}())}),[d]),r.createElement(r.Fragment,null,i)}}var w={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.list.has(e)&&this.list.get(e).forEach((function(n){var i=setTimeout((function(){n.apply(void 0,r)}),0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(i)}))}},b=["delay","staleId"];function T(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function I(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function E(e){var t=e.closeToast,n=e.theme,i=e.ariaLabel,s=void 0===i?"close":i;return(0,r.createElement)("button",{className:"Toastify__close-button Toastify__close-button--"+n,type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":s},(0,r.createElement)("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},(0,r.createElement)("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function k(e){var t,n,i=e.delay,o=e.isRunning,l=e.closeToast,c=e.type,u=e.hide,h=e.className,f=e.style,p=e.controlledProgress,m=e.progress,g=e.rtl,y=e.isIn,v=e.theme,_=a({},f,{animationDuration:i+"ms",animationPlayState:o?"running":"paused",opacity:u?0:1});p&&(_.transform="scaleX("+m+")");var w=s("Toastify__progress-bar",p?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--"+v,"Toastify__progress-bar--"+c,((t={})["Toastify__progress-bar--rtl"]=g,t)),b=d(h)?h({rtl:g,type:c,defaultClassName:w}):s(w,h),T=((n={})[p&&m>=1?"onTransitionEnd":"onAnimationEnd"]=p&&m<1?null:function(){y&&l()},n);return(0,r.createElement)("div",Object.assign({role:"progressbar","aria-hidden":u?"true":"false","aria-label":"notification timer",className:b,style:_},T))}k.defaultProps={type:v.DEFAULT,hide:!1};var S=["theme","type"],C=function(e){var t=e.theme,n=e.type,i=l(e,S);return(0,r.createElement)("svg",Object.assign({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-"+n+")"},i))},x={info:function(e){return(0,r.createElement)(C,Object.assign({},e),(0,r.createElement)("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return(0,r.createElement)(C,Object.assign({},e),(0,r.createElement)("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return(0,r.createElement)(C,Object.assign({},e),(0,r.createElement)("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return(0,r.createElement)(C,Object.assign({},e),(0,r.createElement)("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return(0,r.createElement)("div",{className:"Toastify__spinner"})}},N=function(e){var t,n,i=function(e){var t=(0,r.useState)(!1),n=t[0],i=t[1],s=(0,r.useState)(!1),o=s[0],a=s[1],l=(0,r.useRef)(null),c=(0,r.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,u=(0,r.useRef)(e),h=e.autoClose,f=e.pauseOnHover,p=e.closeToast,m=e.onClick,g=e.closeOnClick;function y(t){if(e.draggable){c.didMove=!1,document.addEventListener("mousemove",b),document.addEventListener("mouseup",E),document.addEventListener("touchmove",b),document.addEventListener("touchend",E);var n=l.current;c.canCloseOnClick=!0,c.canDrag=!0,c.boundingRect=n.getBoundingClientRect(),n.style.transition="",c.x=T(t.nativeEvent),c.y=I(t.nativeEvent),"x"===e.draggableDirection?(c.start=c.x,c.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(c.start=c.y,c.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function v(){if(c.boundingRect){var t=c.boundingRect,n=t.top,r=t.bottom,i=t.left,s=t.right;e.pauseOnHover&&c.x>=i&&c.x<=s&&c.y>=n&&c.y<=r?w():_()}}function _(){i(!0)}function w(){i(!1)}function b(t){var r=l.current;c.canDrag&&r&&(c.didMove=!0,n&&w(),c.x=T(t),c.y=I(t),"x"===e.draggableDirection?c.delta=c.x-c.start:c.delta=c.y-c.start,c.start!==c.x&&(c.canCloseOnClick=!1),r.style.transform="translate"+e.draggableDirection+"("+c.delta+"px)",r.style.opacity=""+(1-Math.abs(c.delta/c.removalDistance)))}function E(){document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",E);var t=l.current;if(c.canDrag&&c.didMove&&t){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance)return a(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}(0,r.useEffect)((function(){u.current=e})),(0,r.useEffect)((function(){return l.current&&l.current.addEventListener("d",_,{once:!0}),d(e.onOpen)&&e.onOpen((0,r.isValidElement)(e.children)&&e.children.props),function(){var e=u.current;d(e.onClose)&&e.onClose((0,r.isValidElement)(e.children)&&e.children.props)}}),[]),(0,r.useEffect)((function(){return e.pauseOnFocusLoss&&(document.hasFocus()||w(),window.addEventListener("focus",_),window.addEventListener("blur",w)),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",_),window.removeEventListener("blur",w))}}),[e.pauseOnFocusLoss]);var k={onMouseDown:y,onTouchStart:y,onMouseUp:v,onTouchEnd:v};return h&&f&&(k.onMouseEnter=w,k.onMouseLeave=_),g&&(k.onClick=function(e){m&&m(e),c.canCloseOnClick&&p()}),{playToast:_,pauseToast:w,isRunning:n,preventExitTransition:o,toastRef:l,eventHandlers:k}}(e),o=i.isRunning,a=i.preventExitTransition,l=i.toastRef,c=i.eventHandlers,u=e.closeButton,f=e.children,p=e.autoClose,m=e.onClick,g=e.type,y=e.hideProgressBar,v=e.closeToast,_=e.transition,w=e.position,b=e.className,E=e.style,S=e.bodyClassName,C=e.bodyStyle,N=e.progressClassName,P=e.progressStyle,A=e.updateId,R=e.role,O=e.progress,D=e.rtl,L=e.toastId,M=e.deleteToast,F=e.isIn,U=e.isLoading,V=e.icon,q=e.theme,j=s("Toastify__toast","Toastify__toast-theme--"+q,"Toastify__toast--"+g,((t={})["Toastify__toast--rtl"]=D,t)),B=d(b)?b({rtl:D,position:w,type:g,defaultClassName:j}):s(j,b),z=!!O,$=x[g],W={theme:q,type:g},K=$&&$(W);return!1===V?K=void 0:d(V)?K=V(W):(0,r.isValidElement)(V)?K=(0,r.cloneElement)(V,W):h(V)?K=V:U&&(K=x.spinner()),(0,r.createElement)(_,{isIn:F,done:M,position:w,preventExitTransition:a,nodeRef:l},(0,r.createElement)("div",Object.assign({id:L,onClick:m,className:B},c,{style:E,ref:l}),(0,r.createElement)("div",Object.assign({},F&&{role:R},{className:d(S)?S({type:g}):s("Toastify__toast-body",S),style:C}),K&&(0,r.createElement)("div",{className:s("Toastify__toast-icon",(n={},n["Toastify--animate-icon Toastify__zoom-enter"]=!U,n))},K),(0,r.createElement)("div",null,f)),function(e){if(e){var t={closeToast:v,type:g,theme:q};return d(e)?e(t):(0,r.isValidElement)(e)?(0,r.cloneElement)(e,t):void 0}}(u),(p||z)&&(0,r.createElement)(k,Object.assign({},A&&!z?{key:"pb-"+A}:{},{rtl:D,theme:q,delay:p,isRunning:o,isIn:F,closeToast:v,hide:y,type:g,style:P,className:N,controlledProgress:z,progress:O}))))},P=_({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),A=function(e){var t=function(e){var t=(0,r.useReducer)((function(e){return e+1}),0)[1],n=(0,r.useState)([]),i=n[0],s=n[1],o=(0,r.useRef)(null),a=(0,r.useRef)(new Map).current,m=function(e){return-1!==i.indexOf(e)},y=(0,r.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:m,getToast:function(e){return a.get(e)}}).current;function v(e){var t=e.containerId;!y.props.limit||t&&y.containerId!==t||(y.count-=y.queue.length,y.queue=[])}function _(e){s((function(t){return p(e)?t.filter((function(t){return t!==e})):[]}))}function T(){var e=y.queue.shift();E(e.toastContent,e.toastProps,e.staleId)}function I(e,n){var i=n.delay,s=n.staleId,m=l(n,b);if(g(e)&&!function(e){return!o.current||y.props.enableMultiContainer&&e.containerId!==y.props.containerId||a.has(e.toastId)&&null==e.updateId}(m)){var v=m.toastId,w=m.updateId,I=m.data,k=y.props,S=function(){return _(v)},C=null==w;C&&y.count++;var x,N,P={toastId:v,updateId:w,isLoading:m.isLoading,theme:m.theme||k.theme,icon:null!=m.icon?m.icon:k.icon,isIn:!1,key:m.key||y.toastKey++,type:m.type,closeToast:S,closeButton:m.closeButton,rtl:k.rtl,position:m.position||k.position,transition:m.transition||k.transition,className:f(m.className||k.toastClassName),bodyClassName:f(m.bodyClassName||k.bodyClassName),style:m.style||k.toastStyle,bodyStyle:m.bodyStyle||k.bodyStyle,onClick:m.onClick||k.onClick,pauseOnHover:u(m.pauseOnHover)?m.pauseOnHover:k.pauseOnHover,pauseOnFocusLoss:u(m.pauseOnFocusLoss)?m.pauseOnFocusLoss:k.pauseOnFocusLoss,draggable:u(m.draggable)?m.draggable:k.draggable,draggablePercent:m.draggablePercent||k.draggablePercent,draggableDirection:m.draggableDirection||k.draggableDirection,closeOnClick:u(m.closeOnClick)?m.closeOnClick:k.closeOnClick,progressClassName:f(m.progressClassName||k.progressClassName),progressStyle:m.progressStyle||k.progressStyle,autoClose:!m.isLoading&&(x=m.autoClose,N=k.autoClose,!1===x||c(x)&&x>0?x:N),hideProgressBar:u(m.hideProgressBar)?m.hideProgressBar:k.hideProgressBar,progress:m.progress,role:m.role||k.role,deleteToast:function(){a.delete(v);var e=y.queue.length;if(y.count=p(v)?y.count-1:y.count-y.displayedToast,y.count<0&&(y.count=0),e>0){var n=p(v)?1:y.props.limit;if(1===e||1===n)y.displayedToast++,T();else{var r=n>e?e:n;y.displayedToast=r;for(var i=0;i<r;i++)T()}}else t()}};d(m.onOpen)&&(P.onOpen=m.onOpen),d(m.onClose)&&(P.onClose=m.onClose),P.closeButton=k.closeButton,!1===m.closeButton||g(m.closeButton)?P.closeButton=m.closeButton:!0===m.closeButton&&(P.closeButton=!g(k.closeButton)||k.closeButton);var A=e;(0,r.isValidElement)(e)&&!h(e.type)?A=(0,r.cloneElement)(e,{closeToast:S,toastProps:P,data:I}):d(e)&&(A=e({closeToast:S,toastProps:P,data:I})),k.limit&&k.limit>0&&y.count>k.limit&&C?y.queue.push({toastContent:A,toastProps:P,staleId:s}):c(i)&&i>0?setTimeout((function(){E(A,P,s)}),i):E(A,P,s)}}function E(e,t,n){var r=t.toastId;n&&a.delete(n),a.set(r,{content:e,props:t}),s((function(e){return[].concat(e,[r]).filter((function(e){return e!==n}))}))}return(0,r.useEffect)((function(){return y.containerId=e.containerId,w.cancelEmit(3).on(0,I).on(1,(function(e){return o.current&&_(e)})).on(5,v).emit(2,y),function(){return w.emit(3,y)}}),[]),(0,r.useEffect)((function(){y.isToastActive=m,y.displayedToast=i.length,w.emit(4,i.length,e.containerId)}),[i]),(0,r.useEffect)((function(){y.props=e})),{getToastToRender:function(t){var n=new Map,r=Array.from(a.values());return e.newestOnTop&&r.reverse(),r.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(e){return t(e[0],e[1])}))},containerRef:o,isToastActive:m}}(e),n=t.getToastToRender,i=t.containerRef,o=t.isToastActive,m=e.className,y=e.style,v=e.rtl,_=e.containerId;function T(e){var t,n=s("Toastify__toast-container","Toastify__toast-container--"+e,((t={})["Toastify__toast-container--rtl"]=v,t));return d(m)?m({position:e,rtl:v,defaultClassName:n}):s(n,f(m))}return(0,r.createElement)("div",{ref:i,className:"Toastify",id:_},n((function(e,t){var n=t.length?a({},y):a({},y,{pointerEvents:"none"});return(0,r.createElement)("div",{className:T(e),style:n,key:"container-"+e},t.map((function(e){var t=e.content,n=e.props;return(0,r.createElement)(N,Object.assign({},n,{isIn:o(n.toastId),key:"toast-"+n.key,closeButton:!0===n.closeButton?E:n.closeButton}),t)})))})))};A.defaultProps={position:y.TOP_RIGHT,transition:P,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:E,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var R,O,D,L=new Map,M=[],F=!1;function U(){return Math.random().toString(36).substring(2,9)}function V(e){return e&&(h(e.toastId)||c(e.toastId))?e.toastId:U()}function q(e,t){return L.size>0?w.emit(0,e,t):(M.push({content:e,options:t}),F&&m&&(F=!1,O=document.createElement("div"),document.body.appendChild(O),(0,o.render)((0,r.createElement)(A,Object.assign({},D)),O))),t.toastId}function j(e,t){return a({},t,{type:t&&t.type||e,toastId:V(t)})}function B(e){return function(t,n){return q(t,j(e,n))}}function z(e,t){return q(e,j(v.DEFAULT,t))}z.loading=function(e,t){return q(e,j(v.DEFAULT,a({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},z.promise=function(e,t,n){var r,i=t.pending,s=t.error,o=t.success;i&&(r=h(i)?z.loading(i,n):z.loading(i.render,a({},n,i)));var l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=function(e,t,i){if(null!=t){var s=a({type:e},l,n,{data:i}),o=h(t)?{render:t}:t;return r?z.update(r,a({},s,o)):z(o.render,a({},s,o)),i}z.dismiss(r)},u=d(e)?e():e;return u.then((function(e){return c("success",o,e)})).catch((function(e){return c("error",s,e)})),u},z.success=B(v.SUCCESS),z.info=B(v.INFO),z.error=B(v.ERROR),z.warning=B(v.WARNING),z.warn=z.warning,z.dark=function(e,t){return q(e,j(v.DEFAULT,a({theme:"dark"},t)))},z.dismiss=function(e){return w.emit(1,e)},z.clearWaitingQueue=function(e){return void 0===e&&(e={}),w.emit(5,e)},z.isActive=function(e){var t=!1;return L.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},z.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=L.get(n||R);return r?r.getToast(e):null}(e,t);if(n){var r=n.props,i=n.content,s=a({},r,t,{toastId:t.toastId||e,updateId:U()});s.toastId!==e&&(s.staleId=e);var o=s.render||i;delete s.render,q(o,s)}}),0)},z.done=function(e){z.update(e,{progress:1})},z.onChange=function(e){return d(e)&&w.on(4,e),function(){d(e)&&w.off(4,e)}},z.configure=function(e){void 0===e&&(e={}),F=!0,D=e},z.POSITION=y,z.TYPE=v,w.on(2,(function(e){R=e.containerId||e,L.set(R,e),M.forEach((function(e){w.emit(0,e.content,e.options)})),M=[]})).on(3,(function(e){L.delete(e.containerId||e),0===L.size&&w.off(0).off(1).off(5),m&&O&&document.body.removeChild(O)}))},2408:function(e,t,n){"use strict";var r=n(7418),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),u=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var _=v.prototype=new y;_.constructor=v,r(_,g.prototype),_.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!T.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:w.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var k=/\/+/g;function S(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case s:l=!0}}if(l)return o=o(l=e),e=""===r?"."+S(l,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(k,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=r+S(a=e[c],c);l+=C(a,t,n,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=C(a=a.value,t,n,u=r+S(a,c++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function x(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function A(){var e=P.current;if(null===e)throw Error(f(321));return e}var R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:x,forEach:function(e,t,n){x(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null==e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)b.call(t,u)&&!T.hasOwnProperty(u)&&(s[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)s.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},7294:function(e,t,n){"use strict";e.exports=n(2408)},4500:function(e,t,n){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function s(e,t){s.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function a(e,t,n){a.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function l(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t=void 0===e?"undefined":k(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function u(e,t,n,r,h,d,f){f=f||[];var p=(h=h||[]).slice(0);if(void 0!==d){if(r){if("function"==typeof r&&r(p,d))return;if("object"===(void 0===r?"undefined":k(r))){if(r.prefilter&&r.prefilter(p,d))return;if(r.normalize){var m=r.normalize(p,d,e,t);m&&(e=m[0],t=m[1])}}}p.push(d)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var g=void 0===e?"undefined":k(e),y=void 0===t?"undefined":k(t),v="undefined"!==g||f&&f[f.length-1].lhs&&f[f.length-1].lhs.hasOwnProperty(d),_="undefined"!==y||f&&f[f.length-1].rhs&&f[f.length-1].rhs.hasOwnProperty(d);if(!v&&_)n(new s(p,t));else if(!_&&v)n(new o(p,e));else if(c(e)!==c(t))n(new i(p,e,t));else if("date"===c(e)&&e-t!=0)n(new i(p,e,t));else if("object"===g&&null!==e&&null!==t)if(f.filter((function(t){return t.lhs===e})).length)e!==t&&n(new i(p,e,t));else{if(f.push({lhs:e,rhs:t}),Array.isArray(e)){var w;for(e.length,w=0;w<e.length;w++)w>=t.length?n(new a(p,w,new o(void 0,e[w]))):u(e[w],t[w],n,r,p,w,f);for(;w<t.length;)n(new a(p,w,new s(void 0,t[w++])))}else{var b=Object.keys(e),T=Object.keys(t);b.forEach((function(i,s){var o=T.indexOf(i);o>=0?(u(e[i],t[i],n,r,p,i,f),T=l(T,o)):u(e[i],void 0,n,r,p,i,f)})),T.forEach((function(e){u(void 0,t[e],n,r,p,e,f)}))}f.length=f.length-1}else e!==t&&("number"===g&&isNaN(e)&&isNaN(t)||n(new i(p,e,t)))}function h(e,t,n,r){return r=r||[],u(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function d(e,t,n){if(n.path&&n.path.length){var r,i=e[t],s=n.path.length-1;for(r=0;r<s;r++)i=i[n.path[r]];switch(n.kind){case"A":d(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":d(e[t],n.index,n.item);break;case"D":e=l(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function f(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,s=n.path?n.path.length-1:0;++i<s;)void 0===r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":d(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(e,t,n){if(n.path&&n.path.length){var r,i=e[t],s=n.path.length-1;for(r=0;r<s;r++)i=i[n.path[r]];switch(n.kind){case"A":p(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=l(e,t)}return e}function m(e){return"color: "+x[e].color+"; font-weight: bold"}function g(e,t,n,r){var i=h(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=function(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,s=e.index,o=e.item;switch(t){case"E":return[n.join("."),r,"→",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+s+"]",o];default:return[]}}(e);n.log.apply(n,["%c "+x[t].text,m(t)].concat(S(r)))})):n.log("—— no diff ——");try{n.groupEnd()}catch(e){n.log("—— diff end —— ")}}function y(e,t,n,r){switch(void 0===e?"undefined":k(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,S(n)):e[r];case"function":return e(t);default:return e}}function v(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,s=void 0===i?function(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var s=["action"];return s.push("%c"+String(e.type)),t&&s.push("%c@ "+r),n&&s.push("%c(in "+i.toFixed(2)+" ms)"),s.join(" ")}}(t):i,o=t.collapsed,a=t.colors,l=t.level,c=t.diff,u=void 0===t.titleFormatter;e.forEach((function(i,h){var d=i.started,f=i.startedTime,p=i.action,m=i.prevState,v=i.error,_=i.took,w=i.nextState,b=e[h+1];b&&(w=b.prevState,_=b.started-d);var T=r(p),E="function"==typeof o?o((function(){return w}),p,i):o,k=I(f),S=a.title?"color: "+a.title(T)+";":"",C=["color: gray; font-weight: lighter;"];C.push(S),t.timestamp&&C.push("color: gray; font-weight: lighter;"),t.duration&&C.push("color: gray; font-weight: lighter;");var x=s(T,k,_);try{E?a.title&&u?n.groupCollapsed.apply(n,["%c "+x].concat(C)):n.groupCollapsed(x):a.title&&u?n.group.apply(n,["%c "+x].concat(C)):n.group(x)}catch(e){n.log(x)}var N=y(l,T,[m],"prevState"),P=y(l,T,[T],"action"),A=y(l,T,[v,m],"error"),R=y(l,T,[w],"nextState");if(N)if(a.prevState){var O="color: "+a.prevState(m)+"; font-weight: bold";n[N]("%c prev state",O,m)}else n[N]("prev state",m);if(P)if(a.action){var D="color: "+a.action(T)+"; font-weight: bold";n[P]("%c action    ",D,T)}else n[P]("action    ",T);if(v&&A)if(a.error){var L="color: "+a.error(v,m)+"; font-weight: bold;";n[A]("%c error     ",L,v)}else n[A]("error     ",v);if(R)if(a.nextState){var M="color: "+a.nextState(w)+"; font-weight: bold";n[R]("%c next state",M,w)}else n[R]("next state",w);c&&g(m,w,n,E);try{n.groupEnd()}catch(e){n.log("—— log end ——")}}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},N,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,s=t.predicate,o=t.logErrors,a=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var l=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof s&&!s(n,c))return e(c);var u={};l.push(u),u.started=E.now(),u.startedTime=new Date,u.prevState=r(n()),u.action=c;var h=void 0;if(o)try{h=e(c)}catch(e){u.error=i(e)}else h=e(c);u.took=E.now()-u.started,u.nextState=r(n());var d=t.diff&&"function"==typeof a?a(n,c):t.diff;if(v(l,Object.assign({},t,{diff:d})),l.length=0,u.error)throw u.error;return h}}}}var w,b,T=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},I=function(e){return T(e.getHours(),2)+":"+T(e.getMinutes(),2)+":"+T(e.getSeconds(),2)+"."+T(e.getMilliseconds(),3)},E="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},C=[];w="object"===(void 0===n.g?"undefined":k(n.g))&&n.g?n.g:"undefined"!=typeof window?window:{},(b=w.DeepDiff)&&C.push((function(){void 0!==b&&w.DeepDiff===h&&(w.DeepDiff=b,b=void 0)})),t(i,r),t(s,r),t(o,r),t(a,r),Object.defineProperties(h,{diff:{value:h,enumerable:!0},observableDiff:{value:u,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&u(e,t,(function(r){n&&!n(e,t,r)||f(e,t,r)}))},enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var r,i,s=e;for(i=n.path.length-1,r=0;r<i;r++)void 0===s[n.path[r]]&&(s[n.path[r]]={}),s=s[n.path[r]];switch(n.kind){case"A":p(s[n.path[r]],n.index,n.item);break;case"D":case"E":s[n.path[r]]=n.lhs;break;case"N":delete s[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==b},enumerable:!0},noConflict:{value:function(){return C&&(C.forEach((function(e){e()})),C=null),h},enumerable:!0}});var x={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},N={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?_()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=N,e.createLogger=_,e.logger=P,e.default=P,Object.defineProperty(e,"__esModule",{value:!0})}(t)},3894:function(e,t){"use strict";function n(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var r=n();r.withExtraArgument=n,t.Z=r},5857:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}n.d(t,{md:function(){return p},UY:function(){return d},MT:function(){return h}});var a="function"==typeof Symbol&&Symbol.observable||"@@observable",l=function(){return Math.random().toString(36).substring(7).split("").join(".")},c={INIT:"@@redux/INIT"+l(),REPLACE:"@@redux/REPLACE"+l(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+l()}};function u(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function h(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(o(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(o(1));return n(h)(e,t)}if("function"!=typeof e)throw new Error(o(2));var i=e,s=t,l=[],d=l,f=!1;function p(){d===l&&(d=l.slice())}function m(){if(f)throw new Error(o(3));return s}function g(e){if("function"!=typeof e)throw new Error(o(4));if(f)throw new Error(o(5));var t=!0;return p(),d.push(e),function(){if(t){if(f)throw new Error(o(6));t=!1,p();var n=d.indexOf(e);d.splice(n,1),l=null}}}function y(e){if(!u(e))throw new Error(o(7));if(void 0===e.type)throw new Error(o(8));if(f)throw new Error(o(9));try{f=!0,s=i(s,e)}finally{f=!1}for(var t=l=d,n=0;n<t.length;n++)(0,t[n])();return e}function v(e){if("function"!=typeof e)throw new Error(o(10));i=e,y({type:c.REPLACE})}function _(){var e,t=g;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(o(11));function n(){e.next&&e.next(m())}return n(),{unsubscribe:t(n)}}})[a]=function(){return this},e}return y({type:c.INIT}),(r={dispatch:y,subscribe:g,getState:m,replaceReducer:v})[a]=_,r}function d(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var s,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:c.INIT}))throw new Error(o(12));if(void 0===n(void 0,{type:c.PROBE_UNKNOWN_ACTION()}))throw new Error(o(13))}))}(n)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var r=!1,i={},l=0;l<a.length;l++){var c=a[l],u=n[c],h=e[c],d=u(h,t);if(void 0===d)throw t&&t.type,new Error(o(14));i[c]=d,r=r||d!==h}return(r=r||a.length!==Object.keys(e).length)?i:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(o(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=f.apply(void 0,a)(n.dispatch),s(s({},n),{},{dispatch:r})}}}},53:function(e,t){"use strict";var n,r,i,s;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,u=null,h=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(h,0),e}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,_=0;t.unstable_shouldYield=function(){return t.unstable_now()>=_},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();_=e+v;try{g(!0,e)?b.postMessage(null):(m=!1,g=null)}catch(e){throw b.postMessage(null),e}}else m=!1},n=function(e){g=e,m||(m=!0,b.postMessage(null))},r=function(e,n){y=d((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function T(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,l=e[a];if(void 0!==o&&0>k(o,n))void 0!==l&&0>k(l,o)?(e[r]=l,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==l&&0>k(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],C=[],x=1,N=null,P=3,A=!1,R=!1,O=!1;function D(e){for(var t=I(C);null!==t;){if(null===t.callback)E(C);else{if(!(t.startTime<=e))break;E(C),t.sortIndex=t.expirationTime,T(S,t)}t=I(C)}}function L(e){if(O=!1,D(e),!R)if(null!==I(S))R=!0,n(M);else{var t=I(C);null!==t&&r(L,t.startTime-e)}}function M(e,n){R=!1,O&&(O=!1,i()),A=!0;var s=P;try{for(D(n),N=I(S);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"==typeof o){N.callback=null,P=N.priorityLevel;var a=o(N.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?N.callback=a:N===I(S)&&E(S),D(n)}else E(S);N=I(S)}if(null!==N)var l=!0;else{var c=I(C);null!==c&&r(L,c.startTime-n),l=!1}return l}finally{N=null,P=s,A=!1}}var F=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||A||(R=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return I(S)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:x++,callback:s,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>a?(e.sortIndex=o,T(C,e),null===I(S)&&e===I(C)&&(O?i():O=!0,r(L,o-a))):(e.sortIndex=l,T(S,e),R||A||(R=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},3840:function(e,t,n){"use strict";e.exports=n(53)},5202:function(e,t,n){"use strict";var r=n(3379),i=n.n(r),s=n(7795),o=n.n(s),a=n(569),l=n.n(a),c=n(3565),u=n.n(c),h=n(9216),d=n.n(h),f=n(4589),p=n.n(f),m=n(5982),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(m.Z,g),m.Z&&m.Z.locals&&m.Z.locals},3379:function(e){"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],u=s[c]||0,h="".concat(c," ").concat(u);s[c]=u+1;var d=n(h),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var p=i(f,r);r.byIndex=a,t.splice(a,0,{identifier:h,updater:p,references:1})}o.push(h)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var l=r(e,i),c=0;c<s.length;c++){var u=n(s[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=l}}},569:function(e){"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:function(e,t,n){"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:function(e){"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2177:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});function r(e,t){if(!e)throw new Error("Invariant failed")}},7462:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},1721:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{Z:function(){return i}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},8180:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(4444),i=n(8463),s=n(2238),o=n(3333);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate))))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const l=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const l=new e(a,n);return t[a.name]=l,l},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw l.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(e=e||s._DEFAULT_ENTRY_NAME,!(0,r.r3)(t,e))throw l.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),u=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){u.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&u.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.19",undefined)},2238:function(e,t,n){"use strict";n.r(t),n.d(t,{FirebaseError:function(){return s.ZR},SDK_VERSION:function(){return I},_DEFAULT_ENTRY_NAME:function(){return h},_addComponent:function(){return m},_addOrOverwriteComponent:function(){return g},_apps:function(){return f},_clearComponents:function(){return w},_components:function(){return p},_getProvider:function(){return v},_registerComponent:function(){return y},_removeServiceInstance:function(){return _},deleteApp:function(){return C},getApp:function(){return k},getApps:function(){return S},initializeApp:function(){return E},onLog:function(){return N},registerVersion:function(){return x},setLogLevel:function(){return P}});var r=n(8463),i=n(3333),s=n(4444),o=n(8676);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const l="@firebase/app",c="0.7.18",u=new i.Yd("@firebase/app"),h="[DEFAULT]",d={[l]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},f=new Map,p=new Map;function m(e,t){try{e.container.addComponent(t)}catch(n){u.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function g(e,t){e.container.addOrOverwriteComponent(t)}function y(e){const t=e.name;if(p.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;p.set(t,e);for(const t of f.values())m(t,e);return!0}function v(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _(e,t,n=h){v(e,t).clearInstance(n)}function w(){p.clear()}const b=new s.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class T{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})}}const I="9.6.8";function E(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:h,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw b.create("bad-app-name",{appName:String(i)});const o=f.get(i);if(o){if((0,s.vZ)(e,o.options)&&(0,s.vZ)(n,o.config))return o;throw b.create("duplicate-app",{appName:i})}const a=new r.H0(i);for(const e of p.values())a.addComponent(e);const l=new T(e,n,a);return f.set(i,l),l}function k(e=h){const t=f.get(e);if(!t)throw b.create("no-app",{appName:e});return t}function S(){return Array.from(f.values())}async function C(e){const t=e.name;f.has(t)&&(f.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function x(e,t,n){var i;let s=null!==(i=d[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void u.warn(e.join(" "))}y(new r.wA(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}function N(e,t){if(null!==e&&"function"!=typeof e)throw b.create("invalid-log-argument");(0,i.Am)(e,t)}function P(e){(0,i.Ub)(e)}const A="firebase-heartbeat-store";let R=null;function O(){return R||(R=(0,o.openDb)("firebase-heartbeat-database",1,(e=>{0===e.oldVersion&&e.createObjectStore(A)})).catch((e=>{throw b.create("storage-open",{originalErrorMessage:e.message})}))),R}async function D(e,t){try{const n=(await O()).transaction(A,"readwrite"),r=n.objectStore(A);return await r.put(t,L(e)),n.complete}catch(e){throw b.create("storage-set",{originalErrorMessage:e.message})}}function L(e){return`${e.name}!${e.options.appId}`}class M{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new F(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=(new Date).toISOString().substring(0,10);if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!this._heartbeatsCache.some((e=>e.date===t)))return this._heartbeatsCache.push({date:t,userAgent:e}),this._heartbeatsCache=this._heartbeatsCache.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache)return"";const{heartbeatsToSend:e,unsentEntries:t}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.userAgent===i.userAgent));if(e){if(e.dates.push(i.date),U(n)>t){e.dates.pop();break}}else if(n.push({userAgent:i.userAgent,dates:[i.date]}),U(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache),n=(0,s.h$)(JSON.stringify({version:2,heartbeats:e}));return t.length>0?(this._heartbeatsCache=t,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache=null,this._storage.deleteAll()),n}}class F{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.hl)()&&(0,s.eu)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{return(await O()).transaction(A).objectStore(A).get(L(e))}catch(e){throw b.create("storage-get",{originalErrorMessage:e.message})}}(this.app);return(null==e?void 0:e.heartbeats)||[]}return[]}async overwrite(e){return await this._canUseIndexedDBPromise?D(this.app,{heartbeats:e}):void 0}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return D(this.app,{heartbeats:[...t,...e]})}}async delete(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return D(this.app,{heartbeats:t.filter((t=>!e.includes(t)))})}}async deleteAll(){return await this._canUseIndexedDBPromise?async function(e){try{const t=(await O()).transaction(A,"readwrite");return await t.objectStore(A).delete(L(e)),t.complete}catch(e){throw b.create("storage-delete",{originalErrorMessage:e.message})}}(this.app):void 0}}function U(e){return(0,s.h$)(JSON.stringify({version:2,heartbeats:e})).length}y(new r.wA("platform-logger",(e=>new a(e)),"PRIVATE")),y(new r.wA("heartbeat",(e=>new M(e)),"PRIVATE")),x(l,c,""),x(l,c,"esm2017"),x("fire-js","")},8463:function(e,t,n){"use strict";n.d(t,{H0:function(){return a},wA:function(){return i},zt:function(){return o}});var r=n(4444);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===s?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},3333:function(e,t,n){"use strict";n.d(t,{Am:function(){return h},Ub:function(){return u},Yd:function(){return c},in:function(){return i}});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function u(e){r.forEach((t=>{t.setLogLevel(e)}))}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}}}]);